/* oak build --web */
// module system
const __Oak_Modules = {};
let __Oak_Import_Aliases;
function __oak_modularize(name, fn) {
	__Oak_Modules[name] = fn;
}
function __oak_module_import(name) {
	if (typeof __Oak_Modules[name] === 'object') return __Oak_Modules[name];
	const module = __Oak_Modules[name] || __Oak_Modules[__Oak_Import_Aliases[name]];
	if (module) {
		__Oak_Modules[name] = {}; // break circular imports
		return __Oak_Modules[name] = module();
	} else {
		throw new Error(`Could not import Oak module "${name}" at runtime`);
	}
}

// language primitives
let __oak_empty_assgn_tgt;
function __oak_eq(a, b) {
	if (a === __Oak_Empty || b === __Oak_Empty) return true;

	// match either null or undefined to compare correctly against undefined ?s
	// appearing in places like optional arguments
	if (a == null && b == null) return true;
	if (a == null || b == null) return false;

	// match all other types that can be compared cheaply (without function
	// calls for type coercion or recursive descent)
	if (typeof a === 'boolean' || typeof a === 'number' ||
		typeof a === 'symbol' || typeof a === 'function') {
		return a === b;
	}

	// string equality check
	a = __as_oak_string(a);
	b = __as_oak_string(b);
	if (typeof a !== typeof b) return false;
	if (__is_oak_string(a) && __is_oak_string(b)) {
		return a.valueOf() === b.valueOf();
	}

	// deep equality check for composite values
	if (len(a) !== len(b)) return false;
	for (const key of keys(a)) {
		if (!__oak_eq(a[key], b[key])) return false;
	}
	return true;
}
function __oak_acc(tgt, prop) {
	return (__is_oak_string(tgt) ? __as_oak_string(tgt.valueOf()[prop]) : tgt[prop]) ?? null;
}
function __oak_obj_key(x) {
	return typeof x === 'symbol' ? Symbol.keyFor(x) : x;
}
function __oak_push(a, b) {
	a = __as_oak_string(a);
	a.push(b);
	return a;
}
function __oak_and(a, b) {
	if (typeof a === 'boolean' && typeof b === 'boolean') {
		return a && b;
	}
	if (__is_oak_string(a) && __is_oak_string(b)) {
		const max = Math.max(a.length, b.length);
		const get = (s, i) => s.valueOf().charCodeAt(i) || 0;

		let res = '';
		for (let i = 0; i < max; i ++) {
			res += String.fromCharCode(get(a, i) & get(b, i));
		}
		return res;
	}
	return a & b;
}
function __oak_or(a, b) {
	if (typeof a === 'boolean' && typeof b === 'boolean') {
		return a || b;
	}
	if (__is_oak_string(a) && __is_oak_string(b)) {
		const max = Math.max(a.length, b.length);
		const get = (s, i) => s.valueOf().charCodeAt(i) || 0;

		let res = '';
		for (let i = 0; i < max; i ++) {
			res += String.fromCharCode(get(a, i) | get(b, i));
		}
		return res;
	}
	return a | b;
}
function __oak_xor(a, b) {
	if (typeof a === 'boolean' && typeof b === 'boolean') {
		return (a && !b) || (!a && b);
	}
	if (__is_oak_string(a) && __is_oak_string(b)) {
		const max = Math.max(a.length, b.length);
		const get = (s, i) => s.valueOf().charCodeAt(i) || 0;

		let res = '';
		for (let i = 0; i < max; i ++) {
			res += String.fromCharCode(get(a, i) ^ get(b, i));
		}
		return res;
	}
	return a ^ b;
}
const __Oak_Empty = Symbol('__Oak_Empty');

// mutable string type
function __is_oak_string(x) {
	if (x == null) return false;
	return x.__mark_oak_string;
}
function __as_oak_string(x) {
	if (typeof x === 'string') return __Oak_String(x);
	return x;
}
const __Oak_String = s => {
	return {
		__mark_oak_string: true,
		assign(i, slice) {
			if (i === s.length) return s += slice;
			return s = s.substr(0, i) + slice + s.substr(i + slice.length);
		},
		push(slice) {
			s += slice;
		},
		toString() {
			return s;
		},
		valueOf() {
			return s;
		},
		get length() {
			return s.length;
		},
	}
}

// tail recursion trampoline helpers
function __oak_resolve_trampoline(fn, ...args) {
	let rv = fn(...args);
	while (rv && rv.__is_oak_trampoline) {
		rv = rv.fn(...rv.args);
	}
	return rv;
}
function __oak_trampoline(fn, ...args) {
	return {
		__is_oak_trampoline: true,
		fn: fn,
		args: args,
	}
}

// env (builtin) functions

// reflection and types
const __Is_Oak_Node = typeof process === 'object';
const __Oak_Int_RE = /^[+-]?\d+$/;
function int(x) {
	x = __as_oak_string(x);
	if (typeof x === 'number') {
		// JS rounds towards higher magnitude, Oak rounds towards higher value
		const rounded = Math.floor(x);
		const diff = x - rounded;
		if (x < 0 && diff === 0.5) return rounded + 1;
		return rounded;
	}
	if (__is_oak_string(x) && __Oak_Int_RE.test(x.valueOf())) {
		const i = Number(x.valueOf());
		if (isNaN(i)) return null;
		return i;
	}
	return null;
}
function float(x) {
	x = __as_oak_string(x);
	if (typeof x === 'number') return x;
	if (__is_oak_string(x)) {
		const f = parseFloat(x.valueOf());
		if (isNaN(f)) return null;
		return f;
	}
	return null;
}
function atom(x) {
	x = __as_oak_string(x);
	if (typeof x === 'symbol' && x !== __Oak_Empty) return x;
	if (__is_oak_string(x)) return Symbol.for(x.valueOf());
	return Symbol.for(string(x));
}
function string(x) {
	x = __as_oak_string(x);
	function display(x) {
		x = __as_oak_string(x);
		if (__is_oak_string(x)) {
			return '\'' + x.valueOf().replace('\\', '\\\\').replace('\'', '\\\'') + '\'';
		} else if (typeof x === 'symbol') {
			if (x === __Oak_Empty) return '_';
			return ':' + Symbol.keyFor(x);
		}
		return string(x);
	}
	if (x == null) {
		return '?';
	} else if (typeof x === 'number') {
		return x.toString();
	} else if (__is_oak_string(x)) {
		return x;
	} else if (typeof x === 'boolean') {
		return x.toString();
	} else if (typeof x === 'function') {
		return x.toString();
	} else if (typeof x === 'symbol') {
		if (x === __Oak_Empty) return '_';
		return Symbol.keyFor(x);
	} else if (Array.isArray(x)) {
		return '[' + x.map(display).join(', ') + ']';
	} else if (typeof x === 'object') {
		const entries = [];
		for (const key of keys(x).sort()) {
			entries.push(`${key}: ${display(x[key])}`);
		}
		return '{' + entries.join(', ') + '}';
	}
	throw new Error('string() called on unknown type ' + x.toString());
}
function codepoint(c) {
	c = __as_oak_string(c);
	return c.valueOf().charCodeAt(0);
}
function char(n) {
	return String.fromCharCode(n);
}
function type(x) {
	x = __as_oak_string(x);
	if (x == null) {
		return Symbol.for('null');
	} else if (typeof x === 'number') {
		// Many discrete APIs check for :int, so we consider all integer
		// numbers :int and fall back to :float. This is not an airtight
		// solution, but works well enough and the alternative (tagged number
		// values/types) have poor perf tradeoffs.
		if (Number.isInteger(x)) return Symbol.for('int');
		return Symbol.for('float');
	} else if (__is_oak_string(x)) {
		return Symbol.for('string');
	} else if (typeof x === 'boolean') {
		return Symbol.for('bool');
	} else if (typeof x === 'symbol') {
		if (x === __Oak_Empty) return Symbol.for('empty');
		return Symbol.for('atom');
	} else if (typeof x === 'function') {
		return Symbol.for('function');
	} else if (Array.isArray(x)) {
		return Symbol.for('list');
	} else if (typeof x === 'object') {
		return Symbol.for('object');
	}
	throw new Error('type() called on unknown type ' + x.toString());
}
function len(x) {
	if (typeof x === 'string' || __is_oak_string(x) || Array.isArray(x)) {
		return x.length;
	} else if (typeof x === 'object' && x !== null) {
		return Object.getOwnPropertyNames(x).length;
	}
	throw new Error('len() takes a string or composite value, but got ' + string(x));
}
function keys(x) {
	if (Array.isArray(x)) {
		const k = [];
		for (let i = 0; i < x.length; i ++) k.push(i);
		return k;
	} else if (typeof x === 'object' && x !== null) {
		return Object.getOwnPropertyNames(x).map(__as_oak_string);
	}
	throw new Error('keys() takes a composite value, but got ' + string(x).valueOf());
}

// OS interfaces
function args() {
	if (__Is_Oak_Node) return process.argv.map(__as_oak_string);
	return [window.location.href];
}
function env() {
	if (__Is_Oak_Node) {
		const e = Object.assign({}, process.env);
		for (const key in e) {
			e[key] = __as_oak_string(e[key]);
		}
		return e;
	}
	return {};
}
function time() {
	return Date.now() / 1000;
}
function nanotime() {
	return int(Date.now() * 1000000);
}
function rand() {
	return Math.random();
}
let randomBytes;
function srand(length) {
	if (__Is_Oak_Node) {
		// lazily import dependency
		if (!randomBytes) randomBytes = require('crypto').randomBytes;
		return randomBytes(length).toString('latin1');
	}

	const bytes = crypto.getRandomValues(new Uint8Array(length));
	return __as_oak_string(Array.from(bytes).map(b => String.fromCharCode(b)).join(''));
}
function wait(duration, cb) {
	setTimeout(cb, duration * 1000);
	return null;
}
function exit(code) {
	if (__Is_Oak_Node) process.exit(code);
	return null;
}
function exec() {
	throw new Error('exec() not implemented');
}

// I/O
function input() {
	throw new Error('input() not implemented');
}
function print(s) {
	s = __as_oak_string(s);
	if (__Is_Oak_Node) {
		process.stdout.write(string(s).toString());
	} else {
		console.log(string(s).toString());
	}
	return s.length;
}
function ls() {
	throw new Error('ls() not implemented');
}
function rm() {
	throw new Error('rm() not implemented');
}
function mkdir() {
	throw new Error('mkdir() not implemented');
}
function stat() {
	throw new Error('stat() not implemented');
}
function open() {
	throw new Error('open() not implemented');
}
function close() {
	throw new Error('close() not implemented');
}
function read() {
	throw new Error('read() not implemented');
}
function write() {
	throw new Error('write() not implemented');
}
function listen() {
	throw new Error('listen() not implemented');
}
function req() {
	throw new Error('req() not implemented');
}

// math
function sin(n) {
	return Math.sin(n);
}
function cos(n) {
	return Math.cos(n);
}
function tan(n) {
	return Math.tan(n);
}
function asin(n) {
	return Math.asin(n);
}
function acos(n) {
	return Math.acos(n);
}
function atan(n) {
	return Math.atan(n);
}
function pow(b, n) {
	return Math.pow(b, n);
}
function log(b, n) {
	return Math.log(n) / Math.log(b);
}

// runtime
function ___runtime_lib() {
	throw new Error('___runtime_lib() not implemented');
}
function ___runtime_lib__oak_qm() {
	throw new Error('___runtime_lib?() not implemented');
}
function ___runtime_gc() {
	throw new Error('___runtime_gc() not implemented');
}
function ___runtime_mem() {
	throw new Error('___runtime_mem() not implemented');
}
function ___runtime_proc() {
	throw new Error('___runtime_proc() not implemented');
}

// JavaScript interop
function call(target, fn, ...args) {
	return target[Symbol.keyFor(fn)](...args);
}
function __oak_js_new(Constructor, ...args) {
	return new Constructor(...args);
}
function __oak_js_try(fn) {
	try {
		return {
			type: Symbol.for('ok'),
			ok: fn(),
		}
	} catch (e) {
		return {
			type: Symbol.for('error'),
			error: e,
		}
	}
}
(__oak_modularize(__Oak_String('src/hlp.oak'),function _(){return ((asyncFn__oak_exclam,class__oak_exclam,export__oak_exclam,getExporter,getOakBuiltin,getOakBuiltinName,getOakName,getOakTarget,isJSMode__oak_qm,platform__oak_qm,s,std)=>((std=__oak_module_import(__Oak_String('std'))),isJSMode__oak_qm=function isJSMode__oak_qm(){return !__oak_eq(keys(__Oak_String('')),[])},getOakBuiltinName=function getOakBuiltinName(name=null){return __as_oak_string(__Oak_String('__oak_')+name)},getOakName=function getOakName(name=null){return getOakBuiltinName(__as_oak_string(__Oak_String('js_')+name))},getOakBuiltin=function getOakBuiltin(target=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?(__oak_acc(globalThis,__oak_obj_key((getOakBuiltinName(target))))):null)(isJSMode__oak_qm())},getOakTarget=function getOakTarget(target=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?(__oak_acc(globalThis,__oak_obj_key((getOakName(target))))):null)(isJSMode__oak_qm())},s=function s(pl=null){let res;return ((__oak_cond)=>__oak_eq(__oak_cond,(res=string(pl)))?(res.toString)():__oak_eq(__oak_cond,true)?(res.toString)():res)(isJSMode__oak_qm())},class__oak_exclam=function class__oak_exclam(name=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?(eval(s((fmt.format)(__Oak_String('class {{ 0 }} {}'),name)))):null)(isJSMode__oak_qm())},asyncFn__oak_exclam=function asyncFn__oak_exclam(...args){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?((eval(s(__Oak_String('async ()=>{}'))).constructor)(asyncFn)):null)(isJSMode__oak_qm())},platform__oak_qm=function platform__oak_qm(){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?((__oak_cond)=>__oak_eq(__oak_cond,!__oak_eq((globalThis.window??null),null))?Symbol.for('web'):__oak_eq(__oak_cond,__oak_eq(((__oak_js_try(function _(){return module})).error??null),null))?Symbol.for('node'):null)(true):null)(isJSMode__oak_qm())},getExporter=function getExporter(){return ((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('web'))?globalThis:__oak_eq(__oak_cond,Symbol.for('node'))?(module.exports??null):(({})))(platform__oak_qm())},export__oak_exclam=function export__oak_exclam(mod=null,webProp__oak_qm=null){let exp;return ((__oak_cond)=>__oak_eq(__oak_cond,(exp=getExporter()))?((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign((webProp__oak_qm),__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt[__oak_obj_key((webProp__oak_qm))]):(__oak_assgn_tgt[__oak_obj_key((webProp__oak_qm))])=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(exp),mod):__oak_eq(__oak_cond,Symbol.for('web'))?((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign((webProp__oak_qm),__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt[__oak_obj_key((webProp__oak_qm))]):(__oak_assgn_tgt[__oak_obj_key((webProp__oak_qm))])=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(exp),mod):__oak_eq(__oak_cond,Symbol.for('node'))?(Object.assign)(exp,mod):null)(platform__oak_qm())},({asyncFn__oak_exclam,class__oak_exclam,export__oak_exclam,getExporter,getOakBuiltin,getOakBuiltinName,getOakName,getOakTarget,isJSMode__oak_qm,platform__oak_qm,s,std})))()}),__oak_modularize(__Oak_String('src/main.oak'),function _(){return ((CowError,CowNode,Soak,cli,fmt,fromBin,hlp,static,std,str,toBin)=>((std=__oak_module_import(__Oak_String('std'))),(str=__oak_module_import(__Oak_String('str'))),(fmt=__oak_module_import(__Oak_String('fmt'))),(cli=__oak_module_import(__Oak_String('cli'))),(hlp=__oak_module_import(__Oak_String('src/hlp.oak'))),(static=__oak_module_import(__Oak_String('src/static.oak'))),({CowNode}=__oak_module_import(__Oak_String('src/node.oak'))),({CowError}=__oak_module_import(__Oak_String('src/util.oak'))),toBin=function toBin(number=null){return ((pl)=>((pl=__Oak_String('')),(std.loop)(function _(amm=null,breaker=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?((pl=__as_oak_string(string(((int(number)%2)))+pl)),(number=int((number/2)))):breaker((std.__oak_js_default)(pl,__Oak_String('0'))))((number>0))})))()},fromBin=function fromBin(encodedNumber=null){return (std.reduce)((str.split)(encodedNumber),0,function _(acc=null,item=null,count=null){return (acc=__as_oak_string((acc*2)+int(item)))})},Soak=function Soak(Env=null){let Ctx;let _encodeArr;let _getInst;let _jitFirstStep;let _jitStand;let _jitStep;let _parseInstruction;let add;let assg;let clr;let delVar;let dele;let drop;let dup;let ins;let jit;let loJit;let load;let newLoJit;let over;let pack;let peek;let pop;let read;let regGC;let rot;let rotcc;let rshuf;let setVar;let shift;let shuf;let stepToNode;let swap;return (Ctx=({Env:(std.__oak_js_default)(Env,(static.Env??null)),read:read=function read(k=null){return __oak_acc(Env,__oak_obj_key((k)))},assg:assg=function assg(k=null,v=null){return ((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign((k),__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt[__oak_obj_key((k))]):(__oak_assgn_tgt[__oak_obj_key((k))])=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(Env),v)},dele:dele=function dele(k=null){return assg(k,null)},Stack:[],add:add=function add(v=null){return __oak_push((Ctx.Stack??null),v)},ins:ins=function ins(v=null){return (std.append)([v],(Ctx.Stack??null))},peek:peek=function peek(){return __oak_acc((Ctx.Stack??null),__oak_obj_key(((len((Ctx.Stack??null))-1))))},pop:pop=function pop(){return ((lastItem)=>((lastItem=__oak_acc((Ctx.Stack??null),__oak_obj_key(((len((Ctx.Stack??null))-1))))),((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign(Stack,__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt.Stack):(__oak_assgn_tgt.Stack)=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(Ctx),(std.take)((Ctx.Stack??null),(len((Ctx.Stack??null))-1))),lastItem))()},shuf:shuf=function shuf(){return (ins(pop()))},rshuf:rshuf=function rshuf(){return (add(shift()))},shift:shift=function shift(){return ((firstItem)=>((firstItem=__oak_acc((Ctx.Stack??null),0)),((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign(Stack,__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt.Stack):(__oak_assgn_tgt.Stack)=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(Ctx),(std.slice)((Ctx.Stack??null),1)),firstItem))()},drop:drop=function drop(){return (((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign(Stack,__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt.Stack):(__oak_assgn_tgt.Stack)=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(Ctx),(std.take)((Ctx.Stack??null),(len((Ctx.Stack??null))-1))))},dup:dup=function dup(){return __oak_push((Ctx.Stack??null),peek())},swap:swap=function swap(){return ((secondItem,topItem)=>((topItem=pop()),(secondItem=pop()),add(topItem),add(secondItem)))()},over:over=function over(){return ((secondItem)=>((secondItem=__oak_acc((Ctx.Stack??null),__oak_obj_key(((len((Ctx.Stack??null))-2))))),__oak_push((Ctx.Stack??null),secondItem)))()},rot:rot=function rot(){return ((a,b,c)=>((a=pop()),(b=pop()),(c=pop()),add(a),add(c),add(b)))()},rotcc:rotcc=function rotcc(){return ((a,b,c)=>((a=pop()),(b=pop()),(c=pop()),add(b),add(a),add(c)))()},Steps:[],clr:clr=function clr(){return ((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign(Steps,__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt.Steps):(__oak_assgn_tgt.Steps)=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(Ctx),[])},stepToNode:stepToNode=function stepToNode(step=null){return CowNode(...step)},load:load=function load(CowSteps=null){return ((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign(Steps,__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt.Steps):(__oak_assgn_tgt.Steps)=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(Ctx),(std.map)(CowSteps,stepToNode))},pack:pack=function pack(){return (std.map)((Ctx.Steps??null),function _(e=null){return (e.pack)()})},_getInst:_getInst=function _getInst(i=null){return __oak_acc((Ctx.Env??null),__oak_obj_key(((str.lower)(i))))},_parseInstruction:_parseInstruction=function _parseInstruction(item=null){return ((args,items,operation)=>((items=(str.split)((item.code??null),__Oak_String(' '))),(operation=_getInst(__oak_acc(items,0))),(args=(std.slice)(items,1)),((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('function'))?operation(Ctx,({args,items,item})):__oak_eq(__oak_cond,Symbol.for('null'))?(CowError(__Oak_String('ParseError'),__Oak_String('Invalid instruction!'),__oak_acc(items,0),(Ctx.Stack??null)).__oak_js_throw)():null)(type(operation))))()},Registry:({}),setVar:setVar=function setVar(register=null,value=null){return (((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign((register),__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt[__oak_obj_key((register))]):(__oak_assgn_tgt[__oak_obj_key((register))])=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string((Ctx.Registry??null)),value))},delVar:delVar=function delVar(register=null,value=null){return setVar(register,null)},regGC:regGC=function regGC(){return ((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign(Registry,__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt.Registry):(__oak_assgn_tgt.Registry)=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(Ctx),({}))},_jitStand:_jitStand=function _jitStand(item=null){return ((next)=>((next=(item.next)((Ctx.Steps??null))),((__oak_cond)=>__oak_eq(__oak_cond,true)?_jitStep(next):null)(!__oak_eq(next,null))))()},_jitStep:_jitStep=function _jitStep(item=null){return (_parseInstruction(item),_jitStand(item))},_jitFirstStep:_jitFirstStep=function _jitFirstStep(){return ((item)=>((item=(std.find)((Ctx.Steps??null),function _(step=null){return __oak_eq((step.thisReg??null),0)})),((__oak_cond)=>__oak_eq(__oak_cond,true)?(CowError(__Oak_String('JIT'),__Oak_String('Failed to find first step!'),pack(),(Ctx.Stack??null)).__oak_js_throw)():null)(__oak_eq(item,-1)),__oak_acc((Ctx.Steps??null),__oak_obj_key((item)))))()},jit:jit=function jit(){return (_jitStep(_jitFirstStep()),__oak_acc((Ctx.Stack??null),__oak_obj_key(((len((Ctx.Stack??null))-1)))))},loJit:loJit=function loJit(CowSteps=null){return (load(CowSteps),jit())},newLoJit:newLoJit=function newLoJit(CowSteps=null){return (Soak().loJit)(CowSteps)},_encodeArr:_encodeArr=function _encodeArr(arr=null){return (std.map)(arr,function _(v=null){return (str.padStart)((std.toHex)(codepoint(v)),2,__Oak_String('0'))})},compile:function _(){return ((result)=>((result=__Oak_String('')),(std.map)((std.values)((Ctx.Steps??null)),function _(step=null){return __oak_push(result,(fmt.format)(__Oak_String('{{0}} {{1}} {{2}}\n'),(step.thisReg??null),(step.nextReg??null),(step.code??null)))}),(str.join)((std.map)((str.split)(result,__Oak_String('')),_encodeArr),__Oak_String(''))))()}}))},((__oak_cond)=>__oak_eq(__oak_cond,true)?((Cli,CliFull,CliHelp,CliInputSemi,CliMainHelp,CliSemi)=>((Cli=(cli.parse)()),CliFull=function CliFull(){return ((args,codes,recurse)=>((codes=[]),(args=(std.clone)((Cli.args??null))),recurse=function recurse(){return ((__oak_trampolined_recurse)=>((__oak_trampolined_recurse=function _(){return (__oak_push(codes,[__oak_acc(args,2),int(__oak_acc(args,0)),int(__oak_acc(args,1))]),(args=(std.takeLast)(args,(len(args)-3))),((__oak_cond)=>__oak_eq(__oak_cond,true)?__oak_trampoline(__oak_trampolined_recurse):null)((len(args)>=3)))}),__oak_resolve_trampoline(__oak_trampolined_recurse)))()},recurse(),(std.println)((Soak().newLoJit)(codes))))()},CliSemi=function CliSemi(){return ((args,codes,recurse,x,z)=>((codes=[]),(args=(std.clone)((Cli.args??null))),(x=0),(z=0),recurse=function recurse(){return ((__oak_trampolined_recurse)=>((__oak_trampolined_recurse=function _(){return (__oak_push(codes,[__oak_acc(args,0),(x=z),(z=__as_oak_string(z+1))]),(args=(std.takeLast)(args,(len(args)-1))),((__oak_cond)=>__oak_eq(__oak_cond,true)?__oak_trampoline(__oak_trampolined_recurse):null)((len(args)>=1)))}),__oak_resolve_trampoline(__oak_trampolined_recurse)))()},recurse(),(std.println)((Soak().newLoJit)(codes))))()},CliInputSemi=function CliInputSemi(){return ((ctx)=>((ctx=Soak()),(std.loop)(function _(i=null,__oak_js_break=null){return ((evt)=>((std.print)(__Oak_String('(esc to leave) > ')),(evt=input()),((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String('esc'))?__oak_js_break(0):(std.println)((ctx._parseInstruction)((ctx.stepToNode)([(evt.data??null),0,1]))))((str.lower)((evt.data??null)))))()}),(std.println)(__Oak_String('Ended Repl session.'))))()},CliMainHelp=function CliMainHelp(){return (std.println)(__Oak_String('\nSoak CLI    ......\n            ..1 5.\nUGPVM       ..2 0.\nv0          ......\n\nCommands:\n\n  help, ? <thing?>\n    Get help about something\n\n  srepl\n    A REPL\n\n  full <t n code>...\n    Single Line   Full/Triplet set mode\n  semi <code>...\n    Single Track mode\n'))},CliHelp=function CliHelp(){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?(std.println)(__Oak_String('\n'),((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String('help'))?__Oak_String('Haha, verrrry funny.'):__oak_eq(__oak_cond,__Oak_String('?'))?__Oak_String('The mini form of help'):__oak_eq(__oak_cond,__Oak_String('srepl'))?__Oak_String('A Semi Mode Repl testing and fun'):__oak_eq(__oak_cond,__Oak_String('full'))?__Oak_String('Interpreter of instructions in any order'):__oak_eq(__oak_cond,__Oak_String('semi'))?__Oak_String('Interpreter of instructions'):null)(__oak_acc((Cli.args??null),0))):CliMainHelp())((len((Cli.args??null))>0))},((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String('help'))?CliHelp():__oak_eq(__oak_cond,__Oak_String('?'))?CliHelp():__oak_eq(__oak_cond,__Oak_String('srepl'))?CliInputSemi():__oak_eq(__oak_cond,__Oak_String('full'))?CliFull():__oak_eq(__oak_cond,__Oak_String('semi'))?CliSemi():null)((Cli.verb??null))))():null)((__oak_left=>__oak_left===true?true:__oak_or(__oak_left,(__oak_eq(__oak_acc(args(),0),__Oak_String('oak')))))(((__oak_left=>__oak_left===false?false:__oak_and(__oak_left,__Is_Oak_Node))((hlp.isJSMode__oak_qm)())))),(hlp.export__oak_exclam)(({Soak}),__Oak_String('Soak')),({CowError,CowNode,Soak,cli,fmt,fromBin,hlp,static,std,str,toBin})))()}),__oak_modularize(__Oak_String('src/node.oak'),function _(){return ((CowNode,std)=>((std=__oak_module_import(__Oak_String('std'))),CowNode=function CowNode(code=null,thisReg=null,nextReg=null){let Ctx;let _Last;let _Next;let _findStep;let _hasStep;let _updateStep;let cache;let hasLast;let hasNext;let last;let next;let pack;let uncache;let uncacheLast;let uncacheNext;return (Ctx=({code:(std.__oak_js_default)(code,__Oak_String('')),thisReg:(std.__oak_js_default)(thisReg,0),nextReg:(std.__oak_js_default)(nextReg,1),pack:pack=function pack(){return [(Ctx.code??null),(Ctx.thisReg??null),(Ctx.nextReg??null)]},_Next:_Next=function _Next(step=null){return __oak_eq((step.thisReg??null),(Ctx.nextReg??null))},_Last:_Last=function _Last(step=null){return __oak_eq((step.nextReg??null),(Ctx.thisReg??null))},_hasStep:_hasStep=function _hasStep(steps=null,mutator=null){return (std.find)(steps,mutator)},_updateStep:_updateStep=function _updateStep(steps=null,key=null,mutator=null){return ((__oak_cond)=>__oak_eq(__oak_cond,null)?((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign((key),__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt[__oak_obj_key((key))]):(__oak_assgn_tgt[__oak_obj_key((key))])=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(Ctx),__oak_acc(steps,__oak_obj_key((_hasStep(steps,mutator))))):__oak_acc(Ctx,__oak_obj_key((key))))(__oak_acc(Ctx,__oak_obj_key((key))))},_findStep:_findStep=function _findStep(steps=null,key=null,mutator=null){return (_updateStep(steps,key,mutator),__oak_acc(Ctx,__oak_obj_key((key))))},_nextStep__oak_qm:null,_lastStep__oak_qm:null,hasNext:hasNext=function hasNext(steps=null){return _hasStep(steps,_Next)},hasLast:hasLast=function hasLast(steps=null){return _hasStep(steps,_Last)},next:next=function next(steps=null){return _findStep(steps,__Oak_String('_nextStep?'),_Next)},last:last=function last(steps=null){return _findStep(steps,__Oak_String('_lastStep?'),_Last)},cache:cache=function cache(steps=null){return [next(),last()]},uncacheNext:uncacheNext=function uncacheNext(){return ((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign(_nextStep__oak_qm,__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt._nextStep__oak_qm):(__oak_assgn_tgt._nextStep__oak_qm)=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(Ctx),null)},uncacheLast:uncacheLast=function uncacheLast(){return ((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign(_lastStep__oak_qm,__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt._lastStep__oak_qm):(__oak_assgn_tgt._lastStep__oak_qm)=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(Ctx),null)},uncache:uncache=function uncache(){return (uncacheNext(),uncacheLast())}}))},({CowNode,std})))()}),__oak_modularize(__Oak_String('src/static.oak'),function _(){return ((Abs,Adding,Bitwise,BoolOps,CastOps,ControlFlow,Div,Env,Goto,Hex,Importing,Jump,ListOps,Math,MemCache,MemOps,Memoization,Mod,Mult,ObjOps,Pow,Prims,ReturnAddr,Spawning,Sqrt,Stack,StringOps,Subtr,TransferOps,Trig,_bool,_get_or_compute,_hkpow,_hksqrt,_intOrFloat,_ioarg,addRetAddr,addReturner,bools,chars,exp,hasRetAddr,hkcub,hkmlt,hksqr,json,jump,leftShift,lower,math,numbers,prim,qd_b4,qdiv,rightShift,setRetAddr,std,str,symbl,upper)=>((std=__oak_module_import(__Oak_String('std'))),(str=__oak_module_import(__Oak_String('str'))),(json=__oak_module_import(__Oak_String('json'))),(math=__oak_module_import(__Oak_String('math'))),({exp,qdiv,qd_b4,hkmlt,p2tableLook:hksqr=null,p3tableLook:hkcub=null}=__oak_module_import(__Oak_String('src/tables/p2.oak'))),({MemCache}=__oak_module_import(__Oak_String('src/structures/MemCache.oak'))),(lower=__Oak_String('abcdefghijklmnopqrstuvwxyz')),(upper=__Oak_String('ABCDEFGHIJKLMNOPQRSTUVWXYZ')),(numbers=[0,1,2,3,4,5,6,7,8,9]),(symbl=__Oak_String('#$%&*+-./:<=>?@^_`{|}~')),(bools=[false,true]),(chars=__as_oak_string(__as_oak_string(__as_oak_string(lower+upper)+((str.join)((std.map)(numbers,string),__Oak_String(''))))+symbl)),prim=function prim(ctx=null,obj=null){return ((ctx.Soak??null).add)(__oak_acc(obj,__oak_obj_key((int(__oak_acc((ctx.args??null),0))))))},leftShift=function leftShift(value=null,positions=null){return (value*pow(2,positions))},rightShift=function rightShift(value=null,positions=null){return (value/pow(2,positions))},(Spawning=({exec:function _(s=null,c=null){return exec(_ioarg(s,c,0,string),(s.Stack??null))}})),(ReturnAddr=({addr:-1,[__Oak_String('?>')]:addRetAddr=function addRetAddr(s=null,c=null){return (s.add)((ReturnAddr.addr??null))},[__Oak_String('?!')]:hasRetAddr=function hasRetAddr(s=null,c=null){return _bool((math.sign)((ReturnAddr.addr??null)))},[__Oak_String('?:')]:setRetAddr=function setRetAddr(s=null,c=null){return ((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign(addr,__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt.addr):(__oak_assgn_tgt.addr)=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(ReturnAddr),__oak_acc((c.args??null),0))},[__Oak_String('(?)')]:addReturner=function addReturner(s=null,c=null){return ((cAddr)=>((cAddr=(ReturnAddr.addr??null)),(s.add)(function _(){return ((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign(nextReg,__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt.nextReg):(__oak_assgn_tgt.nextReg)=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string((c.item??null)),cAddr)})))()}})),(Prims=({[__Oak_String('t')]:function _(s=null,c=null){return (s.add)(true)},[__Oak_String('f')]:function _(s=null,c=null){return (s.add)(false)},[__Oak_String('#')]:function _(s=null,c=null){return (s.add)(int(__oak_acc((c.args??null),0)))},[__Oak_String('$')]:function _(s=null,c=null){return (s.add)(__oak_acc((c.args??null),0))},[__Oak_String('()')]:function _(s=null,c=null){return (s.add)(function _(){return null})},[__Oak_String('@')]:Goto=function Goto(s=null,c=null){return ((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign(nextReg,__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt.nextReg):(__oak_assgn_tgt.nextReg)=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string((c.item??null)),int(__oak_acc((c.args??null),0)))},[__Oak_String('(^)')]:function _(s=null,c=null){return (s.add)(function _(){return Goto(s,c)})},call:function _(s=null,c=null){return ((code,inst)=>((inst=(s.pop)()),(code=[]),(std.map)((c.args??null),function _(arg=null){return ((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String('*'))?(s.pop)():__oak_eq(__oak_cond,__Oak_String('^'))?(s.peek)():__oak_eq(__oak_cond,__Oak_String('s'))?s:__oak_eq(__oak_cond,__Oak_String('c'))?c:arg)(arg)}),(s.add)(inst(...code))))()},[__Oak_String('c-b')]:function _(s=null,c=null){return prim(c,bools)},[__Oak_String('c-lw')]:function _(s=null,c=null){return prim(c,lower)},[__Oak_String('c-up')]:function _(s=null,c=null){return prim(c,upper)},[__Oak_String('c-al')]:function _(s=null,c=null){return (s.add)(len(lower))},[__Oak_String('c-nm')]:function _(s=null,c=null){return prim(c,numbers)},[__Oak_String('c-nl')]:function _(s=null,c=null){return (s.add)(len(numbers))},[__Oak_String('c-sy')]:function _(s=null,c=null){return prim(c,symbl)},[__Oak_String('c-sl')]:function _(s=null,c=null){return (s.add)(len(symbl))},[__Oak_String('c-cs')]:function _(s=null,c=null){return prim(c,chars)},[__Oak_String('c-cl')]:function _(s=null,c=null){return (s.add)(len(chars))},_ioarg:_ioarg=function _ioarg(s=null,c=null,i=null,h=null,p=null){let val;return ((__oak_cond)=>__oak_eq(__oak_cond,null)?__oak_acc(s,__oak_obj_key(((std.__oak_js_default)(p,__Oak_String('pop')))))():(std.__oak_js_default)(h,string)(val))((val=__oak_acc(((c.args??null)),__oak_obj_key((i)))))}})),(Stack=({drop:function _(s=null,c=null){return (s.drop)()},dup:function _(s=null,c=null){return (s.dup)()},swap:function _(s=null,c=null){return (s.swap)()},over:function _(s=null,c=null){return (s.over)()},rot:function _(s=null,c=null){return (s.rot)()},rotcc:function _(s=null,c=null){return (s.rotcc)()},shuf:function _(s=null,c=null){return (s.shuf)()},rshuf:function _(s=null,c=null){return (s.rshuf)()}})),(Adding=({qadd:function _(s=null,c=null){return (s.add)(__as_oak_string((s.pop)()+(s.pop)()))},_intOrFloat:_intOrFloat=function _intOrFloat(v=null){return ((__oak_cond)=>__oak_eq(__oak_cond,null)?float(v):v)((v=int(v)))},add:function _(s=null,c=null){return (s.add)(__as_oak_string(_ioarg(s,c,0,_intOrFloat)+_ioarg(s,c,1,_intOrFloat)))},qinc:function _(s=null,c=null){return (s.add)(__as_oak_string((s.pop)()+1))},inc:function _(s=null,c=null){return (s.add)(__as_oak_string(_ioarg(s,c,0,_intOrFloat)+1))}})),(Subtr=({qsub:function _(s=null,c=null){return (s.add)(((s.pop)()-(s.pop)()))},sub:function _(s=null,c=null){return (s.add)((_ioarg(s,c,0,_intOrFloat)-_ioarg(s,c,1,_intOrFloat)))},dec:function _(s=null,c=null){return ((val)=>((val=(_ioarg(s,c,0,_intOrFloat)-1)),(s.add)(val)))()}})),(Mult=({qmlt:function _(s=null,c=null){return (s.add)(((s.pop)()*(s.pop)()))},mlt:function _(s=null,c=null){return (s.add)((_ioarg(s,c,0,_intOrFloat)*_ioarg(s,c,1,_intOrFloat)))},_hksqr:hksqr,qhksqr:function _(s=null,c=null){return (s.add)(hksqr((s.pop)()))},hksqr:function _(s=null,c=null){return (s.add)(hksqr(_ioarg(s,c,0,_intOrFloat)))},_hkcub:hkcub,qhkcub:function _(s=null,c=null){return (s.add)(hksqr((s.pop)()))},hkcub:function _(s=null,c=null){return (s.add)(hkcub(_ioarg(s,c,0,_intOrFloat)))},_qd_b4:qd_b4,_hkmlt:hkmlt,qhkmlt:function _(s=null,c=null){return (s.add)(hkmlt((s.pop)(),(s.pop)()))},hkmlt:function _(s=null,c=null){return (s.add)(hkmlt(_ioarg(s,c,0,_intOrFloat),_ioarg(s,c,1,_intOrFloat)))}})),(Div=({div:function _(s=null,c=null){return (s.add)((_ioarg(s,c,0,_intOrFloat)/_ioarg(s,c,1,_intOrFloat)))},_exp:exp,exp:function _(s=null,c=null){return (s.add)(exp((s.pop)()))},_qdiv:qdiv,hkdiv:function _(s=null,c=null){return (s.add)(qdiv(_ioarg(s,c,0,_intOrFloat),_ioarg(s,c,1,_intOrFloat)))},qhkdiv:function _(s=null,c=null){return (s.add)(qdiv((s.pop)(),(s.pop)()))}})),(Pow=({pow:function _(s=null,c=null){return (s.add)(pow(_ioarg(s,c,0,_intOrFloat),_ioarg(s,c,1,_intOrFloat)))},qpow:function _(s=null,c=null){return (s.add)(pow((s.pop)(),(s.pop)()))},_hkpow:_hkpow=function _hkpow(a=null,b=null){return ((__oak_cond)=>__oak_eq(__oak_cond,0)?1:hkmlt(a,_hkpow(a,(b-1))))(b)},qhkpow:function _(s=null,c=null){return (s.add)(_hkpow((s.pop)(),(s.pop)()))},hkpow:function _(s=null,c=null){return (s.add)(_hkpow(_ioarg(s,c,0,_intOrFloat),_ioarg(s,c,1,_intOrFloat)))}})),(Mod=({qmod:function _(s=null,c=null){return (s.add)(((s.pop)()%(s.pop)()))},mod:function _(s=null,c=null){return (s.add)((_ioarg(s,c,0)%_ioarg(s,c,1)))}})),(Trig=({sin:function _(s=null,c=null){return (s.add)(sin(_ioarg(s,c,0,_intOrFloat)))},qsin:function _(s=null,c=null){return (s.add)(sin((s.pop)()))},cos:function _(s=null,c=null){return (s.add)(cos(_ioarg(s,c,0,_intOrFloat)))},qcos:function _(s=null,c=null){return (s.add)(cos((s.pop)()))},tan:function _(s=null,c=null){return (s.add)(tan(_ioarg(s,c,0,_intOrFloat)))},qtan:function _(s=null,c=null){return (s.add)(tan((s.pop)()))}})),(Sqrt=({qsqrt:function _(s=null,c=null){return (s.add)((math.sqrt)((s.pop)()))},sqrt:function _(s=null,c=null){return (s.add)((math.sqrt)(_ioarg(s,c,0,_intOrFloat)))},_hksqrt:_hksqrt=function _hksqrt(n=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?_hkpow(n,0.5):null)((n>=0))},hksqrt:function _(s=null,c=null){return (s.add)(_hksqrt(_ioarg(s,c,0,_intOrFloat)))},qhksqrt:function _(s=null,c=null){return (s.add)(_hksqrt((s.pop)()))}})),(Abs=({abs:function _(s=null,c=null){return (s.add)((math.abs)(_ioarg(s,c,0,_intOrFloat)))},qabs:function _(s=null,c=null){return (s.add)((math.abs)((s.pop)()))},hkabs:function _(s=null,c=null){return (s.add)(_hksqrt(_hkpow(_ioarg(s,c,0,_intOrFloat),2)))},qhkabs:function _(s=null,c=null){return (s.add)(_hksqrt(_hkpow((s.pop)(),2)))}})),(Bitwise=({band:function _(s=null,c=null){return (s.add)((__oak_left=>__oak_left===false?false:__oak_and(__oak_left,_ioarg(s,c,1,_intOrFloat)))(_ioarg(s,c,0,_intOrFloat)))},qband:function _(s=null,c=null){return (s.add)((__oak_left=>__oak_left===false?false:__oak_and(__oak_left,(s.pop)()))((s.pop)()))},bor:function _(s=null,c=null){return (s.add)((__oak_left=>__oak_left===true?true:__oak_or(__oak_left,_ioarg(s,c,1,_intOrFloat)))(_ioarg(s,c,0,_intOrFloat)))},qbor:function _(s=null,c=null){return (s.add)((__oak_left=>__oak_left===true?true:__oak_or(__oak_left,(s.pop)()))((s.pop)()))},bxor:function _(s=null,c=null){return (s.add)(__oak_xor(_ioarg(s,c,0,_intOrFloat),_ioarg(s,c,1,_intOrFloat)))},qbxor:function _(s=null,c=null){return (s.add)(__oak_xor((s.pop)(),(s.pop)()))},qlshift:function _(s=null,c=null){return (s.add)(leftShift((s.pop)(),(s.pop)()))},lshift:function _(s=null,c=null){return (s.add)(leftShift(_ioarg(s,c,0,_intOrFloat),_ioarg(s,c,1,_intOrFloat)))},qrshift:function _(s=null,c=null){return (s.add)(rightShift((s.pop)(),(s.pop)()))},rshift:function _(s=null,c=null){return (s.add)(rightShift(_ioarg(s,c,0,_intOrFloat),_ioarg(s,c,1,_intOrFloat)))},hklshift:function _(s=null,c=null){return (s.add)(hkmlt(_ioarg(s,c,0,_intOrFloat),_hkpow(2,_ioarg(s,c,1,_intOrFloat))))},qhklshift:function _(s=null,c=null){return (s.add)(hkmlt((s.pop)(),_hkpow(2,(s.pop)())))},hkrshift:function _(s=null,c=null){return (s.add)(hkdiv(_ioarg(s,c,0,_intOrFloat),_hkpow(2,_ioarg(s,c,1,_intOrFloat))))},qhkrshift:function _(s=null,c=null){return (s.add)(hkdiv((s.pop)(),_hkpow(2,(s.pop)())))}})),(Hex=({fromhex:function _(s=null,c=null){return (s.add)((std.fromHex)(_ioarg(s,c,0,string)))},tohex:function _(s=null,c=null){return (s.add)((std.toHex)(_ioarg(s,c,0,int)))}})),(Math=(std.merge)(Adding,Subtr,Mult,Div,Pow,Mod,Trig,Sqrt,Abs,Bitwise,Hex)),(BoolOps=({_bool:_bool=function _bool(a=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?true:__oak_eq(__oak_cond,1)?true:__oak_eq(__oak_cond,false)?false:__oak_eq(__oak_cond,0)?false:null)(a)},eq:function _(s=null,c=null){return (s.add)(__oak_eq(_ioarg(s,c,0,_bool),_ioarg(s,c,1,_bool)))},qeq:function _(s=null,c=null){return (s.add)(__oak_eq((s.pop)(),(s.pop)()))},neq:function _(s=null,c=null){return (s.add)(!__oak_eq(_ioarg(s,c,0,_bool),_ioarg(s,c,1,_bool)))},qneq:function _(s=null,c=null){return (s.add)(!__oak_eq((s.pop)(),(s.pop)()))},not:function _(s=null,c=null){return (s.add)(!_ioarg(s,c,0,_bool))},qnot:function _(s=null,c=null){return (s.add)(!(s.pop)())},and:function _(s=null,c=null){return (s.add)((__oak_left=>__oak_left===false?false:__oak_and(__oak_left,_ioarg(s,c,1,_bool)))(_ioarg(s,c,0,_bool)))},qand:function _(s=null,c=null){return (s.add)((__oak_left=>__oak_left===false?false:__oak_and(__oak_left,(s.pop)()))((s.pop)()))},ora:function _(s=null,c=null){return (s.add)((__oak_left=>__oak_left===true?true:__oak_or(__oak_left,_ioarg(s,c,1,_bool)))(_ioarg(s,c,0,_bool)))},qora:function _(s=null,c=null){return (s.add)((__oak_left=>__oak_left===true?true:__oak_or(__oak_left,(s.pop)()))((s.pop)()))},eor:function _(s=null,c=null){return ((lhs,rhs)=>((lhs=_ioarg(s,c,0,_bool)),(rhs=_ioarg(s,c,0,_bool)),(s.add)((__oak_left=>__oak_left===true?true:__oak_or(__oak_left,((__oak_left=>__oak_left===false?false:__oak_and(__oak_left,rhs))(!lhs))))(((__oak_left=>__oak_left===false?false:__oak_and(__oak_left,!rhs))(lhs))))))()},qeor:function _(s=null,c=null){return ((lhs,rhs)=>((lhs=_bool((s.pop)())),(rhs=_bool((s.pop)())),(s.add)((__oak_left=>__oak_left===true?true:__oak_or(__oak_left,((__oak_left=>__oak_left===false?false:__oak_and(__oak_left,rhs))(!lhs))))(((__oak_left=>__oak_left===false?false:__oak_and(__oak_left,!rhs))(lhs))))))()}})),(MemOps=({MemCache:MemCache(),mc_addctx:function _(s=null,c=null){return ((newCtx)=>((newCtx=_ioarg(s,c,0,string)),((MemOps.MemCache??null).addCtx)(newCtx)))()},mc_hasctx:function _(s=null,c=null){return ((ctx)=>((ctx=_ioarg(s,c,0,string)),(s.add)(!__oak_eq(((MemOps.MemCache??null).hasCtxAt)(ctx),-1))))()},mc_getctx:function _(s=null,c=null){return ((ctx)=>((ctx=_ioarg(s,c,0,string)),(s.add)(((MemOps.MemCache??null).getCtx)(ctx))))()},mc_newctx:function _(s=null,c=null){return ((ctx,newData)=>((ctx=_ioarg(s,c,0,string)),(newData=(s.pop)()),((MemOps.MemCache??null).updateCtx)(ctx,newData)))()},mc_delctx:function _(s=null,c=null){return ((ctx)=>((ctx=_ioarg(s,c,0,string)),((MemOps.MemCache??null).delCtx)(ctx)))()},mc_gc:function _(s=null,c=null){return (((MemOps.MemCache??null).gc)())},mc_setkey:function _(s=null,c=null){return ((ctx,key,value)=>((ctx=_ioarg(s,c,0,string)),(key=_ioarg(s,c,1,string)),(value=(s.pop)()),((MemOps.MemCache??null).setKey)(ctx,key,value)))()},mc_getkey:function _(s=null,c=null){return ((ctx,key)=>((ctx=_ioarg(s,c,0,string)),(key=_ioarg(s,c,1,string)),(s.add)(((MemOps.MemCache??null).getKey)(ctx,key))))()},mc_haskey:function _(s=null,c=null){return ((ctx,key)=>((ctx=_ioarg(s,c,0,string)),(key=_ioarg(s,c,1,string)),(s.add)(!__oak_eq(((MemOps.MemCache??null).hasKey)(ctx,key),__oak_js_null))))()},pick:function _(s=null,c=null){return ((n)=>((n=_ioarg(s,c,0,int)),(s.add)(__oak_acc((s.Stack??null),__oak_obj_key((((len((s.Stack??null))-1)-n)))))))()},store:function _(s=null,c=null){return ((key,value)=>((key=_ioarg(s,c,0)),(value=(s.pop)()),((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign((key),__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt[__oak_obj_key((key))]):(__oak_assgn_tgt[__oak_obj_key((key))])=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string((s.Registry??null)),value)))()},load:function _(s=null,c=null){return ((key)=>((key=_ioarg(s,c,0)),(s.add)(__oak_acc((s.Registry??null),__oak_obj_key((key))))))()},regcl:function _(s=null,c=null){return (s.regGC)()}})),(TransferOps=({tax:function _(s=null,c=null){return ((aRegister,xRegister)=>((xRegister=(s.pop)()),(aRegister=xRegister),(s.add)(aRegister)))()},tay:function _(s=null,c=null){return ((aRegister,yRegister)=>((yRegister=(s.pop)()),(aRegister=yRegister),(s.add)(aRegister)))()},txa:function _(s=null,c=null){return ((aRegister,xRegister)=>((aRegister=(s.pop)()),(xRegister=aRegister),(s.add)(xRegister)))()},tya:function _(s=null,c=null){return ((aRegister,yRegister)=>((aRegister=(s.pop)()),(yRegister=aRegister),(s.add)(yRegister)))()},tsx:function _(s=null,c=null){return ((stackPointer,xRegister)=>((xRegister=(s.pop)()),(stackPointer=xRegister),(s.add)(stackPointer)))()},txs:function _(s=null,c=null){return ((stackPointer,xRegister)=>((stackPointer=(s.pop)()),(xRegister=stackPointer),(s.add)(xRegister)))()}})),(CastOps=({toint:function _(s=null,c=null){return (s.add)(int(_ioarg(s,c,0)))},tostr:function _(s=null,c=null){return (s.add)(string(_ioarg(s,c,0)))},tobool:function _(s=null,c=null){return (s.add)(bool(_ioarg(s,c,0)))},tofloat:function _(s=null,c=null){return (s.add)(float(_ioarg(s,c,0)))}})),(StringOps=({concat:function _(s=null,c=null){return (s.add)(__oak_push(_ioarg(s,c,0,string),_ioarg(s,c,1,string)))},substr:function _(s=null,c=null){return ((end,start,str)=>((str=_ioarg(s,c,0,string)),(start=_ioarg(s,c,1,int)),(end=_ioarg(s,c,2,int)),(s.add)((str.substring)(start,end))))()},length:function _(s=null,c=null){return (s.add)(len(_ioarg(s,c,0,string)))}})),(ListOps=({map:function _(s=null,c=null){return ((func,list)=>((list=_ioarg(s,c,0,(json.parse??null))),(func=(s.pop)()),(s.add)((std.map)(list,func))))()},filter:function _(s=null,c=null){return ((func,list)=>((list=_ioarg(s,c,0,(json.parse??null))),(func=(s.pop)()),(s.add)((std.filter)(list,func))))()},reduce:function _(s=null,c=null){return ((func,initial,list)=>((list=_ioarg(s,c,0,(json.parse??null))),(func=(s.pop)()),(initial=_ioarg(s,c,1)),(s.add)((std.reduce)(list,func,initial))))()},length:function _(s=null,c=null){return ((list)=>((list=_ioarg(s,c,0,(json.parse??null))),(s.add)(len(list))))()},append:function _(s=null,c=null){return ((elem,list)=>((list=_ioarg(s,c,0,(json.parse??null))),(elem=(s.pop)()),__oak_push(list,elem),(s.add)(list)))()},indexOf:function _(s=null,c=null){return ((elem,index,list)=>((list=_ioarg(s,c,0,(json.parse??null))),(elem=(s.pop)()),(index=(std.find)(list,function _(item=null){return __oak_eq(item,elem)})),(s.add)(index)))()},contains:function _(s=null,c=null){return ((elem,exists,list)=>((list=_ioarg(s,c,0,(json.parse??null))),(elem=(s.pop)()),(exists=!__oak_eq((std.find)(list,function _(item=null){return __oak_eq(item,elem)}),-1)),(s.add)(exists)))()}})),(ObjOps=({__oak_js_new:function _(s=null,c=null){return ((obj,properties)=>((properties=_ioarg(s,c,0,(json.parse??null))),(obj=(std.clone)(properties)),(s.add)(obj)))()},get:function _(s=null,c=null){return ((obj,propName,propValue)=>((obj=_ioarg(s,c,0,(json.parse??null))),(propName=_ioarg(s,c,1,string)),(propValue=__oak_acc(obj,__oak_obj_key((propName)))),(s.add)(propValue)))()},set:function _(s=null,c=null){return ((obj,propName,propValue)=>((obj=_ioarg(s,c,0,(json.parse??null))),(propName=_ioarg(s,c,1,string)),(propValue=_ioarg(s,c,2)),((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign((propName),__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt[__oak_obj_key((propName))]):(__oak_assgn_tgt[__oak_obj_key((propName))])=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(obj),propValue)))()},has:function _(s=null,c=null){return ((exists,obj,propName)=>((obj=_ioarg(s,c,0,(json.parse??null))),(propName=_ioarg(s,c,1,string)),(exists=!__oak_eq(__oak_acc(obj,__oak_obj_key((propName))),null)),(s.add)(exists)))()},remove:function _(s=null,c=null){return ((obj,propName)=>((obj=_ioarg(s,c,0,(json.parse??null))),(propName=_ioarg(s,c,1,string)),((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign((propName),__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt[__oak_obj_key((propName))]):(__oak_assgn_tgt[__oak_obj_key((propName))])=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(obj),null)))()},keys:function _(s=null,c=null){return ((keys,obj)=>((obj=_ioarg(s,c,0,(json.parse??null))),(keys=keys(obj)),(s.add)(keys)))()},values:function _(s=null,c=null){return ((obj,values)=>((obj=_ioarg(s,c,0,object)),(values=(std.values)(obj)),(s.add)(values)))()},entries:function _(s=null,c=null){return ((entries,obj)=>((obj=_ioarg(s,c,0,object)),(entries=(std.entries)(obj)),(s.add)(entries)))()}})),(ControlFlow=({[__Oak_String('if')]:function _(s=null,c=null){return ((condition,false_branch,result,true_branch)=>((condition=(s.pop)()),(true_branch=(s.pop)()),(false_branch=(s.pop)()),(result=((__oak_cond)=>__oak_eq(__oak_cond,true)?true_branch():false_branch())(condition)),(s.add)(result)))()},loop:function _(s=null,c=null){return ((body,condition)=>((condition=(s.pop)()),(body=(s.pop)()),(std.loop)(body)))()}})),(Memoization=({_cache:({}),_get_or_compute:_get_or_compute=function _get_or_compute(key=null,func=null,args=null){return ((__oak_cond)=>__oak_eq(__oak_cond,null)?func(...args):__oak_eq(__oak_cond,cached)?cached:null)(__oak_acc((Memoization._cache??null),__oak_obj_key((key))))},memoize:function _(s=null,c=null){return ((func,memoized)=>((func=(s.pop)()),memoized=function memoized(...args){return ((key,result)=>((key=(str.join)(__Oak_String(','),args)),(result=_get_or_compute(key,func,args)),((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign((key),__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt[__oak_obj_key((key))]):(__oak_assgn_tgt[__oak_obj_key((key))])=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string((Memoization._cache??null)),result),result))()},(s.add)(memoized)))()},clear_cache:function _(s=null,c=null){return (((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign(_cache,__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt._cache):(__oak_assgn_tgt._cache)=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(Memoization),({})))}})),(Jump=({jump:jump=function jump(s=null,c=null){return ((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign(nextReg,__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt.nextReg):(__oak_assgn_tgt.nextReg)=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string((c.item??null)),_ioarg(s,c,0,int))},jmif:function _(s=null,c=null){return ((__oak_cond)=>__oak_eq(__oak_cond,false)?jump(s,c):__oak_eq(__oak_cond,0)?jump(s,c):null)(_ioarg(s,c,0,int,__Oak_String('peek')))},subrt:function _(s=null,c=null){return ((index)=>((index=(std.find)((s.Steps??null),function _(step=null){return __oak_eq(step,_ioarg(s,c,0,int))})),(s._jitStep)(__oak_acc((s.Steps??null),__oak_obj_key((index))))))()}})),(Importing=({std:function _(s=null,c=null){return ((imported,module)=>((module=_ioarg(s,c,0,string)),(imported=__oak_module_import(module)),(s.add)(imported)))()}})),(Env=(std.merge)(ReturnAddr,Prims,Stack,Math,BoolOps,MemOps,TransferOps,CastOps,StringOps,ListOps,ObjOps,ControlFlow,Memoization,Jump,Importing)),({Abs,Adding,Bitwise,BoolOps,CastOps,ControlFlow,Div,Env,Goto,Hex,Importing,Jump,ListOps,Math,MemCache,MemOps,Memoization,Mod,Mult,ObjOps,Pow,Prims,ReturnAddr,Spawning,Sqrt,Stack,StringOps,Subtr,TransferOps,Trig,_bool,_get_or_compute,_hkpow,_hksqrt,_intOrFloat,_ioarg,addRetAddr,addReturner,bools,chars,exp,hasRetAddr,hkcub,hkmlt,hksqr,json,jump,leftShift,lower,math,numbers,prim,qd_b4,qdiv,rightShift,setRetAddr,std,str,symbl,upper})))()}),__oak_modularize(__Oak_String('src/structures/MemCache.oak'),function _(){return ((MemCache,std)=>((std=__oak_module_import(__Oak_String('std'))),MemCache=function MemCache(){let Ctx;let addCtx;let delCtx;let getCtx;let getKey;let hasCtxAt;let hasKey;let setKey;let updateCtx;return (Ctx=({store:[],addCtx:addCtx=function addCtx(NewCx=null){return __oak_push((Ctx.store??null),[NewCx,({})])},hasCtxAt:hasCtxAt=function hasCtxAt(Cx=null){return (std.find)((Ctx.store??null),function _(store=null){return __oak_eq(__oak_acc(store,0),Cx)})},getCtx:getCtx=function getCtx(Cx=null){return __oak_acc((Ctx.store??null),__oak_obj_key((hasCtxAt(Cx))))},updateCtx:updateCtx=function updateCtx(Cx=null,NewData=null){return ((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign((hasCtxAt(Cx)),__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt[__oak_obj_key((hasCtxAt(Cx)))]):(__oak_assgn_tgt[__oak_obj_key((hasCtxAt(Cx)))])=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string((Ctx.store??null)),[Cx,NewData])},setKey:setKey=function setKey(Cx=null,Key=null,Value=null){return ((ind)=>((ind=hasCtxAt(Cx)),((__oak_cond)=>__oak_eq(__oak_cond,true)?((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign((Key),__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt[__oak_obj_key((Key))]):(__oak_assgn_tgt[__oak_obj_key((Key))])=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string((__oak_acc(__oak_acc((Ctx.store??null),__oak_obj_key((ind))),1))),Value):null)(!__oak_eq(ind,-1))))()},getKey:getKey=function getKey(Cx=null,Key=null){return ((ind)=>((ind=hasCtxAt(Cx)),((__oak_cond)=>__oak_eq(__oak_cond,true)?__oak_acc((__oak_acc(__oak_acc((Ctx.store??null),__oak_obj_key((ind))),1)),__oak_obj_key((Key))):null)(!__oak_eq(ind,-1))))()},hasKey:hasKey=function hasKey(Cx=null,Key=null){return ((ind)=>((ind=hasCtxAt(Cx)),((__oak_cond)=>__oak_eq(__oak_cond,true)?(std.find)(keys(__oak_acc(__oak_acc((Ctx.store??null),__oak_obj_key((ind))),1)),function _(i=null){return __oak_eq(i,Key)}):null)(!__oak_eq(ind,-1))))()},delCtx:delCtx=function delCtx(Cx=null){return ((ind)=>((ind=hasCtxAt(Cx)),((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign(store,__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt.store):(__oak_assgn_tgt.store)=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(Ctx),(std.merge)((std.slice)((Ctx.store??null),0,(ind-1)),(std.slice)((Ctx.store??null),__as_oak_string(ind+1))))))()},gc:function _(){return ((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign(store,__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt.store):(__oak_assgn_tgt.store)=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(Ctx),[])}}))},({MemCache,std})))()}),__oak_modularize(__Oak_String('src/tables/p2.oak'),function _(){return ((exp,hkmlt,p2table,p2tableLook,p3table,p3tableLook,qd_b4,qdiv,tableLookup)=>((p2table=[[__Oak_String('65536'),__Oak_String('65025'),__Oak_String('64516'),__Oak_String('64009'),__Oak_String('63504'),__Oak_String('63001'),__Oak_String('62500'),__Oak_String('62001'),__Oak_String('61504'),__Oak_String('61009'),__Oak_String('60516'),__Oak_String('60025'),__Oak_String('59536'),__Oak_String('59049'),__Oak_String('58564'),__Oak_String('58081'),__Oak_String('57600'),__Oak_String('57121'),__Oak_String('56644'),__Oak_String('56169'),__Oak_String('55696'),__Oak_String('55225'),__Oak_String('54756'),__Oak_String('54289'),__Oak_String('53824'),__Oak_String('53361'),__Oak_String('52900'),__Oak_String('52441'),__Oak_String('51984'),__Oak_String('51529'),__Oak_String('51076'),__Oak_String('50625'),__Oak_String('50176'),__Oak_String('49729'),__Oak_String('49284'),__Oak_String('48841'),__Oak_String('48400'),__Oak_String('47961'),__Oak_String('47524'),__Oak_String('47089'),__Oak_String('46656'),__Oak_String('46225'),__Oak_String('45796'),__Oak_String('45369'),__Oak_String('44944'),__Oak_String('44521'),__Oak_String('44100'),__Oak_String('43681'),__Oak_String('43264'),__Oak_String('42849'),__Oak_String('42436'),__Oak_String('42025'),__Oak_String('41616'),__Oak_String('41209'),__Oak_String('40804'),__Oak_String('40401'),__Oak_String('40000'),__Oak_String('39601'),__Oak_String('39204'),__Oak_String('38809'),__Oak_String('38416'),__Oak_String('38025'),__Oak_String('37636'),__Oak_String('37249'),__Oak_String('36864'),__Oak_String('36481'),__Oak_String('36100'),__Oak_String('35721'),__Oak_String('35344'),__Oak_String('34969'),__Oak_String('34596'),__Oak_String('34225'),__Oak_String('33856'),__Oak_String('33489'),__Oak_String('33124'),__Oak_String('32761'),__Oak_String('32400'),__Oak_String('32041'),__Oak_String('31684'),__Oak_String('31329'),__Oak_String('30976'),__Oak_String('30625'),__Oak_String('30276'),__Oak_String('29929'),__Oak_String('29584'),__Oak_String('29241'),__Oak_String('28900'),__Oak_String('28561'),__Oak_String('28224'),__Oak_String('27889'),__Oak_String('27556'),__Oak_String('27225'),__Oak_String('26896'),__Oak_String('26569'),__Oak_String('26244'),__Oak_String('25921'),__Oak_String('25600'),__Oak_String('25281'),__Oak_String('24964'),__Oak_String('24649'),__Oak_String('24336'),__Oak_String('24025'),__Oak_String('23716'),__Oak_String('23409'),__Oak_String('23104'),__Oak_String('22801'),__Oak_String('22500'),__Oak_String('22201'),__Oak_String('21904'),__Oak_String('21609'),__Oak_String('21316'),__Oak_String('21025'),__Oak_String('20736'),__Oak_String('20449'),__Oak_String('20164'),__Oak_String('19881'),__Oak_String('19600'),__Oak_String('19321'),__Oak_String('19044'),__Oak_String('18769'),__Oak_String('18496'),__Oak_String('18225'),__Oak_String('17956'),__Oak_String('17689'),__Oak_String('17424'),__Oak_String('17161'),__Oak_String('16900'),__Oak_String('16641'),__Oak_String('16384'),__Oak_String('16129'),__Oak_String('15876'),__Oak_String('15625'),__Oak_String('15376'),__Oak_String('15129'),__Oak_String('14884'),__Oak_String('14641'),__Oak_String('14400'),__Oak_String('14161'),__Oak_String('13924'),__Oak_String('13689'),__Oak_String('13456'),__Oak_String('13225'),__Oak_String('12996'),__Oak_String('12769'),__Oak_String('12544'),__Oak_String('12321'),__Oak_String('12100'),__Oak_String('11881'),__Oak_String('11664'),__Oak_String('11449'),__Oak_String('11236'),__Oak_String('11025'),__Oak_String('10816'),__Oak_String('10609'),__Oak_String('10404'),__Oak_String('10201'),__Oak_String('10000'),__Oak_String('9801'),__Oak_String('9604'),__Oak_String('9409'),__Oak_String('9216'),__Oak_String('9025'),__Oak_String('8836'),__Oak_String('8649'),__Oak_String('8464'),__Oak_String('8281'),__Oak_String('8100'),__Oak_String('7921'),__Oak_String('7744'),__Oak_String('7569'),__Oak_String('7396'),__Oak_String('7225'),__Oak_String('7056'),__Oak_String('6889'),__Oak_String('6724'),__Oak_String('6561'),__Oak_String('6400'),__Oak_String('6241'),__Oak_String('6084'),__Oak_String('5929'),__Oak_String('5776'),__Oak_String('5625'),__Oak_String('5476'),__Oak_String('5329'),__Oak_String('5184'),__Oak_String('5041'),__Oak_String('4900'),__Oak_String('4761'),__Oak_String('4624'),__Oak_String('4489'),__Oak_String('4356'),__Oak_String('4225'),__Oak_String('4096'),__Oak_String('3969'),__Oak_String('3844'),__Oak_String('3721'),__Oak_String('3600'),__Oak_String('3481'),__Oak_String('3364'),__Oak_String('3249'),__Oak_String('3136'),__Oak_String('3025'),__Oak_String('2916'),__Oak_String('2809'),__Oak_String('2704'),__Oak_String('2601'),__Oak_String('2500'),__Oak_String('2401'),__Oak_String('2304'),__Oak_String('2209'),__Oak_String('2116'),__Oak_String('2025'),__Oak_String('1936'),__Oak_String('1849'),__Oak_String('1764'),__Oak_String('1681'),__Oak_String('1600'),__Oak_String('1521'),__Oak_String('1444'),__Oak_String('1369'),__Oak_String('1296'),__Oak_String('1225'),__Oak_String('1156'),__Oak_String('1089'),__Oak_String('1024'),__Oak_String('961'),__Oak_String('900'),__Oak_String('841'),__Oak_String('784'),__Oak_String('729'),__Oak_String('676'),__Oak_String('625'),__Oak_String('576'),__Oak_String('529'),__Oak_String('484'),__Oak_String('441'),__Oak_String('400'),__Oak_String('361'),__Oak_String('324'),__Oak_String('289'),__Oak_String('256'),__Oak_String('225'),__Oak_String('196'),__Oak_String('169'),__Oak_String('144'),__Oak_String('121'),__Oak_String('100'),__Oak_String('81'),__Oak_String('64'),__Oak_String('49'),__Oak_String('36'),__Oak_String('25'),__Oak_String('16'),__Oak_String('9'),__Oak_String('4'),__Oak_String('1'),__Oak_String('0'),__Oak_String('1'),__Oak_String('4'),__Oak_String('9'),__Oak_String('16'),__Oak_String('25'),__Oak_String('36'),__Oak_String('49'),__Oak_String('64'),__Oak_String('81'),__Oak_String('100'),__Oak_String('121'),__Oak_String('144'),__Oak_String('169'),__Oak_String('196'),__Oak_String('225'),__Oak_String('256'),__Oak_String('289'),__Oak_String('324'),__Oak_String('361'),__Oak_String('400'),__Oak_String('441'),__Oak_String('484'),__Oak_String('529'),__Oak_String('576'),__Oak_String('625'),__Oak_String('676'),__Oak_String('729'),__Oak_String('784'),__Oak_String('841'),__Oak_String('900'),__Oak_String('961'),__Oak_String('1024'),__Oak_String('1089'),__Oak_String('1156'),__Oak_String('1225'),__Oak_String('1296'),__Oak_String('1369'),__Oak_String('1444'),__Oak_String('1521'),__Oak_String('1600'),__Oak_String('1681'),__Oak_String('1764'),__Oak_String('1849'),__Oak_String('1936'),__Oak_String('2025'),__Oak_String('2116'),__Oak_String('2209'),__Oak_String('2304'),__Oak_String('2401'),__Oak_String('2500'),__Oak_String('2601'),__Oak_String('2704'),__Oak_String('2809'),__Oak_String('2916'),__Oak_String('3025'),__Oak_String('3136'),__Oak_String('3249'),__Oak_String('3364'),__Oak_String('3481'),__Oak_String('3600'),__Oak_String('3721'),__Oak_String('3844'),__Oak_String('3969'),__Oak_String('4096'),__Oak_String('4225'),__Oak_String('4356'),__Oak_String('4489'),__Oak_String('4624'),__Oak_String('4761'),__Oak_String('4900'),__Oak_String('5041'),__Oak_String('5184'),__Oak_String('5329'),__Oak_String('5476'),__Oak_String('5625'),__Oak_String('5776'),__Oak_String('5929'),__Oak_String('6084'),__Oak_String('6241'),__Oak_String('6400'),__Oak_String('6561'),__Oak_String('6724'),__Oak_String('6889'),__Oak_String('7056'),__Oak_String('7225'),__Oak_String('7396'),__Oak_String('7569'),__Oak_String('7744'),__Oak_String('7921'),__Oak_String('8100'),__Oak_String('8281'),__Oak_String('8464'),__Oak_String('8649'),__Oak_String('8836'),__Oak_String('9025'),__Oak_String('9216'),__Oak_String('9409'),__Oak_String('9604'),__Oak_String('9801'),__Oak_String('10000'),__Oak_String('10201'),__Oak_String('10404'),__Oak_String('10609'),__Oak_String('10816'),__Oak_String('11025'),__Oak_String('11236'),__Oak_String('11449'),__Oak_String('11664'),__Oak_String('11881'),__Oak_String('12100'),__Oak_String('12321'),__Oak_String('12544'),__Oak_String('12769'),__Oak_String('12996'),__Oak_String('13225'),__Oak_String('13456'),__Oak_String('13689'),__Oak_String('13924'),__Oak_String('14161'),__Oak_String('14400'),__Oak_String('14641'),__Oak_String('14884'),__Oak_String('15129'),__Oak_String('15376'),__Oak_String('15625'),__Oak_String('15876'),__Oak_String('16129'),__Oak_String('16384'),__Oak_String('16641'),__Oak_String('16900'),__Oak_String('17161'),__Oak_String('17424'),__Oak_String('17689'),__Oak_String('17956'),__Oak_String('18225'),__Oak_String('18496'),__Oak_String('18769'),__Oak_String('19044'),__Oak_String('19321'),__Oak_String('19600'),__Oak_String('19881'),__Oak_String('20164'),__Oak_String('20449'),__Oak_String('20736'),__Oak_String('21025'),__Oak_String('21316'),__Oak_String('21609'),__Oak_String('21904'),__Oak_String('22201'),__Oak_String('22500'),__Oak_String('22801'),__Oak_String('23104'),__Oak_String('23409'),__Oak_String('23716'),__Oak_String('24025'),__Oak_String('24336'),__Oak_String('24649'),__Oak_String('24964'),__Oak_String('25281'),__Oak_String('25600'),__Oak_String('25921'),__Oak_String('26244'),__Oak_String('26569'),__Oak_String('26896'),__Oak_String('27225'),__Oak_String('27556'),__Oak_String('27889'),__Oak_String('28224'),__Oak_String('28561'),__Oak_String('28900'),__Oak_String('29241'),__Oak_String('29584'),__Oak_String('29929'),__Oak_String('30276'),__Oak_String('30625'),__Oak_String('30976'),__Oak_String('31329'),__Oak_String('31684'),__Oak_String('32041'),__Oak_String('32400'),__Oak_String('32761'),__Oak_String('33124'),__Oak_String('33489'),__Oak_String('33856'),__Oak_String('34225'),__Oak_String('34596'),__Oak_String('34969'),__Oak_String('35344'),__Oak_String('35721'),__Oak_String('36100'),__Oak_String('36481'),__Oak_String('36864'),__Oak_String('37249'),__Oak_String('37636'),__Oak_String('38025'),__Oak_String('38416'),__Oak_String('38809'),__Oak_String('39204'),__Oak_String('39601'),__Oak_String('40000'),__Oak_String('40401'),__Oak_String('40804'),__Oak_String('41209'),__Oak_String('41616'),__Oak_String('42025'),__Oak_String('42436'),__Oak_String('42849'),__Oak_String('43264'),__Oak_String('43681'),__Oak_String('44100'),__Oak_String('44521'),__Oak_String('44944'),__Oak_String('45369'),__Oak_String('45796'),__Oak_String('46225'),__Oak_String('46656'),__Oak_String('47089'),__Oak_String('47524'),__Oak_String('47961'),__Oak_String('48400'),__Oak_String('48841'),__Oak_String('49284'),__Oak_String('49729'),__Oak_String('50176'),__Oak_String('50625'),__Oak_String('51076'),__Oak_String('51529'),__Oak_String('51984'),__Oak_String('52441'),__Oak_String('52900'),__Oak_String('53361'),__Oak_String('53824'),__Oak_String('54289'),__Oak_String('54756'),__Oak_String('55225'),__Oak_String('55696'),__Oak_String('56169'),__Oak_String('56644'),__Oak_String('57121'),__Oak_String('57600'),__Oak_String('58081'),__Oak_String('58564'),__Oak_String('59049'),__Oak_String('59536'),__Oak_String('60025'),__Oak_String('60516'),__Oak_String('61009'),__Oak_String('61504'),__Oak_String('62001'),__Oak_String('62500'),__Oak_String('63001'),__Oak_String('63504'),__Oak_String('64009'),__Oak_String('64516')],256]),(p3table=[[__Oak_String('-1.6777216e+07'),__Oak_String('-1.6581375e+07'),__Oak_String('-1.6387064e+07'),__Oak_String('-1.6194277e+07'),__Oak_String('-1.6003008e+07'),__Oak_String('-1.5813251e+07'),__Oak_String('-1.5625e+07'),__Oak_String('-1.5438249e+07'),__Oak_String('-1.5252992e+07'),__Oak_String('-1.5069223e+07'),__Oak_String('-1.4886936e+07'),__Oak_String('-1.4706125e+07'),__Oak_String('-1.4526784e+07'),__Oak_String('-1.4348907e+07'),__Oak_String('-1.4172488e+07'),__Oak_String('-1.3997521e+07'),__Oak_String('-1.3824e+07'),__Oak_String('-1.3651919e+07'),__Oak_String('-1.3481272e+07'),__Oak_String('-1.3312053e+07'),__Oak_String('-1.3144256e+07'),__Oak_String('-1.2977875e+07'),__Oak_String('-1.2812904e+07'),__Oak_String('-1.2649337e+07'),__Oak_String('-1.2487168e+07'),__Oak_String('-1.2326391e+07'),__Oak_String('-1.2167e+07'),__Oak_String('-1.2008989e+07'),__Oak_String('-1.1852352e+07'),__Oak_String('-1.1697083e+07'),__Oak_String('-1.1543176e+07'),__Oak_String('-1.1390625e+07'),__Oak_String('-1.1239424e+07'),__Oak_String('-1.1089567e+07'),__Oak_String('-1.0941048e+07'),__Oak_String('-1.0793861e+07'),__Oak_String('-1.0648e+07'),__Oak_String('-1.0503459e+07'),__Oak_String('-1.0360232e+07'),__Oak_String('-1.0218313e+07'),__Oak_String('-1.0077696e+07'),__Oak_String('-9.938375e+06'),__Oak_String('-9.800344e+06'),__Oak_String('-9.663597e+06'),__Oak_String('-9.528128e+06'),__Oak_String('-9.393931e+06'),__Oak_String('-9.261e+06'),__Oak_String('-9.129329e+06'),__Oak_String('-8.998912e+06'),__Oak_String('-8.869743e+06'),__Oak_String('-8.741816e+06'),__Oak_String('-8.615125e+06'),__Oak_String('-8.489664e+06'),__Oak_String('-8.365427e+06'),__Oak_String('-8.242408e+06'),__Oak_String('-8.120601e+06'),__Oak_String('-8e+06'),__Oak_String('-7.880599e+06'),__Oak_String('-7.762392e+06'),__Oak_String('-7.645373e+06'),__Oak_String('-7.529536e+06'),__Oak_String('-7.414875e+06'),__Oak_String('-7.301384e+06'),__Oak_String('-7.189057e+06'),__Oak_String('-7.077888e+06'),__Oak_String('-6.967871e+06'),__Oak_String('-6.859e+06'),__Oak_String('-6.751269e+06'),__Oak_String('-6.644672e+06'),__Oak_String('-6.539203e+06'),__Oak_String('-6.434856e+06'),__Oak_String('-6.331625e+06'),__Oak_String('-6.229504e+06'),__Oak_String('-6.128487e+06'),__Oak_String('-6.028568e+06'),__Oak_String('-5.929741e+06'),__Oak_String('-5.832e+06'),__Oak_String('-5.735339e+06'),__Oak_String('-5.639752e+06'),__Oak_String('-5.545233e+06'),__Oak_String('-5.451776e+06'),__Oak_String('-5.359375e+06'),__Oak_String('-5.268024e+06'),__Oak_String('-5.177717e+06'),__Oak_String('-5.088448e+06'),__Oak_String('-5.000211e+06'),__Oak_String('-4.913e+06'),__Oak_String('-4.826809e+06'),__Oak_String('-4.741632e+06'),__Oak_String('-4.657463e+06'),__Oak_String('-4.574296e+06'),__Oak_String('-4.492125e+06'),__Oak_String('-4.410944e+06'),__Oak_String('-4.330747e+06'),__Oak_String('-4.251528e+06'),__Oak_String('-4.173281e+06'),__Oak_String('-4.096e+06'),__Oak_String('-4.019679e+06'),__Oak_String('-3.944312e+06'),__Oak_String('-3.869893e+06'),__Oak_String('-3.796416e+06'),__Oak_String('-3.723875e+06'),__Oak_String('-3.652264e+06'),__Oak_String('-3.581577e+06'),__Oak_String('-3.511808e+06'),__Oak_String('-3.442951e+06'),__Oak_String('-3.375e+06'),__Oak_String('-3.307949e+06'),__Oak_String('-3.241792e+06'),__Oak_String('-3.176523e+06'),__Oak_String('-3.112136e+06'),__Oak_String('-3.048625e+06'),__Oak_String('-2.985984e+06'),__Oak_String('-2.924207e+06'),__Oak_String('-2.863288e+06'),__Oak_String('-2.803221e+06'),__Oak_String('-2.744e+06'),__Oak_String('-2.685619e+06'),__Oak_String('-2.628072e+06'),__Oak_String('-2.571353e+06'),__Oak_String('-2.515456e+06'),__Oak_String('-2.460375e+06'),__Oak_String('-2.406104e+06'),__Oak_String('-2.352637e+06'),__Oak_String('-2.299968e+06'),__Oak_String('-2.248091e+06'),__Oak_String('-2.197e+06'),__Oak_String('-2.146689e+06'),__Oak_String('-2.097152e+06'),__Oak_String('-2.048383e+06'),__Oak_String('-2.000376e+06'),__Oak_String('-1.953125e+06'),__Oak_String('-1.906624e+06'),__Oak_String('-1.860867e+06'),__Oak_String('-1.815848e+06'),__Oak_String('-1.771561e+06'),__Oak_String('-1.728e+06'),__Oak_String('-1.685159e+06'),__Oak_String('-1.643032e+06'),__Oak_String('-1.601613e+06'),__Oak_String('-1.560896e+06'),__Oak_String('-1.520875e+06'),__Oak_String('-1.481544e+06'),__Oak_String('-1.442897e+06'),__Oak_String('-1.404928e+06'),__Oak_String('-1.367631e+06'),__Oak_String('-1.331e+06'),__Oak_String('-1.295029e+06'),__Oak_String('-1.259712e+06'),__Oak_String('-1.225043e+06'),__Oak_String('-1.191016e+06'),__Oak_String('-1.157625e+06'),__Oak_String('-1.124864e+06'),__Oak_String('-1.092727e+06'),__Oak_String('-1.061208e+06'),__Oak_String('-1.030301e+06'),__Oak_String('-1e+06'),__Oak_String('-970299'),__Oak_String('-941192'),__Oak_String('-912673'),__Oak_String('-884736'),__Oak_String('-857375'),__Oak_String('-830584'),__Oak_String('-804357'),__Oak_String('-778688'),__Oak_String('-753571'),__Oak_String('-729000'),__Oak_String('-704969'),__Oak_String('-681472'),__Oak_String('-658503'),__Oak_String('-636056'),__Oak_String('-614125'),__Oak_String('-592704'),__Oak_String('-571787'),__Oak_String('-551368'),__Oak_String('-531441'),__Oak_String('-512000'),__Oak_String('-493039'),__Oak_String('-474552'),__Oak_String('-456533'),__Oak_String('-438976'),__Oak_String('-421875'),__Oak_String('-405224'),__Oak_String('-389017'),__Oak_String('-373248'),__Oak_String('-357911'),__Oak_String('-343000'),__Oak_String('-328509'),__Oak_String('-314432'),__Oak_String('-300763'),__Oak_String('-287496'),__Oak_String('-274625'),__Oak_String('-262144'),__Oak_String('-250047'),__Oak_String('-238328'),__Oak_String('-226981'),__Oak_String('-216000'),__Oak_String('-205379'),__Oak_String('-195112'),__Oak_String('-185193'),__Oak_String('-175616'),__Oak_String('-166375'),__Oak_String('-157464'),__Oak_String('-148877'),__Oak_String('-140608'),__Oak_String('-132651'),__Oak_String('-125000'),__Oak_String('-117649'),__Oak_String('-110592'),__Oak_String('-103823'),__Oak_String('-97336'),__Oak_String('-91125'),__Oak_String('-85184'),__Oak_String('-79507'),__Oak_String('-74088'),__Oak_String('-68921'),__Oak_String('-64000'),__Oak_String('-59319'),__Oak_String('-54872'),__Oak_String('-50653'),__Oak_String('-46656'),__Oak_String('-42875'),__Oak_String('-39304'),__Oak_String('-35937'),__Oak_String('-32768'),__Oak_String('-29791'),__Oak_String('-27000'),__Oak_String('-24389'),__Oak_String('-21952'),__Oak_String('-19683'),__Oak_String('-17576'),__Oak_String('-15625'),__Oak_String('-13824'),__Oak_String('-12167'),__Oak_String('-10648'),__Oak_String('-9261'),__Oak_String('-8000'),__Oak_String('-6859'),__Oak_String('-5832'),__Oak_String('-4913'),__Oak_String('-4096'),__Oak_String('-3375'),__Oak_String('-2744'),__Oak_String('-2197'),__Oak_String('-1728'),__Oak_String('-1331'),__Oak_String('-1000'),__Oak_String('-729'),__Oak_String('-512'),__Oak_String('-343'),__Oak_String('-216'),__Oak_String('-125'),__Oak_String('-64'),__Oak_String('-27'),__Oak_String('-8'),__Oak_String('-1'),__Oak_String('0'),__Oak_String('1'),__Oak_String('8'),__Oak_String('27'),__Oak_String('64'),__Oak_String('125'),__Oak_String('216'),__Oak_String('343'),__Oak_String('512'),__Oak_String('729'),__Oak_String('1000'),__Oak_String('1331'),__Oak_String('1728'),__Oak_String('2197'),__Oak_String('2744'),__Oak_String('3375'),__Oak_String('4096'),__Oak_String('4913'),__Oak_String('5832'),__Oak_String('6859'),__Oak_String('8000'),__Oak_String('9261'),__Oak_String('10648'),__Oak_String('12167'),__Oak_String('13824'),__Oak_String('15625'),__Oak_String('17576'),__Oak_String('19683'),__Oak_String('21952'),__Oak_String('24389'),__Oak_String('27000'),__Oak_String('29791'),__Oak_String('32768'),__Oak_String('35937'),__Oak_String('39304'),__Oak_String('42875'),__Oak_String('46656'),__Oak_String('50653'),__Oak_String('54872'),__Oak_String('59319'),__Oak_String('64000'),__Oak_String('68921'),__Oak_String('74088'),__Oak_String('79507'),__Oak_String('85184'),__Oak_String('91125'),__Oak_String('97336'),__Oak_String('103823'),__Oak_String('110592'),__Oak_String('117649'),__Oak_String('125000'),__Oak_String('132651'),__Oak_String('140608'),__Oak_String('148877'),__Oak_String('157464'),__Oak_String('166375'),__Oak_String('175616'),__Oak_String('185193'),__Oak_String('195112'),__Oak_String('205379'),__Oak_String('216000'),__Oak_String('226981'),__Oak_String('238328'),__Oak_String('250047'),__Oak_String('262144'),__Oak_String('274625'),__Oak_String('287496'),__Oak_String('300763'),__Oak_String('314432'),__Oak_String('328509'),__Oak_String('343000'),__Oak_String('357911'),__Oak_String('373248'),__Oak_String('389017'),__Oak_String('405224'),__Oak_String('421875'),__Oak_String('438976'),__Oak_String('456533'),__Oak_String('474552'),__Oak_String('493039'),__Oak_String('512000'),__Oak_String('531441'),__Oak_String('551368'),__Oak_String('571787'),__Oak_String('592704'),__Oak_String('614125'),__Oak_String('636056'),__Oak_String('658503'),__Oak_String('681472'),__Oak_String('704969'),__Oak_String('729000'),__Oak_String('753571'),__Oak_String('778688'),__Oak_String('804357'),__Oak_String('830584'),__Oak_String('857375'),__Oak_String('884736'),__Oak_String('912673'),__Oak_String('941192'),__Oak_String('970299'),__Oak_String('1e+06'),__Oak_String('1.030301e+06'),__Oak_String('1.061208e+06'),__Oak_String('1.092727e+06'),__Oak_String('1.124864e+06'),__Oak_String('1.157625e+06'),__Oak_String('1.191016e+06'),__Oak_String('1.225043e+06'),__Oak_String('1.259712e+06'),__Oak_String('1.295029e+06'),__Oak_String('1.331e+06'),__Oak_String('1.367631e+06'),__Oak_String('1.404928e+06'),__Oak_String('1.442897e+06'),__Oak_String('1.481544e+06'),__Oak_String('1.520875e+06'),__Oak_String('1.560896e+06'),__Oak_String('1.601613e+06'),__Oak_String('1.643032e+06'),__Oak_String('1.685159e+06'),__Oak_String('1.728e+06'),__Oak_String('1.771561e+06'),__Oak_String('1.815848e+06'),__Oak_String('1.860867e+06'),__Oak_String('1.906624e+06'),__Oak_String('1.953125e+06'),__Oak_String('2.000376e+06'),__Oak_String('2.048383e+06'),__Oak_String('2.097152e+06'),__Oak_String('2.146689e+06'),__Oak_String('2.197e+06'),__Oak_String('2.248091e+06'),__Oak_String('2.299968e+06'),__Oak_String('2.352637e+06'),__Oak_String('2.406104e+06'),__Oak_String('2.460375e+06'),__Oak_String('2.515456e+06'),__Oak_String('2.571353e+06'),__Oak_String('2.628072e+06'),__Oak_String('2.685619e+06'),__Oak_String('2.744e+06'),__Oak_String('2.803221e+06'),__Oak_String('2.863288e+06'),__Oak_String('2.924207e+06'),__Oak_String('2.985984e+06'),__Oak_String('3.048625e+06'),__Oak_String('3.112136e+06'),__Oak_String('3.176523e+06'),__Oak_String('3.241792e+06'),__Oak_String('3.307949e+06'),__Oak_String('3.375e+06'),__Oak_String('3.442951e+06'),__Oak_String('3.511808e+06'),__Oak_String('3.581577e+06'),__Oak_String('3.652264e+06'),__Oak_String('3.723875e+06'),__Oak_String('3.796416e+06'),__Oak_String('3.869893e+06'),__Oak_String('3.944312e+06'),__Oak_String('4.019679e+06'),__Oak_String('4.096e+06'),__Oak_String('4.173281e+06'),__Oak_String('4.251528e+06'),__Oak_String('4.330747e+06'),__Oak_String('4.410944e+06'),__Oak_String('4.492125e+06'),__Oak_String('4.574296e+06'),__Oak_String('4.657463e+06'),__Oak_String('4.741632e+06'),__Oak_String('4.826809e+06'),__Oak_String('4.913e+06'),__Oak_String('5.000211e+06'),__Oak_String('5.088448e+06'),__Oak_String('5.177717e+06'),__Oak_String('5.268024e+06'),__Oak_String('5.359375e+06'),__Oak_String('5.451776e+06'),__Oak_String('5.545233e+06'),__Oak_String('5.639752e+06'),__Oak_String('5.735339e+06'),__Oak_String('5.832e+06'),__Oak_String('5.929741e+06'),__Oak_String('6.028568e+06'),__Oak_String('6.128487e+06'),__Oak_String('6.229504e+06'),__Oak_String('6.331625e+06'),__Oak_String('6.434856e+06'),__Oak_String('6.539203e+06'),__Oak_String('6.644672e+06'),__Oak_String('6.751269e+06'),__Oak_String('6.859e+06'),__Oak_String('6.967871e+06'),__Oak_String('7.077888e+06'),__Oak_String('7.189057e+06'),__Oak_String('7.301384e+06'),__Oak_String('7.414875e+06'),__Oak_String('7.529536e+06'),__Oak_String('7.645373e+06'),__Oak_String('7.762392e+06'),__Oak_String('7.880599e+06'),__Oak_String('8e+06'),__Oak_String('8.120601e+06'),__Oak_String('8.242408e+06'),__Oak_String('8.365427e+06'),__Oak_String('8.489664e+06'),__Oak_String('8.615125e+06'),__Oak_String('8.741816e+06'),__Oak_String('8.869743e+06'),__Oak_String('8.998912e+06'),__Oak_String('9.129329e+06'),__Oak_String('9.261e+06'),__Oak_String('9.393931e+06'),__Oak_String('9.528128e+06'),__Oak_String('9.663597e+06'),__Oak_String('9.800344e+06'),__Oak_String('9.938375e+06'),__Oak_String('1.0077696e+07'),__Oak_String('1.0218313e+07'),__Oak_String('1.0360232e+07'),__Oak_String('1.0503459e+07'),__Oak_String('1.0648e+07'),__Oak_String('1.0793861e+07'),__Oak_String('1.0941048e+07'),__Oak_String('1.1089567e+07'),__Oak_String('1.1239424e+07'),__Oak_String('1.1390625e+07'),__Oak_String('1.1543176e+07'),__Oak_String('1.1697083e+07'),__Oak_String('1.1852352e+07'),__Oak_String('1.2008989e+07'),__Oak_String('1.2167e+07'),__Oak_String('1.2326391e+07'),__Oak_String('1.2487168e+07'),__Oak_String('1.2649337e+07'),__Oak_String('1.2812904e+07'),__Oak_String('1.2977875e+07'),__Oak_String('1.3144256e+07'),__Oak_String('1.3312053e+07'),__Oak_String('1.3481272e+07'),__Oak_String('1.3651919e+07'),__Oak_String('1.3824e+07'),__Oak_String('1.3997521e+07'),__Oak_String('1.4172488e+07'),__Oak_String('1.4348907e+07'),__Oak_String('1.4526784e+07'),__Oak_String('1.4706125e+07'),__Oak_String('1.4886936e+07'),__Oak_String('1.5069223e+07'),__Oak_String('1.5252992e+07'),__Oak_String('1.5438249e+07'),__Oak_String('1.5625e+07'),__Oak_String('1.5813251e+07'),__Oak_String('1.6003008e+07'),__Oak_String('1.6194277e+07'),__Oak_String('1.6387064e+07')],256]),tableLookup=function tableLookup(i=null,table=null){return float(__oak_acc((__oak_acc(table,0)),__oak_obj_key((__as_oak_string(i+__oak_acc(table,1))))))},p2tableLook=function p2tableLook(i=null){return tableLookup(i,p2table)},p3tableLook=function p3tableLook(i=null){return tableLookup(i,p2table)},exp=function exp(x=null){return pow((math.E??null),x)},qdiv=function qdiv(a=null,b=null){return exp((log(a)-log(b)))},qd_b4=function qd_b4(x=null){let r;return (((__oak_cond)=>__oak_eq(__oak_cond,null)?pow(x,2):r)((r=tableLookup(x)))/4)},hkmlt=function hkmlt(a=null,b=null){return ((__oak_cond)=>__oak_eq(__oak_cond,__oak_eq(a,1))?1:__oak_eq(__oak_cond,__oak_eq(b,1))?1:(qd_b4(__as_oak_string(a+b))-qd_b4((a-b))))(true)},({exp,hkmlt,p2table,p2tableLook,p3table,p3tableLook,qd_b4,qdiv,tableLookup})))()}),__oak_modularize(__Oak_String('src/util.oak'),function _(){return ((CowError,fmt,std)=>((std=__oak_module_import(__Oak_String('std'))),(fmt=__oak_module_import(__Oak_String('fmt'))),CowError=function CowError(name=null,message=null,cause=null,stack=null){return ((Ctx)=>((Ctx=({name:(std.__oak_js_default)(name,__Oak_String('')),cause:(std.__oak_js_default)(cause,null),stack:(std.__oak_js_default)(stack,__Oak_String('')),message:(std.__oak_js_default)(message,__Oak_String('')),__oak_js_throw:function _(...args){return ((std.println)((fmt.format)(__Oak_String('{{0}} -> {{1}}:'),(Ctx.name??null),(Ctx.message??null))),(std.println)(__Oak_String(' '),(Ctx.cause??null)),(std.println)(__Oak_String(' '),(Ctx.stack??null)),exit(1))}}))))()},({CowError,fmt,std})))()}),__oak_modularize(__Oak_String('cli'),function _(){return ((_maybeOpt,__oak_js_default,each,join,parse,parseArgv,slice,startsWith__oak_qm)=>(({__oak_js_default,slice,join,each}=__oak_module_import(__Oak_String('std'))),({startsWith__oak_qm}=__oak_module_import(__Oak_String('str'))),_maybeOpt=function _maybeOpt(part=null){return ((__oak_cond)=>__oak_eq(__oak_cond,startsWith__oak_qm(part,__Oak_String('--')))?slice(part,2):__oak_eq(__oak_cond,startsWith__oak_qm(part,__Oak_String('-')))?slice(part,1):null)(true)},parseArgv=function parseArgv(argv=null){return ((args,lastOpt,onlyPositional__oak_qm,opts)=>(((__oak_cond)=>__oak_eq(__oak_cond,true)?((argv=join(join(slice(argv,0,2),[null]),slice(argv,2)))):null)(!__oak_eq(_maybeOpt(__oak_js_default(__oak_acc(argv,2),__Oak_String(''))),null)),(opts=({})),(args=[]),(lastOpt=null),(onlyPositional__oak_qm=false),each(slice(argv,3),function _(part=null){let opt;return ((__oak_cond)=>__oak_eq(__oak_cond,__oak_eq(part,null))?null:__oak_eq(__oak_cond,__oak_eq(part,__Oak_String('--')))?(onlyPositional__oak_qm=true):__oak_eq(__oak_cond,onlyPositional__oak_qm)?__oak_push(args,part):((__oak_cond)=>__oak_eq(__oak_cond,[null,null])?__oak_push(args,part):__oak_eq(__oak_cond,[__Oak_Empty,null])?(((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign((lastOpt),__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt[__oak_obj_key((lastOpt))]):(__oak_assgn_tgt[__oak_obj_key((lastOpt))])=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(opts),part),(lastOpt=null)):__oak_eq(__oak_cond,[null,__Oak_Empty])?(lastOpt=opt):(((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign((lastOpt),__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt[__oak_obj_key((lastOpt))]):(__oak_assgn_tgt[__oak_obj_key((lastOpt))])=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(opts),true),(lastOpt=opt)))([lastOpt,(opt=_maybeOpt(part))]))(true)}),((__oak_cond)=>__oak_eq(__oak_cond,true)?((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign((lastOpt),__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt[__oak_obj_key((lastOpt))]):(__oak_assgn_tgt[__oak_obj_key((lastOpt))])=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(opts),true):null)(!__oak_eq(lastOpt,null)),({exe:__oak_acc(argv,0),main:__oak_acc(argv,1),verb:__oak_acc(argv,2),opts,args})))()},parse=function parse(){return parseArgv(args())},({_maybeOpt,__oak_js_default,each,join,parse,parseArgv,slice,startsWith__oak_qm})))()}),__oak_modularize(__Oak_String('crypto'),function _(){return ((map,split,toHex,uuid)=>(({toHex,map}=__oak_module_import(__Oak_String('std'))),({split}=__oak_module_import(__Oak_String('str'))),uuid=function uuid(){return ((ns,x)=>((ns=map(split(srand(16)),codepoint)),((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign(6,__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt[6]):(__oak_assgn_tgt[6])=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(ns),(__oak_left=>__oak_left===true?true:__oak_or(__oak_left,64))(((__oak_left=>__oak_left===false?false:__oak_and(__oak_left,15))(__oak_acc(ns,6))))),((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign(8,__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt[8]):(__oak_assgn_tgt[8])=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(ns),(__oak_left=>__oak_left===true?true:__oak_or(__oak_left,128))(((__oak_left=>__oak_left===false?false:__oak_and(__oak_left,63))(__oak_acc(ns,8))))),x=function x(b=null){let s;return ((__oak_cond)=>__oak_eq(__oak_cond,1)?__oak_push(__Oak_String('0'),s):s)(len((s=toHex(__oak_acc(ns,__oak_obj_key((b)))))))},__oak_push(__oak_push(__oak_push(__oak_push(__oak_push(__oak_push(__oak_push(__oak_push(__oak_push(__oak_push(__oak_push(__oak_push(__oak_push(__oak_push(__oak_push(__oak_push(__oak_push(__oak_push(__oak_push(x(0),x(1)),x(2)),x(3)),__Oak_String('-')),x(4)),x(5)),__Oak_String('-')),x(6)),x(7)),__Oak_String('-')),x(8)),x(9)),__Oak_String('-')),x(10)),x(11)),x(12)),x(13)),x(14)),x(15))))()},({map,split,toHex,uuid})))()}),__oak_modularize(__Oak_String('datetime'),function _(){return ((DaysBeforeMonth,DaysFrom1To1970,DaysPer100Years,DaysPer400Years,DaysPer4Years,LeapDay,SecondsPerDay,ZeroYear,_describeClock,_describeDate,_parseTZOffset,__oak_js_default,describe,endsWith__oak_qm,fmtFormat,format,leap__oak_qm,map,merge,padEnd,padStart,parse,round,slice,split,strContains__oak_qm,strIndexOf,take,timestamp)=>(({__oak_js_default,map,take,slice,merge}=__oak_module_import(__Oak_String('std'))),({endsWith__oak_qm,contains__oak_qm:strContains__oak_qm=null,indexOf:strIndexOf=null,padStart,padEnd,split}=__oak_module_import(__Oak_String('str'))),({round}=__oak_module_import(__Oak_String('math'))),({format:fmtFormat=null}=__oak_module_import(__Oak_String('fmt'))),(LeapDay=__as_oak_string(31+28)),(SecondsPerDay=86400),(DaysPer4Years=__as_oak_string((365*4)+1)),(DaysPer100Years=((25*DaysPer4Years)-1)),(DaysPer400Years=__as_oak_string((DaysPer100Years*4)+1)),(ZeroYear=1),(DaysFrom1To1970=(((DaysPer400Years*5)-(365*31))-8)),(DaysBeforeMonth=[__Oak_Empty,0,31,__as_oak_string(31+28),__as_oak_string(__as_oak_string(31+28)+31),__as_oak_string(__as_oak_string(__as_oak_string(31+28)+31)+30),__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(31+28)+31)+30)+31),__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(31+28)+31)+30)+31)+30),__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(31+28)+31)+30)+31)+30)+31),__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(31+28)+31)+30)+31)+30)+31)+31),__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(31+28)+31)+30)+31)+30)+31)+31)+30),__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(31+28)+31)+30)+31)+30)+31)+31)+30)+31),__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(31+28)+31)+30)+31)+30)+31)+31)+30)+31)+30),__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(31+28)+31)+30)+31)+30)+31)+31)+30)+31)+30)+31)]),leap__oak_qm=function leap__oak_qm(year=null){return (__oak_left=>__oak_left===false?false:__oak_and(__oak_left,((__oak_left=>__oak_left===true?true:__oak_or(__oak_left,__oak_eq((year%400),0)))(!__oak_eq((year%100),0)))))(__oak_eq((year%4),0))},_describeDate=function _describeDate(t=null){return ((d,day,leapYear__oak_qm,month,n,n100,n4,n400,year)=>((d=__as_oak_string(int((((t-(t%SecondsPerDay)))/SecondsPerDay))+DaysFrom1To1970)),((__oak_cond)=>__oak_eq(__oak_cond,true)?(d=(d-1)):null)((__oak_left=>__oak_left===false?false:__oak_and(__oak_left,!__oak_eq((t%86400),0)))((t<0))),(n400=int((d/DaysPer400Years))),(d=(d-(DaysPer400Years*n400))),(n100=int((d/DaysPer100Years))),(n100=(n100-int((n100/4)))),(d=(d-(DaysPer100Years*n100))),(n4=int((d/DaysPer4Years))),(d=(d-(DaysPer4Years*n4))),(n=int((d/365))),(n=(n-int((n/4)))),(d=(d-(365*n))),(year=__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(ZeroYear+(400*n400))+(100*n100))+(4*n4))+n)),(month=0),(day=d),(leapYear__oak_qm=leap__oak_qm(year)),((__oak_cond)=>__oak_eq(__oak_cond,(__oak_left=>__oak_left===false?false:__oak_and(__oak_left,__oak_eq(day,LeapDay)))(leapYear__oak_qm))?((month=2),(day=29)):((subMonth)=>(((__oak_cond)=>__oak_eq(__oak_cond,true)?(day=(day-1)):null)((__oak_left=>__oak_left===false?false:__oak_and(__oak_left,(day>LeapDay)))(leapYear__oak_qm)),subMonth=function subMonth(m=null){return ((__oak_trampolined_subMonth)=>((__oak_trampolined_subMonth=function _(m=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?m:__oak_trampoline(__oak_trampolined_subMonth,__as_oak_string(m+1)))((day<__oak_acc(DaysBeforeMonth,__oak_obj_key((__as_oak_string(m+1))))))}),__oak_resolve_trampoline(__oak_trampolined_subMonth,m)))()},(month=subMonth(1)),(day=__as_oak_string((day-__oak_acc(DaysBeforeMonth,__oak_obj_key((month))))+1))))())(true),({year,month,day})))()},_describeClock=function _describeClock(t=null){return ((hour,minute,rem)=>((rem=(t%SecondsPerDay)),((__oak_cond)=>__oak_eq(__oak_cond,true)?(rem=__as_oak_string(rem+SecondsPerDay)):null)((rem<0)),(hour=int((rem/3600))),(rem=(rem%3600)),(minute=int((rem/60))),({hour,minute,second:(rem%60)})))()},describe=function describe(t=null){return merge(_describeDate(t),_describeClock(t))},timestamp=function timestamp(desc=null){return ((day,daysFrom1,daysFrom1970,daysYearToDate,hour,leapYear__oak_qm,minute,month,n100,n4,n400,second,year)=>(({year,month,day,hour,minute,second}=desc),(leapYear__oak_qm=leap__oak_qm(year)),(year=(year-ZeroYear)),(n400=int((year/400))),(year=(year%400)),(n100=int((year/100))),(year=(year%100)),(n4=int((year/4))),(year=(year%4)),(daysYearToDate=((__oak_cond)=>__oak_eq(__oak_cond,true)?((__oak_cond)=>__oak_eq(__oak_cond,__oak_eq(month,1))?(__as_oak_string(__oak_acc(DaysBeforeMonth,__oak_obj_key((month)))+day)-1):__oak_eq(__oak_cond,(__oak_left=>__oak_left===false?false:__oak_and(__oak_left,(day<29)))(__oak_eq(month,2)))?(__as_oak_string(__oak_acc(DaysBeforeMonth,__oak_obj_key((month)))+day)-1):__oak_eq(__oak_cond,(__oak_left=>__oak_left===false?false:__oak_and(__oak_left,__oak_eq(day,29)))(__oak_eq(month,2)))?59:__as_oak_string(__oak_acc(DaysBeforeMonth,__oak_obj_key((month)))+day))(true):(__as_oak_string(__oak_acc(DaysBeforeMonth,__oak_obj_key((month)))+day)-1))(leapYear__oak_qm)),(daysFrom1=__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string((DaysPer400Years*n400)+(DaysPer100Years*n100))+(DaysPer4Years*n4))+(365*year))+daysYearToDate)),(daysFrom1970=(daysFrom1-DaysFrom1To1970)),__as_oak_string(__as_oak_string(__as_oak_string((daysFrom1970*SecondsPerDay)+(3600*hour))+(60*minute))+second)))()},format=function format(t=null,tzOffset=null){return ((day,hour,millis,minute,month,second,year)=>((tzOffset=__oak_js_default(tzOffset,0)),({year,month,day,hour,minute,second}=describe(__as_oak_string(t+(tzOffset*60)))),fmtFormat(__Oak_String('{{0}}-{{1}}-{{2}}T{{3}}:{{4}}:{{5}}{{6}}{{7}}'),((__oak_cond)=>__oak_eq(__oak_cond,(year>9999))?padStart(string(year),6,__Oak_String('0')):__oak_eq(__oak_cond,(year<0))?__oak_push(__Oak_String('-'),padStart(string(-year),6,__Oak_String('0'))):padStart(string(year),4,__Oak_String('0')))(true),padStart(string(month),2,__Oak_String('0')),padStart(string(day),2,__Oak_String('0')),padStart(string(hour),2,__Oak_String('0')),padStart(string(minute),2,__Oak_String('0')),padStart(string(int(second)),2,__Oak_String('0')),((__oak_cond)=>__oak_eq(__oak_cond,0)?__Oak_String(''):__as_oak_string(__Oak_String('.')+string(millis)))((millis=round((((second*1000))%1000),0))),((__oak_cond)=>__oak_eq(__oak_cond,__oak_eq(tzOffset,0))?__Oak_String('Z'):__oak_eq(__oak_cond,(tzOffset>0))?__oak_push(__Oak_String('+'),fmtFormat(__Oak_String('{{0}}:{{1}}'),padStart(string(int((tzOffset/60))),2,__Oak_String('0')),padStart(string((tzOffset%60)),2,__Oak_String('0')))):__oak_push(__Oak_String('-'),fmtFormat(__Oak_String('{{0}}:{{1}}'),padStart(string(int((-tzOffset/60))),2,__Oak_String('0')),padStart(string((-tzOffset%60)),2,__Oak_String('0')))))(true))))()},_parseTZOffset=function _parseTZOffset(offsetString=null){let hh;let mm;return ((__oak_cond)=>__oak_eq(__oak_cond,[])?null:__oak_eq(__oak_cond,[__Oak_Empty])?null:__oak_eq(__oak_cond,[null,__Oak_Empty])?null:__oak_eq(__oak_cond,[__Oak_Empty,null])?null:__as_oak_string((hh*60)+mm))(([hh=null,mm=null]=map(split(offsetString,__Oak_String(':')),int)))},parse=function parse(s=null){let clock;let date;let day;let hour;let minute;let month;let second;let year;return ((__oak_cond)=>__oak_eq(__oak_cond,[])?null:__oak_eq(__oak_cond,[__Oak_Empty])?null:__oak_eq(__oak_cond,[null,__Oak_Empty])?null:__oak_eq(__oak_cond,[__Oak_Empty,null])?null:((__oak_cond)=>__oak_eq(__oak_cond,[])?null:__oak_eq(__oak_cond,[__Oak_Empty])?null:__oak_eq(__oak_cond,[__Oak_Empty,__Oak_Empty])?null:__oak_eq(__oak_cond,[null,__Oak_Empty,__Oak_Empty])?null:__oak_eq(__oak_cond,[__Oak_Empty,null,__Oak_Empty])?null:__oak_eq(__oak_cond,[__Oak_Empty,__Oak_Empty,null])?null:((__oak_cond)=>__oak_eq(__oak_cond,[])?null:__oak_eq(__oak_cond,[__Oak_Empty])?null:__oak_eq(__oak_cond,[__Oak_Empty,__Oak_Empty])?null:__oak_eq(__oak_cond,[null,__Oak_Empty,__Oak_Empty])?null:__oak_eq(__oak_cond,[__Oak_Empty,null,__Oak_Empty])?null:__oak_eq(__oak_cond,[__Oak_Empty,__Oak_Empty,null])?null:((maybeMillis,parsed,tzOffset)=>(([__oak_empty_assgn_tgt=null,maybeMillis=null]=map(map(split(clock,__Oak_String('.')),function _(s=null){return take(s,3)}),int)),(tzOffset=((__oak_cond)=>__oak_eq(__oak_cond,strContains__oak_qm(clock,__Oak_String('+')))?_parseTZOffset(slice(clock,__as_oak_string(strIndexOf(clock,__Oak_String('+'))+1))):__oak_eq(__oak_cond,strContains__oak_qm(clock,__Oak_String('-')))?((__oak_cond)=>__oak_eq(__oak_cond,null)?null:-parsed)((parsed=_parseTZOffset(slice(clock,__as_oak_string(strIndexOf(clock,__Oak_String('-'))+1))))):0)(true)),((__oak_cond)=>__oak_eq(__oak_cond,true)?({year,month,day,hour,minute,second:__as_oak_string(second+((__oak_js_default(maybeMillis,0))/1000)),tzOffset}):null)(!__oak_eq(tzOffset,null))))())(([hour=null,minute=null,second=null]=map(split(take(clock,8),__Oak_String(':')),int))))(([year=null,month=null,day=null]=map(split(date,__Oak_String('-')),int))))(([date=null,clock=null]=split(s,__Oak_String('T'))))},({DaysBeforeMonth,DaysFrom1To1970,DaysPer100Years,DaysPer400Years,DaysPer4Years,LeapDay,SecondsPerDay,ZeroYear,_describeClock,_describeDate,_parseTZOffset,__oak_js_default,describe,endsWith__oak_qm,fmtFormat,format,leap__oak_qm,map,merge,padEnd,padStart,parse,round,slice,split,strContains__oak_qm,strIndexOf,take,timestamp})))()}),__oak_modularize(__Oak_String('debug'),function _(){return ((_numeral__oak_qm,_primitive__oak_qm,_validIdent__oak_qm,__oak_js_default,digit__oak_qm,entries,every,format,inspect,join,letter__oak_qm,map,padStart,println,reduce,some,sort__oak_exclam,stdPrintln,toHex,values)=>(({println:stdPrintln=null,__oak_js_default,toHex,map,some,every,values,reduce,entries}=__oak_module_import(__Oak_String('std'))),({letter__oak_qm,digit__oak_qm,join,padStart}=__oak_module_import(__Oak_String('str'))),({sort__oak_exclam}=__oak_module_import(__Oak_String('sort'))),({format}=__oak_module_import(__Oak_String('fmt'))),_validIdent__oak_qm=function _validIdent__oak_qm(s=null){return every(s,function _(c=null,i=null){return ((__oak_cond)=>__oak_eq(__oak_cond,0)?(__oak_left=>__oak_left===true?true:__oak_or(__oak_left,__oak_eq(c,__Oak_String('!'))))((__oak_left=>__oak_left===true?true:__oak_or(__oak_left,__oak_eq(c,__Oak_String('?'))))((__oak_left=>__oak_left===true?true:__oak_or(__oak_left,__oak_eq(c,__Oak_String('_'))))(letter__oak_qm(c)))):(__oak_left=>__oak_left===true?true:__oak_or(__oak_left,__oak_eq(c,__Oak_String('!'))))((__oak_left=>__oak_left===true?true:__oak_or(__oak_left,__oak_eq(c,__Oak_String('?'))))((__oak_left=>__oak_left===true?true:__oak_or(__oak_left,__oak_eq(c,__Oak_String('_'))))((__oak_left=>__oak_left===true?true:__oak_or(__oak_left,digit__oak_qm(c)))(letter__oak_qm(c))))))(i)})},_numeral__oak_qm=function _numeral__oak_qm(s=null){return every(s,digit__oak_qm)},_primitive__oak_qm=function _primitive__oak_qm(x=null){return ((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('null'))?true:__oak_eq(__oak_cond,Symbol.for('empty'))?true:__oak_eq(__oak_cond,Symbol.for('bool'))?true:__oak_eq(__oak_cond,Symbol.for('int'))?true:__oak_eq(__oak_cond,Symbol.for('float'))?true:__oak_eq(__oak_cond,Symbol.for('string'))?true:__oak_eq(__oak_cond,Symbol.for('atom'))?true:__oak_eq(__oak_cond,Symbol.for('function'))?true:false)(type(x))},inspect=function inspect(x=null,options=null){return ((depth,indentUnit,inspectAbbreviated,inspectAny,inspectLine,inspectMulti,inspectObjectKey,maxLine,maxList,maxObject)=>(({indent:indentUnit=null,depth,maxLine,maxList,maxObject}=__oak_js_default(options,({}))),(indentUnit=__oak_js_default(indentUnit,__Oak_String('  '))),(depth=__oak_js_default(depth,-1)),(maxLine=__oak_js_default(maxLine,80)),(maxList=__oak_js_default(maxList,16)),(maxObject=__oak_js_default(maxObject,3)),inspectObjectKey=function inspectObjectKey(key=null){return ((__oak_cond)=>__oak_eq(__oak_cond,_validIdent__oak_qm(key))?key:__oak_eq(__oak_cond,_numeral__oak_qm(key))?key:inspectLine(key,-1))(true)},inspectAbbreviated=function inspectAbbreviated(x=null){return ((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('list'))?format(__Oak_String('[ {{0}} items... ]'),len(x)):__oak_eq(__oak_cond,Symbol.for('object'))?format(__Oak_String('{ {{0}} entries... }'),len(x)):null)(type(x))},inspectLine=function inspectLine(x=null,depth=null){let payload;return ((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('null'))?string(x):__oak_eq(__oak_cond,Symbol.for('empty'))?string(x):__oak_eq(__oak_cond,Symbol.for('bool'))?string(x):__oak_eq(__oak_cond,Symbol.for('int'))?string(x):__oak_eq(__oak_cond,Symbol.for('float'))?string(x):__oak_eq(__oak_cond,Symbol.for('string'))?__as_oak_string(__as_oak_string(__Oak_String('\'')+(map(x,function _(c=null){return ((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String('\\'))?__Oak_String('\\\\'):__oak_eq(__oak_cond,__Oak_String('\''))?__Oak_String('\\\''):__oak_eq(__oak_cond,__Oak_String('\n'))?__Oak_String('\\n'):__oak_eq(__oak_cond,__Oak_String('\r'))?__Oak_String('\\r'):__oak_eq(__oak_cond,__Oak_String('\f'))?__Oak_String('\\f'):__oak_eq(__oak_cond,__Oak_String('\t'))?__Oak_String('\\t'):((__oak_cond)=>__oak_eq(__oak_cond,(codepoint(c)<32))?__oak_push(__Oak_String('\\x'),padStart(toHex(codepoint(c)),2,__Oak_String('0'))):__oak_eq(__oak_cond,(codepoint(c)>126))?__oak_push(__Oak_String('\\x'),padStart(toHex(codepoint(c)),2,__Oak_String('0'))):c)(true))(c)})))+__Oak_String('\'')):__oak_eq(__oak_cond,Symbol.for('atom'))?((__oak_cond)=>__oak_eq(__oak_cond,true)?__as_oak_string(__Oak_String(':')+string(payload)):format(__Oak_String('atom({{0}})'),inspectLine(payload)))(_validIdent__oak_qm((payload=string(x)))):__oak_eq(__oak_cond,Symbol.for('function'))?__Oak_String('fn { ... }'):__oak_eq(__oak_cond,Symbol.for('list'))?__as_oak_string(__as_oak_string(__Oak_String('[')+(join(map(x,function _(y=null){return inspectLine(y,depth)}),__Oak_String(', '))))+__Oak_String(']')):__oak_eq(__oak_cond,Symbol.for('object'))?((__oak_cond)=>__oak_eq(__oak_cond,0)?__Oak_String('{}'):__as_oak_string(__as_oak_string(__Oak_String('{ ')+(join(map(sort__oak_exclam(entries(x),0),function _(entry=null){return __as_oak_string(__as_oak_string(inspectObjectKey(__oak_acc(entry,0))+__Oak_String(': '))+inspectLine(__oak_acc(entry,1),depth))}),__Oak_String(', '))))+__Oak_String(' }')))(len(x)):null)(type(x))},inspectMulti=function inspectMulti(x=null,indent=null,depth=null){return ((innerIndent)=>((innerIndent=__as_oak_string(indent+indentUnit)),((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('list'))?__oak_push(reduce(x,__Oak_String('['),function _(lines=null,item=null){return (__oak_push(lines,__as_oak_string(__as_oak_string(__Oak_String('\n')+innerIndent)+inspectAny(item,innerIndent,depth))))}),__as_oak_string(__as_oak_string(__Oak_String('\n')+indent)+__Oak_String(']'))):__oak_eq(__oak_cond,Symbol.for('object'))?__oak_push(reduce(sort__oak_exclam(entries(x),0),__Oak_String('{'),function _(lines=null,entry=null){return (__oak_push(lines,__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(__Oak_String('\n')+innerIndent)+inspectObjectKey(__oak_acc(entry,0)))+__Oak_String(': '))+inspectAny(__oak_acc(entry,1),innerIndent,depth))))}),__as_oak_string(__as_oak_string(__Oak_String('\n')+indent)+__Oak_String('}'))):null)(type(x))))()},inspectAny=function inspectAny(x=null,indent=null,depth=null){return ((line,overflows__oak_qm)=>((line=inspectLine(x,(depth-1))),(overflows__oak_qm=(__as_oak_string(len(line)+len(indent))>maxLine)),((__oak_cond)=>__oak_eq(__oak_cond,_primitive__oak_qm(x))?line:__oak_eq(__oak_cond,__oak_eq(depth,0))?inspectAbbreviated(x):__oak_eq(__oak_cond,overflows__oak_qm)?inspectMulti(x,indent,(depth-1)):__oak_eq(__oak_cond,__oak_eq(type(x),Symbol.for('list')))?((__oak_cond)=>__oak_eq(__oak_cond,(len(x)>maxList))?inspectMulti(x,indent,(depth-1)):__oak_eq(__oak_cond,some(x,function _(y=null){return !_primitive__oak_qm(y)}))?inspectMulti(x,indent,(depth-1)):line)(true):__oak_eq(__oak_cond,__oak_eq(type(x),Symbol.for('object')))?((__oak_cond)=>__oak_eq(__oak_cond,(len(x)>maxObject))?inspectMulti(x,indent,(depth-1)):__oak_eq(__oak_cond,some(values(x),function _(y=null){return !_primitive__oak_qm(y)}))?inspectMulti(x,indent,(depth-1)):line)(true):null)(true)))()},inspectAny(x,__Oak_String(''),depth)))()},println=function println(x=null,options=null){return stdPrintln(inspect(x,options))},({_numeral__oak_qm,_primitive__oak_qm,_validIdent__oak_qm,__oak_js_default,digit__oak_qm,entries,every,format,inspect,join,letter__oak_qm,map,padStart,println,reduce,some,sort__oak_exclam,stdPrintln,toHex,values})))()}),__oak_modularize(__Oak_String('fmt'),function _(){return ((__oak_js_default,format,printf,println)=>(({println,__oak_js_default}=__oak_module_import(__Oak_String('std'))),format=function format(raw=null,...values){return ((buf,key,sub,value,which)=>((which=0),(key=__Oak_String('')),(buf=__Oak_String('')),(value=__oak_js_default(__oak_acc(values,0),({}))),sub=function sub(idx=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(idx=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?((c)=>((c=__oak_acc(raw,__oak_obj_key((idx)))),((__oak_cond)=>__oak_eq(__oak_cond,0)?((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String('{'))?(which=1):__oak_push(buf,c))(c):__oak_eq(__oak_cond,1)?((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String('{'))?(which=2):(__oak_push(__oak_push(buf,__Oak_String('{')),c),(which=0)))(c):__oak_eq(__oak_cond,2)?((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String('}'))?((index)=>((index=int(key)),__oak_push(buf,string(((__oak_cond)=>__oak_eq(__oak_cond,__oak_eq(key,__Oak_String('')))?__Oak_String(''):__oak_eq(__oak_cond,__oak_eq(index,null))?__oak_acc(value,__oak_obj_key((key))):__oak_acc(values,__oak_obj_key((index))))(true))),(key=__Oak_String('')),(which=3)))():__oak_eq(__oak_cond,__Oak_String(' '))?null:__oak_eq(__oak_cond,__Oak_String('\t'))?null:(key=__as_oak_string(key+c)))(c):__oak_eq(__oak_cond,3)?((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String('}'))?(which=0):null)(c):null)(which),__oak_trampoline(__oak_trampolined_sub,__as_oak_string(idx+1))))():buf)((idx<len(raw)))}),__oak_resolve_trampoline(__oak_trampolined_sub,idx)))()},sub(0)))()},printf=function printf(raw=null,...values){return println(format(raw,...values))},({__oak_js_default,format,printf,println})))()}),__oak_modularize(__Oak_String('fs'),function _(){return ((ReadBufSize,appendFile,listFiles,listFilesAsync,listFilesSync,readFile,readFileAsync,readFileSync,statFile,statFileAsync,statFileSync,writeFile,writeFileAsyncWithFlag,writeFileSyncWithFlag)=>((ReadBufSize=4096),readFileSync=function readFileSync(path=null){return ((evt)=>((evt=open(path,Symbol.for('readonly'))),((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('error'))?null:((fd,sub)=>((fd=(evt.fd??null)),sub=function sub(file=null,offset=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(file=null,offset=null){return ((evt)=>((evt=read(fd,offset,ReadBufSize)),((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('error'))?(close(fd),null):((__oak_cond)=>__oak_eq(__oak_cond,ReadBufSize)?__oak_trampoline(__oak_trampolined_sub,__oak_push(file,(evt.data??null)),__as_oak_string(offset+ReadBufSize)):(close(fd),__oak_push(file,(evt.data??null))))(len((evt.data??null))))((evt.type??null))))()}),__oak_resolve_trampoline(__oak_trampolined_sub,file,offset)))()},sub(__Oak_String(''),0)))())((evt.type??null))))()},readFileAsync=function readFileAsync(path=null,withFile=null){return open(path,Symbol.for('readonly'),function _(evt=null){return ((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('error'))?withFile(null):((fd,sub)=>((fd=(evt.fd??null)),sub=function sub(file=null,offset=null){return read(fd,offset,ReadBufSize,function _(evt=null){return ((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('error'))?close(fd,function _(){return (withFile(null))}):((__oak_cond)=>__oak_eq(__oak_cond,ReadBufSize)?sub(__oak_push(file,(evt.data??null)),__as_oak_string(offset+ReadBufSize)):close(fd,function _(){return (withFile(__oak_push(file,(evt.data??null))))}))(len((evt.data??null))))((evt.type??null))})},sub(__Oak_String(''),0)))())((evt.type??null))})},readFile=function readFile(path=null,withFile=null){return ((__oak_cond)=>__oak_eq(__oak_cond,null)?readFileSync(path):readFileAsync(path,withFile))(withFile)},writeFileSyncWithFlag=function writeFileSyncWithFlag(path=null,file=null,flag=null){return ((evt)=>((evt=open(path,flag)),((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('error'))?null:((fd)=>((fd=(evt.fd??null)),((evt)=>((evt=write(fd,0,file)),close(fd),((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('error'))?null:true)((evt.type??null))))()))())((evt.type??null))))()},writeFileAsyncWithFlag=function writeFileAsyncWithFlag(path=null,file=null,flag=null,withEnd=null){return open(path,flag,function _(evt=null){let fd;return ((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('error'))?withEnd(null):write((fd=(evt.fd??null)),0,file,function _(evt=null){return ((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('error'))?close(fd,function _(){return (withEnd(null))}):close(fd,function _(){return (withEnd(true))}))((evt.type??null))}))((evt.type??null))})},writeFile=function writeFile(path=null,file=null,withEnd=null){return ((__oak_cond)=>__oak_eq(__oak_cond,null)?writeFileSyncWithFlag(path,file,Symbol.for('truncate')):writeFileAsyncWithFlag(path,file,Symbol.for('truncate'),withEnd))(withEnd)},appendFile=function appendFile(path=null,file=null,withEnd=null){return ((__oak_cond)=>__oak_eq(__oak_cond,null)?writeFileSyncWithFlag(path,file,Symbol.for('append')):writeFileAsyncWithFlag(path,file,Symbol.for('append'),withEnd))(withEnd)},statFileSync=function statFileSync(path=null){return ((evt)=>((evt=stat(path)),((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('error'))?null:(evt.data??null))((evt.type??null))))()},statFileAsync=function statFileAsync(path=null,withStat=null){return stat(path,function _(evt=null){return ((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('error'))?withStat(null):withStat((evt.data??null)))((evt.type??null))})},statFile=function statFile(path=null,withStat=null){return ((__oak_cond)=>__oak_eq(__oak_cond,null)?statFileSync(path):statFileAsync(path,withStat))(withStat)},listFilesSync=function listFilesSync(path=null){return ((evt)=>((evt=ls(path)),((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('error'))?null:(evt.data??null))((evt.type??null))))()},listFilesAsync=function listFilesAsync(path=null,withFiles=null){return ls(path,function _(evt=null){return ((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('error'))?withFiles(null):withFiles((evt.data??null)))((evt.type??null))})},listFiles=function listFiles(path=null,withFiles=null){return ((__oak_cond)=>__oak_eq(__oak_cond,null)?listFilesSync(path):listFilesAsync(path,withFiles))(withFiles)},({ReadBufSize,appendFile,listFiles,listFilesAsync,listFilesSync,readFile,readFileAsync,readFileSync,statFile,statFileAsync,statFileSync,writeFile,writeFileAsyncWithFlag,writeFileSyncWithFlag})))()}),__oak_modularize(__Oak_String('http'),function _(){return ((MethodNotAllowed,MimeTypes,NotFound,Router,Server,_encodeChar,_hdr,_hex__oak_qm,checkRange,contains__oak_qm,cut,__oak_js_default,digit__oak_qm,each,entries,exclude,filter,fromEntries,fromHex,handleStatic,join,json,lower,lower__oak_qm,map,mimeForPath,percentDecode,percentEncode,percentEncodeURI,printf,println,queryDecode,queryEncode,readFile,reduce,slice,sort,split,toHex,upper,upper__oak_qm,word__oak_qm)=>(({println,__oak_js_default,toHex,fromHex,slice,map,each,filter,exclude,reduce,entries,fromEntries}=__oak_module_import(__Oak_String('std'))),({checkRange,cut,join,contains__oak_qm,digit__oak_qm,upper__oak_qm,lower__oak_qm,word__oak_qm,upper,lower,split}=__oak_module_import(__Oak_String('str'))),({readFile}=__oak_module_import(__Oak_String('fs'))),({printf}=__oak_module_import(__Oak_String('fmt'))),(sort=__oak_module_import(__Oak_String('sort'))),(json=__oak_module_import(__Oak_String('json'))),queryEncode=function queryEncode(params=null){return ((prepare)=>(prepare=function prepare(val=null){return ((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('list'))?(json.serialize)(val):__oak_eq(__oak_cond,Symbol.for('object'))?(json.serialize)(val):string(val))(type(val))},join(map((sort.sort)(map(exclude(entries(params),function _(entry=null){return (__oak_left=>__oak_left===true?true:__oak_or(__oak_left,__oak_eq(type(__oak_acc(entry,1)),Symbol.for('function'))))(__oak_eq(__oak_acc(entry,1),null))}),function _(entry=null){return [__oak_acc(entry,0),prepare(__oak_acc(entry,1))]}),0),function _(entry=null){return __as_oak_string(__as_oak_string(percentEncode(__oak_acc(entry,0))+__Oak_String('='))+percentEncode(__oak_acc(entry,1)))}),__Oak_String('&'))))()},queryDecode=function queryDecode(params=null){return (fromEntries(map(filter(split(params,__Oak_String('&')),function _(s=null){return !__oak_eq(s,__Oak_String(''))}),function _(kv=null){return map(cut(kv,__Oak_String('=')),percentDecode)})))},_encodeChar=function _encodeChar(uri__oak_qm=null){return function _(c=null){return ((__oak_cond)=>__oak_eq(__oak_cond,word__oak_qm(c))?c:__oak_eq(__oak_cond,contains__oak_qm(__Oak_String('-_.!~*\'()'),c))?c:__oak_eq(__oak_cond,(__oak_left=>__oak_left===false?false:__oak_and(__oak_left,contains__oak_qm(__Oak_String(';,/?:@&=+$#'),c)))(uri__oak_qm))?c:__as_oak_string(__Oak_String('%')+upper(toHex(codepoint(c)))))(true)}},percentEncode=function percentEncode(s=null){return map(s,_encodeChar(false))},percentEncodeURI=function percentEncodeURI(s=null){return map(s,_encodeChar(true))},_hex__oak_qm=function _hex__oak_qm(c=null){return (__oak_left=>__oak_left===true?true:__oak_or(__oak_left,((__oak_left=>__oak_left===false?false:__oak_and(__oak_left,(c<=__Oak_String('f'))))((c>=__Oak_String('a'))))))((__oak_left=>__oak_left===true?true:__oak_or(__oak_left,((__oak_left=>__oak_left===false?false:__oak_and(__oak_left,(c<=__Oak_String('F'))))((c>=__Oak_String('A'))))))(digit__oak_qm(c)))},percentDecode=function percentDecode(s=null){return ((buf,stage)=>((stage=Symbol.for('default')),(buf=null),reduce(s,__Oak_String(''),function _(decoded=null,curr=null){return ((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('default'))?((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String('+'))?__oak_push(decoded,__Oak_String(' ')):__oak_eq(__oak_cond,__Oak_String('%'))?((stage=Symbol.for('sawPercent')),decoded):__oak_push(decoded,curr))(curr):__oak_eq(__oak_cond,Symbol.for('sawPercent'))?((__oak_cond)=>__oak_eq(__oak_cond,false)?((stage=Symbol.for('default')),__oak_push(__oak_push(decoded,__Oak_String('%')),curr)):((stage=Symbol.for('sawFirstHex')),(buf=curr),decoded))(_hex__oak_qm(curr)):((last)=>((last=buf),(stage=Symbol.for('default')),(buf=null),((__oak_cond)=>__oak_eq(__oak_cond,false)?__oak_push(__oak_push(__oak_push(decoded,__Oak_String('%')),last),curr):__oak_push(decoded,char(fromHex(lower(__oak_push(last,curr))))))(_hex__oak_qm(curr))))())(stage)})))()},Router=function Router(){return ((add,__oak_js_catch,match,matchPath,self,splitPath)=>((self=[]),add=function add(pattern=null,handler=null){return __oak_push(self,[pattern,handler])},__oak_js_catch=function __oak_js_catch(handler=null){return add(__Oak_String(''),handler)},splitPath=function splitPath(url=null){return filter(split(url,__Oak_String('/')),function _(s=null){return !__oak_eq(s,__Oak_String(''))})},matchPath=function matchPath(pattern=null,path=null){return ((actual,desired,findMatchingParams,params,query)=>((params=({})),([path=null,query=null]=cut(path,__Oak_String('?'))),((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String(''))?null:each(map(split(query,__Oak_String('&')),function _(pair=null){return cut(pair,__Oak_String('='))}),function _(pair=null){return ((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign((__oak_acc(pair,0)),__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt[__oak_obj_key((__oak_acc(pair,0)))]):(__oak_assgn_tgt[__oak_obj_key((__oak_acc(pair,0)))])=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(params),percentDecode(__oak_acc(pair,1)))}))(query),(desired=splitPath(pattern)),(actual=splitPath(path)),findMatchingParams=function findMatchingParams(i=null){return ((__oak_trampolined_findMatchingParams)=>((__oak_trampolined_findMatchingParams=function _(i=null){return ((__oak_cond)=>__oak_eq(__oak_cond,len(desired))?((__oak_cond)=>__oak_eq(__oak_cond,len(actual))?params:null)(i):((actualPart,desiredPart)=>((desiredPart=__oak_js_default(__oak_acc(desired,__oak_obj_key((i))),__Oak_String(''))),(actualPart=__oak_js_default(__oak_acc(actual,__oak_obj_key((i))),__Oak_String(''))),((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String(':'))?(((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign((slice(desiredPart,1)),__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt[__oak_obj_key((slice(desiredPart,1)))]):(__oak_assgn_tgt[__oak_obj_key((slice(desiredPart,1)))])=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(params),percentDecode(actualPart)),__oak_trampoline(__oak_trampolined_findMatchingParams,__as_oak_string(i+1))):__oak_eq(__oak_cond,__Oak_String('*'))?(((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign((slice(desiredPart,1)),__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt[__oak_obj_key((slice(desiredPart,1)))]):(__oak_assgn_tgt[__oak_obj_key((slice(desiredPart,1)))])=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(params),join(map(slice(actual,i),percentDecode),__Oak_String('/')))):((__oak_cond)=>__oak_eq(__oak_cond,actualPart)?__oak_trampoline(__oak_trampolined_findMatchingParams,__as_oak_string(i+1)):null)(desiredPart))(__oak_acc(desiredPart,0))))())(i)}),__oak_resolve_trampoline(__oak_trampolined_findMatchingParams,i)))()},((__oak_cond)=>__oak_eq(__oak_cond,[__Oak_Empty,__Oak_String('')])?params:__oak_eq(__oak_cond,[true,__Oak_Empty])?findMatchingParams(0):null)([(len(desired)<=len(actual)),pattern])))()},match=function match(path=null){return ((sub)=>(sub=function sub(i=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(i=null){return ((__oak_cond)=>__oak_eq(__oak_cond,len(self))?function _(req=null){return (req.end)(({status:200,headers:({}),body:__Oak_String('dropped route. you should never see this in production')}))}:((handler,pattern,result)=>(([pattern=null,handler=null]=__oak_acc(self,__oak_obj_key((i)))),((__oak_cond)=>__oak_eq(__oak_cond,null)?__oak_trampoline(__oak_trampolined_sub,__as_oak_string(i+1)):handler(result))((result=matchPath(pattern,path)))))())(i)}),__oak_resolve_trampoline(__oak_trampolined_sub,i)))()},sub(0)))()},({add,__oak_js_catch,match})))()},(MimeTypes=({blob:__Oak_String('application/octet-stream'),html:__Oak_String('text/html; charset=utf-8'),txt:__Oak_String('text/plain; charset=utf-8'),md:__Oak_String('text/plain; charset=utf-8'),css:__Oak_String('text/css; charset=utf-8'),js:__Oak_String('application/javascript; charset=utf-8'),json:__Oak_String('application/json; charset=utf-8'),ink:__Oak_String('text/plain; charset=utf-8'),oak:__Oak_String('text/plain; charset=utf-8'),jpg:__Oak_String('image/jpeg'),jpeg:__Oak_String('image/jpeg'),png:__Oak_String('image/png'),gif:__Oak_String('image/gif'),svg:__Oak_String('image/svg+xml'),webp:__Oak_String('image/webp'),pdf:__Oak_String('application/pdf'),zip:__Oak_String('application/zip')})),mimeForPath=function mimeForPath(path=null){return ((ending,parts)=>((parts=split(path,__Oak_String('.'))),(ending=__oak_acc(parts,__oak_obj_key(((len(parts)-1))))),__oak_js_default(__oak_acc(MimeTypes,__oak_obj_key((ending))),(MimeTypes.blob??null))))()},(NotFound=({status:404,body:__Oak_String('file not found')})),(MethodNotAllowed=({status:405,body:__Oak_String('method not allowed')})),_hdr=function _hdr(attrs=null){return ((base)=>((base=({[__Oak_String('X-Served-By')]:__Oak_String('oak/libhttp'),[__Oak_String('Content-Type')]:__Oak_String('text/plain')})),each(keys(attrs),function _(k=null){return ((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign((k),__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt[__oak_obj_key((k))]):(__oak_assgn_tgt[__oak_obj_key((k))])=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(base),__oak_acc(attrs,__oak_obj_key((k))))}),base))()},Server=function Server(){return ((router,start)=>((router=Router()),start=function start(port=null){return ((router.__oak_js_catch)(function _(params=null){return function _(req=null,end=null){return end(({status:404,body:__Oak_String('service not found')}))}}),listen(__as_oak_string(__Oak_String('0.0.0.0:')+string(port)),function _(evt=null){return ((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('error'))?println(__Oak_String('server start error:'),(evt.error??null)):((method,url)=>(({method,url}=(evt.req??null)),printf(__Oak_String('{{ 0 }}: {{ 1 }}'),method,url),(router.match)(url)((evt.req??null),function _(resp=null){return (((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign(headers,__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt.headers):(__oak_assgn_tgt.headers)=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(resp),_hdr(__oak_js_default((resp.headers??null),({})))),(evt.end)(resp))})))())((evt.type??null))}))},({route:(router.add??null),start})))()},handleStatic=function handleStatic(path=null){return function _(req=null,end=null){return ((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String('GET'))?readFile(__as_oak_string(__Oak_String('./')+path),function _(file=null){return ((__oak_cond)=>__oak_eq(__oak_cond,null)?end(NotFound):end(({status:200,headers:({[__Oak_String('Content-Type')]:mimeForPath(path)}),body:file})))(file)}):end(MethodNotAllowed))((req.method??null))}},({MethodNotAllowed,MimeTypes,NotFound,Router,Server,_encodeChar,_hdr,_hex__oak_qm,checkRange,contains__oak_qm,cut,__oak_js_default,digit__oak_qm,each,entries,exclude,filter,fromEntries,fromHex,handleStatic,join,json,lower,lower__oak_qm,map,mimeForPath,percentDecode,percentEncode,percentEncodeURI,printf,println,queryDecode,queryEncode,readFile,reduce,slice,sort,split,toHex,upper,upper__oak_qm,word__oak_qm})))()}),__oak_modularize(__Oak_String('json'),function _(){return ((Reader,_parseReader,__oak_js_default,esc,escape,join,map,parse,parseFalse,parseList,parseNull,parseNumber,parseObject,parseString,parseTrue,serialize,slice,space__oak_qm)=>(({__oak_js_default,slice,map}=__oak_module_import(__Oak_String('std'))),({space__oak_qm,join}=__oak_module_import(__Oak_String('str'))),esc=function esc(c=null){return ((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String('\t'))?__Oak_String('\\t'):__oak_eq(__oak_cond,__Oak_String('\n'))?__Oak_String('\\n'):__oak_eq(__oak_cond,__Oak_String('\r'))?__Oak_String('\\r'):__oak_eq(__oak_cond,__Oak_String('\f'))?__Oak_String('\\f'):__oak_eq(__oak_cond,__Oak_String('"'))?__Oak_String('\\"'):__oak_eq(__oak_cond,__Oak_String('\\'))?__Oak_String('\\\\'):c)(c)},escape=function escape(s=null){return ((max,sub)=>((max=len(s)),sub=function sub(i=null,acc=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(i=null,acc=null){return ((__oak_cond)=>__oak_eq(__oak_cond,max)?acc:__oak_trampoline(__oak_trampolined_sub,__as_oak_string(i+1),__oak_push(acc,esc(__oak_acc(s,__oak_obj_key((i)))))))(i)}),__oak_resolve_trampoline(__oak_trampolined_sub,i,acc)))()},sub(0,__Oak_String(''))))()},serialize=function serialize(c=null){return ((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('null'))?__Oak_String('null'):__oak_eq(__oak_cond,Symbol.for('empty'))?__Oak_String('null'):__oak_eq(__oak_cond,Symbol.for('function'))?__Oak_String('null'):__oak_eq(__oak_cond,Symbol.for('string'))?__oak_push(__oak_push(__Oak_String('"'),escape(c)),__Oak_String('"')):__oak_eq(__oak_cond,Symbol.for('atom'))?__oak_push(__oak_push(__Oak_String('"'),string(c)),__Oak_String('"')):__oak_eq(__oak_cond,Symbol.for('int'))?string(c):__oak_eq(__oak_cond,Symbol.for('float'))?string(c):__oak_eq(__oak_cond,Symbol.for('bool'))?string(c):__oak_eq(__oak_cond,Symbol.for('list'))?__oak_push(__oak_push(__Oak_String('['),join(map(c,serialize),__Oak_String(','))),__Oak_String(']')):__oak_eq(__oak_cond,Symbol.for('object'))?__oak_push(__oak_push(__Oak_String('{'),join(map(keys(c),function _(k=null){return __oak_push(__oak_push(__oak_push(__Oak_String('"'),escape(k)),__Oak_String('":')),serialize(__oak_acc(c,__oak_obj_key((k)))))}),__Oak_String(','))),__Oak_String('}')):null)(type(c))},Reader=function Reader(s=null){return ((err__oak_qm,forward,index,next,nextWord,peek)=>((index=0),(err__oak_qm=false),next=function next(){return ((index=__as_oak_string(index+1)),__oak_js_default(__oak_acc(s,__oak_obj_key(((index-1)))),__Oak_String('')))},peek=function peek(){return __oak_js_default(__oak_acc(s,__oak_obj_key((index))),__Oak_String(''))},nextWord=function nextWord(n=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?((index=len(s)),null):((word)=>((word=slice(s,index,__as_oak_string(index+n))),(index=__as_oak_string(index+n)),word))())((__as_oak_string(index+n)>len(s)))},forward=function forward(){return ((sub)=>(sub=function sub(){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?((index=__as_oak_string(index+1)),__oak_trampoline(__oak_trampolined_sub)):null)(space__oak_qm(peek()))}),__oak_resolve_trampoline(__oak_trampolined_sub)))()},sub()))()},({next,peek,forward,nextWord,done__oak_qm:function _(){return (index>=len(s))},err__oak_exclam:function _(){return ((err__oak_qm=true),Symbol.for('error'))},err__oak_qm:function _(){return err__oak_qm}})))()},parseNull=function parseNull(r=null){return ((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String('null'))?null:(r.err__oak_exclam)())((r.nextWord)(4))},parseString=function parseString(r=null){return ((next,sub)=>((next=(r.next??null)),next(),sub=function sub(acc=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(acc=null){let c;return ((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String(''))?(r.err__oak_exclam)():__oak_eq(__oak_cond,__Oak_String('\\'))?__oak_trampoline(__oak_trampolined_sub,__oak_push(acc,((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String('t'))?__Oak_String('\t'):__oak_eq(__oak_cond,__Oak_String('n'))?__Oak_String('\n'):__oak_eq(__oak_cond,__Oak_String('r'))?__Oak_String('\r'):__oak_eq(__oak_cond,__Oak_String('f'))?__Oak_String('\f'):__oak_eq(__oak_cond,__Oak_String('"'))?__Oak_String('"'):c)((c=next())))):__oak_eq(__oak_cond,__Oak_String('"'))?acc:__oak_trampoline(__oak_trampolined_sub,__oak_push(acc,c)))((c=next()))}),__oak_resolve_trampoline(__oak_trampolined_sub,acc)))()},sub(__Oak_String(''))))()},parseNumber=function parseNumber(r=null){return ((decimal__oak_qm,negate__oak_qm,next,parsed,peek,result,sub)=>((peek=(r.peek??null)),(next=(r.next??null)),(decimal__oak_qm=false),(negate__oak_qm=((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String('-'))?(next(),true):false)(peek())),sub=function sub(acc=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(acc=null){return ((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String('.'))?((__oak_cond)=>__oak_eq(__oak_cond,true)?(r.err__oak_exclam)():((decimal__oak_qm=true),__oak_trampoline(__oak_trampolined_sub,__oak_push(acc,next()))))(decimal__oak_qm):__oak_eq(__oak_cond,__Oak_String('0'))?__oak_trampoline(__oak_trampolined_sub,__oak_push(acc,next())):__oak_eq(__oak_cond,__Oak_String('1'))?__oak_trampoline(__oak_trampolined_sub,__oak_push(acc,next())):__oak_eq(__oak_cond,__Oak_String('2'))?__oak_trampoline(__oak_trampolined_sub,__oak_push(acc,next())):__oak_eq(__oak_cond,__Oak_String('3'))?__oak_trampoline(__oak_trampolined_sub,__oak_push(acc,next())):__oak_eq(__oak_cond,__Oak_String('4'))?__oak_trampoline(__oak_trampolined_sub,__oak_push(acc,next())):__oak_eq(__oak_cond,__Oak_String('5'))?__oak_trampoline(__oak_trampolined_sub,__oak_push(acc,next())):__oak_eq(__oak_cond,__Oak_String('6'))?__oak_trampoline(__oak_trampolined_sub,__oak_push(acc,next())):__oak_eq(__oak_cond,__Oak_String('7'))?__oak_trampoline(__oak_trampolined_sub,__oak_push(acc,next())):__oak_eq(__oak_cond,__Oak_String('8'))?__oak_trampoline(__oak_trampolined_sub,__oak_push(acc,next())):__oak_eq(__oak_cond,__Oak_String('9'))?__oak_trampoline(__oak_trampolined_sub,__oak_push(acc,next())):acc)(peek())}),__oak_resolve_trampoline(__oak_trampolined_sub,acc)))()},(result=sub(__Oak_String(''))),((__oak_cond)=>__oak_eq(__oak_cond,null)?Symbol.for('error'):((__oak_cond)=>__oak_eq(__oak_cond,true)?-parsed:parsed)(negate__oak_qm))((parsed=((__oak_cond)=>__oak_eq(__oak_cond,true)?float(result):int(result))(decimal__oak_qm)))))()},parseTrue=function parseTrue(r=null){return ((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String('true'))?true:(r.err__oak_exclam)())((r.nextWord)(4))},parseFalse=function parseFalse(r=null){return ((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String('false'))?false:(r.err__oak_exclam)())((r.nextWord)(5))},parseList=function parseList(r=null){return ((err__oak_qm,forward,next,peek,sub)=>((err__oak_qm=(r.err__oak_qm??null)),(peek=(r.peek??null)),(next=(r.next??null)),(forward=(r.forward??null)),next(),forward(),sub=function sub(acc=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(acc=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?Symbol.for('error'):((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String(''))?(r.err__oak_exclam)():__oak_eq(__oak_cond,__Oak_String(']'))?(next(),acc):(__oak_push(acc,_parseReader(r)),forward(),((__oak_cond)=>__oak_eq(__oak_cond,true)?next():null)(__oak_eq(peek(),__Oak_String(','))),forward(),__oak_trampoline(__oak_trampolined_sub,acc)))(peek()))(err__oak_qm())}),__oak_resolve_trampoline(__oak_trampolined_sub,acc)))()},sub([])))()},parseObject=function parseObject(r=null){return ((err__oak_qm,forward,next,peek,sub)=>((err__oak_qm=(r.err__oak_qm??null)),(peek=(r.peek??null)),(next=(r.next??null)),(forward=(r.forward??null)),next(),forward(),sub=function sub(acc=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(acc=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?Symbol.for('error'):((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String(''))?(r.err__oak_exclam)():__oak_eq(__oak_cond,__Oak_String('}'))?(next(),acc):((key)=>((key=parseString(r)),((__oak_cond)=>__oak_eq(__oak_cond,true)?((val)=>(forward(),((__oak_cond)=>__oak_eq(__oak_cond,true)?next():null)(__oak_eq(peek(),__Oak_String(':'))),(val=_parseReader(r)),((__oak_cond)=>__oak_eq(__oak_cond,true)?(forward(),((__oak_cond)=>__oak_eq(__oak_cond,true)?next():null)(__oak_eq(peek(),__Oak_String(','))),forward(),__oak_trampoline(__oak_trampolined_sub,((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign((key),__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt[__oak_obj_key((key))]):(__oak_assgn_tgt[__oak_obj_key((key))])=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(acc),val))):null)(!err__oak_qm())))():null)(!err__oak_qm())))())(peek()))(err__oak_qm())}),__oak_resolve_trampoline(__oak_trampolined_sub,acc)))()},sub(({}))))()},_parseReader=function _parseReader(r=null){return ((result)=>((r.forward)(),(result=((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String('n'))?parseNull(r):__oak_eq(__oak_cond,__Oak_String('"'))?parseString(r):__oak_eq(__oak_cond,__Oak_String('t'))?parseTrue(r):__oak_eq(__oak_cond,__Oak_String('f'))?parseFalse(r):__oak_eq(__oak_cond,__Oak_String('['))?parseList(r):__oak_eq(__oak_cond,__Oak_String('{'))?parseObject(r):parseNumber(r))((r.peek)())),((__oak_cond)=>__oak_eq(__oak_cond,true)?Symbol.for('error'):result)((r.err__oak_qm)())))()},parse=function parse(s=null){return _parseReader(Reader(s))},({Reader,_parseReader,__oak_js_default,esc,escape,join,map,parse,parseFalse,parseList,parseNull,parseNumber,parseObject,parseString,parseTrue,serialize,slice,space__oak_qm})))()}),__oak_modularize(__Oak_String('math'),function _(){return ((E,Pi,abs,bearing,clamp,__oak_js_default,hypot,map,max,mean,median,min,orient,prod,reduce,round,scale,sign,sort,sqrt,stddev,sum)=>(({__oak_js_default,map,reduce}=__oak_module_import(__Oak_String('std'))),({sort}=__oak_module_import(__Oak_String('sort'))),(Pi=3.141592653589793),(E=2.718281828459045),sign=function sign(n=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?1:-1)((n>=0))},abs=function abs(n=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?n:-n)((n>=0))},sqrt=function sqrt(n=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?pow(n,0.5):null)((n>=0))},hypot=function hypot(x0=null,y0=null,x1=null,y1=null){return (((__oak_cond)=>__oak_eq(__oak_cond,true)?(x1=(y1=0)):null)((__oak_left=>__oak_left===false?false:__oak_and(__oak_left,__oak_eq(y1,null)))(__oak_eq(x1,null))),sqrt(__as_oak_string((((x0-x1))*((x0-x1)))+(((y0-y1))*((y0-y1))))))},scale=function scale(x=null,a=null,b=null,c=null,d=null){return ((normed)=>((normed=(((x-a))/((b-a)))),((__oak_cond)=>__oak_eq(__oak_cond,(__oak_left=>__oak_left===false?false:__oak_and(__oak_left,__oak_eq(d,null)))(__oak_eq(c,null)))?normed:__as_oak_string((((d-c))*normed)+c))(true)))()},bearing=function bearing(x=null,y=null,d=null,t=null){return [__as_oak_string(x+(d*cos(t))),__as_oak_string(y+(d*sin(t)))]},orient=function orient(x0=null,y0=null,x1=null,y1=null){return ((x,y)=>(([x=null,y=null]=((__oak_cond)=>__oak_eq(__oak_cond,true)?[x0,y0]:[(x1-x0),(y1-y0)])((__oak_left=>__oak_left===false?false:__oak_and(__oak_left,__oak_eq(y1,null)))(__oak_eq(x1,null)))),((__oak_cond)=>__oak_eq(__oak_cond,(x>0))?(2*atan((y/(__as_oak_string(hypot(x,y)+x))))):__oak_eq(__oak_cond,(__oak_left=>__oak_left===false?false:__oak_and(__oak_left,!__oak_eq(y,0)))((x<=0)))?(2*atan((((hypot(x,y)-x))/y))):__oak_eq(__oak_cond,(__oak_left=>__oak_left===false?false:__oak_and(__oak_left,__oak_eq(y,0)))((x<0)))?Pi:null)(true)))()},sum=function sum(...xs){return reduce(xs,0,function _(a=null,b=null){return __as_oak_string(a+b)})},prod=function prod(...xs){return reduce(xs,1,function _(a=null,b=null){return (a*b)})},min=function min(...xs){return reduce(xs,__oak_acc(xs,0),function _(acc=null,n=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?n:acc)((n<acc))})},max=function max(...xs){return reduce(xs,__oak_acc(xs,0),function _(acc=null,n=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?n:acc)((n>acc))})},clamp=function clamp(x=null,a=null,b=null){return ((__oak_cond)=>__oak_eq(__oak_cond,(x<a))?a:__oak_eq(__oak_cond,(x>b))?b:x)(true)},mean=function mean(xs=null){return ((__oak_cond)=>__oak_eq(__oak_cond,0)?null:(sum(...xs)/len(xs)))(len(xs))},median=function median(xs=null){return ((count,half)=>((xs=sort(xs)),(count=len(xs)),(half=int((count/2))),((__oak_cond)=>__oak_eq(__oak_cond,count)?null:__oak_eq(__oak_cond,(count%2))?((__as_oak_string(__oak_acc(xs,__oak_obj_key(((half-1))))+__oak_acc(xs,__oak_obj_key((half)))))/2):__oak_acc(xs,__oak_obj_key((half))))(0)))()},stddev=function stddev(xs=null){let xmean;return ((__oak_cond)=>__oak_eq(__oak_cond,true)?(sqrt(mean(map(xs,function _(x=null){return pow((xmean-x),2)})))):null)(!__oak_eq(null,(xmean=mean(xs))))},round=function round(n=null,decimals=null){return ((decimals=__oak_js_default(int(decimals),0)),((__oak_cond)=>__oak_eq(__oak_cond,true)?n:((order)=>((order=pow(10,decimals)),((__oak_cond)=>__oak_eq(__oak_cond,true)?(int(__as_oak_string((n*order)+0.5))/order):(-int(__as_oak_string((-n*order)+0.5))/order))((n>=0))))())((decimals<0)))},({E,Pi,abs,bearing,clamp,__oak_js_default,hypot,map,max,mean,median,min,orient,prod,reduce,round,scale,sign,sort,sqrt,stddev,sum})))()}),__oak_modularize(__Oak_String('md'),function _(){return ((Reader,append,compile,compileNode,digit__oak_qm,each,endsWith__oak_qm,every,filter,format,indexOf,join,letter__oak_qm,lineNodeType,listItemLine__oak_qm,lower,map,oListItemLine__oak_qm,parse,parseBlockQuote,parseCodeBlock,parseDoc,parseHeader,parseList,parseParagraph,parseRawHTML,parseText,percentDecode,reduce,replace,sanitizeAttr,sanitizeURL,slice,space__oak_qm,split,startsWith__oak_qm,take,tokenizeText,transform,trimOListGetLevel,trimStart,trimUListGetLevel,uListItemLine__oak_qm,unifyTextNodes,uword__oak_qm,word__oak_qm,wrap)=>(({slice,map,each,take,filter,reduce,every,append}=__oak_module_import(__Oak_String('std'))),({digit__oak_qm,letter__oak_qm,space__oak_qm,word__oak_qm,lower,indexOf,startsWith__oak_qm,endsWith__oak_qm,trimStart,replace,join,split}=__oak_module_import(__Oak_String('str'))),({format}=__oak_module_import(__Oak_String('fmt'))),({percentDecode}=__oak_module_import(__Oak_String('http'))),Reader=function Reader(s=null){return ((back,expect__oak_qm,i,itemIndex,last,next,peek,readUntil,readUntilEnd,readUntilMatchingDelim,readUntilPrefix)=>((i=0),peek=function peek(){return __oak_acc(s,__oak_obj_key((i)))},last=function last(){return __oak_acc(s,__oak_obj_key((__as_oak_string(i+1))))},back=function back(){return ((__oak_cond)=>__oak_eq(__oak_cond,0)?0:(i=(i-1)))(i)},next=function next(){return ((__oak_cond)=>__oak_eq(__oak_cond,len(s))?null:((c)=>((c=__oak_acc(s,__oak_obj_key((i)))),(i=__as_oak_string(i+1)),c))())(i)},expect__oak_qm=function expect__oak_qm(prefix=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?((i=__as_oak_string(i+len(prefix))),true):false)(startsWith__oak_qm(slice(s,i),prefix))},itemIndex=function itemIndex(list=null,it=null){return ((sub)=>(sub=function sub(i=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(i=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?((__oak_cond)=>__oak_eq(__oak_cond,it)?i:__oak_trampoline(__oak_trampolined_sub,__as_oak_string(i+1)))(__oak_acc(list,__oak_obj_key((i)))):-1)((i<len(list)))}),__oak_resolve_trampoline(__oak_trampolined_sub,i)))()},sub(0)))()},readUntil=function readUntil(c=null){let index;return ((__oak_cond)=>__oak_eq(__oak_cond,-1)?null:((substr)=>((substr=slice(s,i,__as_oak_string(i+index))),(i=__as_oak_string(i+index)),substr))())((index=itemIndex(slice(s,i),c)))},readUntilPrefix=function readUntilPrefix(prefix=null){return ((sub)=>(sub=function sub(index=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(index=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?((part)=>(((__oak_cond)=>__oak_eq(__oak_cond,prefix)?((substr)=>((substr=slice(s,i,index)),(i=index),substr))():__oak_trampoline(__oak_trampolined_sub,__as_oak_string(i+1)))((part=slice(s,index,__as_oak_string(index+len(prefix)))))))():null)((__as_oak_string(index+len(prefix))<=len(s)))}),__oak_resolve_trampoline(__oak_trampolined_sub,index)))()},sub(i)))()},readUntilEnd=function readUntilEnd(){return ((substr)=>((substr=slice(s,i)),(i=len(s)),substr))()},readUntilMatchingDelim=function readUntilMatchingDelim(left=null){return ((matchingDelimIdx,right,sub)=>((right=((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String('['))?__Oak_String(']'):__oak_eq(__oak_cond,__Oak_String('('))?__Oak_String(')'):null)(left)),sub=function sub(index=null,stack=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(index=null,stack=null){let c;return ((__oak_cond)=>__oak_eq(__oak_cond,0)?(index-1):((__oak_cond)=>__oak_eq(__oak_cond,null)?-1:__oak_eq(__oak_cond,left)?__oak_trampoline(__oak_trampolined_sub,__as_oak_string(index+1),__as_oak_string(stack+1)):__oak_eq(__oak_cond,right)?__oak_trampoline(__oak_trampolined_sub,__as_oak_string(index+1),(stack-1)):__oak_trampoline(__oak_trampolined_sub,__as_oak_string(index+1),stack))((c=__oak_acc(s,__oak_obj_key((index))))))(stack)}),__oak_resolve_trampoline(__oak_trampolined_sub,index,stack)))()},((__oak_cond)=>__oak_eq(__oak_cond,-1)?null:((substr)=>((substr=slice(s,i,matchingDelimIdx)),(i=matchingDelimIdx),substr))())((matchingDelimIdx=sub(i,1)))))()},({peek,last,back,next,expect__oak_qm,readUntil,readUntilPrefix,readUntilEnd,readUntilMatchingDelim})))()},uword__oak_qm=function uword__oak_qm(c=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?true:(codepoint(c)>127))(word__oak_qm(c))},tokenizeText=function tokenizeText(line=null){return ((append,next,peek,push,reader,sub,tokens)=>((reader=Reader(line)),(peek=(reader.peek??null)),(next=(reader.next??null)),(tokens=[__Oak_String('')]),push=function push(tok=null){return __oak_push(__oak_push(tokens,tok),__Oak_String(''))},append=function append(suffix=null){return __oak_push(__oak_acc(tokens,__oak_obj_key(((len(tokens)-1)))),suffix)},sub=function sub(){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(){let c;let d;return ((__oak_cond)=>__oak_eq(__oak_cond,null)?null:__oak_eq(__oak_cond,__Oak_String('_'))?(((__oak_cond)=>__oak_eq(__oak_cond,c)?(next(),push(__as_oak_string(c+c))):push(c))(peek()),__oak_trampoline(__oak_trampolined_sub)):__oak_eq(__oak_cond,__Oak_String('*'))?(((__oak_cond)=>__oak_eq(__oak_cond,c)?(next(),push(__as_oak_string(c+c))):push(c))(peek()),__oak_trampoline(__oak_trampolined_sub)):__oak_eq(__oak_cond,__Oak_String('\\'))?((__oak_cond)=>__oak_eq(__oak_cond,null)?null:__oak_trampoline(__oak_trampolined_sub,append(d)))((d=next())):__oak_eq(__oak_cond,__Oak_String('`'))?__oak_trampoline(__oak_trampolined_sub,push(c)):__oak_eq(__oak_cond,__Oak_String('~'))?__oak_trampoline(__oak_trampolined_sub,push(c)):__oak_eq(__oak_cond,__Oak_String('!'))?__oak_trampoline(__oak_trampolined_sub,push(c)):__oak_eq(__oak_cond,__Oak_String('['))?__oak_trampoline(__oak_trampolined_sub,push(c)):__oak_eq(__oak_cond,__Oak_String(']'))?__oak_trampoline(__oak_trampolined_sub,push(c)):__oak_eq(__oak_cond,__Oak_String('('))?__oak_trampoline(__oak_trampolined_sub,push(c)):__oak_eq(__oak_cond,__Oak_String(')'))?__oak_trampoline(__oak_trampolined_sub,push(c)):__oak_trampoline(__oak_trampolined_sub,append(c)))((c=next()))}),__oak_resolve_trampoline(__oak_trampolined_sub)))()},sub(),filter(tokens,function _(tok=null){return !__oak_eq(tok,__Oak_String(''))})))()},unifyTextNodes=function unifyTextNodes(nodes=null,joiner=null){return reduce(nodes,[],function _(acc=null,child=null){return ((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('string'))?((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('string'))?(__oak_push(__oak_push(__oak_acc(acc,__oak_obj_key(((len(acc)-1)))),joiner),child),acc):__oak_push(acc,child))(type(__oak_acc(acc,__oak_obj_key(((len(acc)-1)))))):__oak_push(acc,((__oak_cond)=>__oak_eq(__oak_cond,null)?child:((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign(children,__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt.children):(__oak_assgn_tgt.children)=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(child),unifyTextNodes((child.children??null),joiner)))((child.children??null))))(type(child))})},parseText=function parseText(tokens=null){return ((handleDelimitedRange,next,peek,readUntil,readUntilMatchingDelim,reader,sub)=>((reader=Reader(tokens)),(peek=(reader.peek??null)),(next=(reader.next??null)),(readUntil=(reader.readUntil??null)),(readUntilMatchingDelim=(reader.readUntilMatchingDelim??null)),handleDelimitedRange=function handleDelimitedRange(tok=null,tag=null,nodes=null,sub=null){let range;return ((__oak_cond)=>__oak_eq(__oak_cond,null)?sub(__oak_push(nodes,tok)):(next(),sub(__oak_push(nodes,({tag,children:parseText(range)})))))((range=readUntil(tok)))},sub=function sub(nodes=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(nodes=null){let c;let range;let tok;let urlRange;return ((__oak_cond)=>__oak_eq(__oak_cond,null)?nodes:__oak_eq(__oak_cond,__Oak_String('_'))?handleDelimitedRange(__Oak_String('_'),Symbol.for('em'),nodes,sub):__oak_eq(__oak_cond,__Oak_String('__'))?handleDelimitedRange(__Oak_String('__'),Symbol.for('strong'),nodes,sub):__oak_eq(__oak_cond,__Oak_String('*'))?handleDelimitedRange(__Oak_String('*'),Symbol.for('em'),nodes,sub):__oak_eq(__oak_cond,__Oak_String('**'))?handleDelimitedRange(__Oak_String('**'),Symbol.for('strong'),nodes,sub):__oak_eq(__oak_cond,__Oak_String('`'))?handleDelimitedRange(__Oak_String('`'),Symbol.for('code'),nodes,sub):__oak_eq(__oak_cond,__Oak_String('~'))?handleDelimitedRange(__Oak_String('~'),Symbol.for('strike'),nodes,sub):__oak_eq(__oak_cond,__Oak_String('['))?((__oak_cond)=>__oak_eq(__oak_cond,null)?__oak_trampoline(__oak_trampolined_sub,__oak_push(nodes,tok)):__oak_eq(__oak_cond,[__Oak_String('x')])?(next(),__oak_trampoline(__oak_trampolined_sub,__oak_push(nodes,({tag:Symbol.for('checkbox'),checked:true})))):__oak_eq(__oak_cond,[__Oak_String(' ')])?(next(),__oak_trampoline(__oak_trampolined_sub,__oak_push(nodes,({tag:Symbol.for('checkbox'),checked:false})))):((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String('('))?((__oak_cond)=>__oak_eq(__oak_cond,null)?__oak_trampoline(__oak_trampolined_sub,__oak_push(nodes,__as_oak_string(__as_oak_string(__as_oak_string(tok+join(range))+__Oak_String(']'))+c))):(next(),__oak_trampoline(__oak_trampolined_sub,__oak_push(nodes,({tag:Symbol.for('a'),href:join(urlRange),children:parseText(range)})))))((urlRange=readUntilMatchingDelim(c))):__oak_eq(__oak_cond,null)?__oak_trampoline(__oak_trampolined_sub,__oak_push(nodes,__as_oak_string(__as_oak_string(tok+join(range))+__Oak_String(']')))):__oak_trampoline(__oak_trampolined_sub,__oak_push(nodes,__as_oak_string(__as_oak_string(__as_oak_string(tok+join(range))+__Oak_String(']'))+c))))((c=(next(),next()))))((range=readUntilMatchingDelim(__Oak_String('[')))):__oak_eq(__oak_cond,__Oak_String('!'))?((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String('['))?((__oak_cond)=>__oak_eq(__oak_cond,null)?__oak_trampoline(__oak_trampolined_sub,__oak_push(nodes,__as_oak_string(tok+__Oak_String('[')))):__oak_eq(__oak_cond,[__Oak_String('x')])?(next(),__oak_trampoline(__oak_trampolined_sub,__oak_push(__oak_push(nodes,tok),({tag:Symbol.for('checkbox'),checked:true})))):__oak_eq(__oak_cond,[__Oak_String(' ')])?(next(),__oak_trampoline(__oak_trampolined_sub,__oak_push(__oak_push(nodes,tok),({tag:Symbol.for('checkbox'),checked:false})))):((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String('('))?((__oak_cond)=>__oak_eq(__oak_cond,null)?__oak_trampoline(__oak_trampolined_sub,__oak_push(nodes,__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(tok+__Oak_String('['))+join(range))+__Oak_String(']'))+c))):(next(),__oak_trampoline(__oak_trampolined_sub,__oak_push(nodes,({tag:Symbol.for('img'),alt:join(range),src:join(urlRange)})))))((urlRange=readUntilMatchingDelim(c))):__oak_eq(__oak_cond,null)?__oak_trampoline(__oak_trampolined_sub,__oak_push(nodes,__as_oak_string(__as_oak_string(__as_oak_string(tok+__Oak_String('['))+join(range))+__Oak_String(']')))):__oak_trampoline(__oak_trampolined_sub,__oak_push(nodes,__as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(tok+__Oak_String('['))+join(range))+__Oak_String(']'))+c))))((c=(next(),next()))))((range=(next(),readUntilMatchingDelim(__Oak_String('['))))):__oak_trampoline(__oak_trampolined_sub,__oak_push(nodes,tok)))(peek()):__oak_trampoline(__oak_trampolined_sub,__oak_push(nodes,tok)))((tok=next()))}),__oak_resolve_trampoline(__oak_trampolined_sub,nodes)))()},unifyTextNodes(sub([]),__Oak_String(''))))()},uListItemLine__oak_qm=function uListItemLine__oak_qm(line=null){return ((__oak_cond)=>__oak_eq(__oak_cond,null)?false:startsWith__oak_qm(trimStart(line),__Oak_String('- ')))(line)},oListItemLine__oak_qm=function oListItemLine__oak_qm(line=null){return ((__oak_cond)=>__oak_eq(__oak_cond,null)?false:((dotIdx,trimmedStart)=>((trimmedStart=trimStart(line)),((__oak_cond)=>__oak_eq(__oak_cond,-1)?false:__oak_eq(__oak_cond,0)?false:every(split(slice(trimmedStart,0,dotIdx)),digit__oak_qm))((dotIdx=indexOf(trimmedStart,__Oak_String('. '))))))())(line)},listItemLine__oak_qm=function listItemLine__oak_qm(line=null){return (__oak_left=>__oak_left===true?true:__oak_or(__oak_left,oListItemLine__oak_qm(line)))(uListItemLine__oak_qm(line))},trimUListGetLevel=function trimUListGetLevel(reader=null){return ((level)=>((level=len((reader.readUntil)(__Oak_String('-')))),(reader.next)(),(reader.next)(),level))()},trimOListGetLevel=function trimOListGetLevel(reader=null){return ((level,next,peek,sub)=>((peek=(reader.peek??null)),(next=(reader.next??null)),sub=function sub(i=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(i=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?(next(),__oak_trampoline(__oak_trampolined_sub,__as_oak_string(i+1))):i)(space__oak_qm(peek()))}),__oak_resolve_trampoline(__oak_trampolined_sub,i)))()},(level=sub(0)),(reader.readUntil)(__Oak_String('.')),next(),((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String(' '))?next():null)(peek()),level))()},lineNodeType=function lineNodeType(line=null){return ((__oak_cond)=>__oak_eq(__oak_cond,__oak_eq(line,null))?null:__oak_eq(__oak_cond,__oak_eq(line,__Oak_String('')))?Symbol.for('empty'):__oak_eq(__oak_cond,startsWith__oak_qm(line,__Oak_String('# ')))?Symbol.for('h1'):__oak_eq(__oak_cond,startsWith__oak_qm(line,__Oak_String('## ')))?Symbol.for('h2'):__oak_eq(__oak_cond,startsWith__oak_qm(line,__Oak_String('### ')))?Symbol.for('h3'):__oak_eq(__oak_cond,startsWith__oak_qm(line,__Oak_String('#### ')))?Symbol.for('h4'):__oak_eq(__oak_cond,startsWith__oak_qm(line,__Oak_String('##### ')))?Symbol.for('h5'):__oak_eq(__oak_cond,startsWith__oak_qm(line,__Oak_String('###### ')))?Symbol.for('h6'):__oak_eq(__oak_cond,startsWith__oak_qm(line,__Oak_String('>')))?Symbol.for('blockquote'):__oak_eq(__oak_cond,startsWith__oak_qm(line,__Oak_String('```')))?Symbol.for('pre'):__oak_eq(__oak_cond,startsWith__oak_qm(line,__Oak_String('---')))?Symbol.for('hr'):__oak_eq(__oak_cond,startsWith__oak_qm(line,__Oak_String('***')))?Symbol.for('hr'):__oak_eq(__oak_cond,startsWith__oak_qm(line,__Oak_String('!html')))?Symbol.for('rawHTML'):__oak_eq(__oak_cond,uListItemLine__oak_qm(line))?Symbol.for('ul'):__oak_eq(__oak_cond,oListItemLine__oak_qm(line))?Symbol.for('ol'):Symbol.for('p'))(true)},parse=function parse(text=null){return parseDoc(Reader(split(text,__Oak_String('\n'))))},parseDoc=function parseDoc(lineReader=null){return ((sub)=>(sub=function sub(doc=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(doc=null){let nodeType;return ((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('h1'))?__oak_trampoline(__oak_trampolined_sub,__oak_push(doc,parseHeader(nodeType,lineReader))):__oak_eq(__oak_cond,Symbol.for('h2'))?__oak_trampoline(__oak_trampolined_sub,__oak_push(doc,parseHeader(nodeType,lineReader))):__oak_eq(__oak_cond,Symbol.for('h3'))?__oak_trampoline(__oak_trampolined_sub,__oak_push(doc,parseHeader(nodeType,lineReader))):__oak_eq(__oak_cond,Symbol.for('h4'))?__oak_trampoline(__oak_trampolined_sub,__oak_push(doc,parseHeader(nodeType,lineReader))):__oak_eq(__oak_cond,Symbol.for('h5'))?__oak_trampoline(__oak_trampolined_sub,__oak_push(doc,parseHeader(nodeType,lineReader))):__oak_eq(__oak_cond,Symbol.for('h6'))?__oak_trampoline(__oak_trampolined_sub,__oak_push(doc,parseHeader(nodeType,lineReader))):__oak_eq(__oak_cond,Symbol.for('blockquote'))?__oak_trampoline(__oak_trampolined_sub,__oak_push(doc,parseBlockQuote(lineReader))):__oak_eq(__oak_cond,Symbol.for('pre'))?__oak_trampoline(__oak_trampolined_sub,__oak_push(doc,parseCodeBlock(lineReader))):__oak_eq(__oak_cond,Symbol.for('ul'))?__oak_trampoline(__oak_trampolined_sub,__oak_push(doc,parseList(lineReader,nodeType))):__oak_eq(__oak_cond,Symbol.for('ol'))?__oak_trampoline(__oak_trampolined_sub,__oak_push(doc,parseList(lineReader,nodeType))):__oak_eq(__oak_cond,Symbol.for('rawHTML'))?__oak_trampoline(__oak_trampolined_sub,__oak_push(doc,parseRawHTML(lineReader))):__oak_eq(__oak_cond,Symbol.for('p'))?__oak_trampoline(__oak_trampolined_sub,__oak_push(doc,parseParagraph(lineReader))):__oak_eq(__oak_cond,Symbol.for('hr'))?((lineReader.next)(),__oak_trampoline(__oak_trampolined_sub,__oak_push(doc,({tag:Symbol.for('hr')})))):__oak_eq(__oak_cond,Symbol.for('empty'))?((lineReader.next)(),__oak_trampoline(__oak_trampolined_sub,doc)):doc)((nodeType=lineNodeType((lineReader.peek)())))}),__oak_resolve_trampoline(__oak_trampolined_sub,doc)))()},sub([])))()},parseHeader=function parseHeader(nodeType=null,lineReader=null){return ((reader,text)=>((reader=Reader((lineReader.next)())),(reader.readUntil)(__Oak_String(' ')),(reader.next)(),(text=(reader.readUntilEnd)()),({tag:nodeType,children:parseText(tokenizeText(text))})))()},parseBlockQuote=function parseBlockQuote(lineReader=null){return ((BlockQuoteLineReader,next,peek)=>((peek=(lineReader.peek??null)),(next=(lineReader.next??null)),BlockQuoteLineReader=function BlockQuoteLineReader(lineReader=null){return ((back,expect__oak_qm,last,next,peek,readUntil,readUntilMatchingDelim,readUntilPrefix,returnIfQuoted)=>(returnIfQuoted=function returnIfQuoted(line=null){return ((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('blockquote'))?slice(line,1):null)(lineNodeType(line))},peek=function peek(){return returnIfQuoted((lineReader.peek)())},last=function last(){return returnIfQuoted((lineReader.last)())},back=function back(){return (lineReader.back)()},next=function next(){return ((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('blockquote'))?trimStart((lineReader.next)(),__Oak_String('>')):null)(lineNodeType((lineReader.peek)()))},expect__oak_qm=function expect__oak_qm(){return null},readUntil=function readUntil(c=null){return map((lineReader.readdUntil)(__oak_push(__Oak_String('>'),c)),function _(line=null){return slice(line,1)})},readUntilPrefix=function readUntilPrefix(prefix=null){return map((lineReader.readUntilPrefix)(__oak_push(__Oak_String('>'),c)),function _(line=null){return slice(line,1)})},readUntilMatchingDelim=function readUntilMatchingDelim(){return null},({peek,last,back,next,expect__oak_qm,readUntil,readUntilPrefix,readUntilEnd:(lineReader.readUntilEnd??null),readUntilMatchingDelim})))()},({tag:Symbol.for('blockquote'),children:parseDoc(BlockQuoteLineReader(lineReader))})))()},parseCodeBlock=function parseCodeBlock(lineReader=null){return ((children,lang,next,peek,rest,startTag,sub)=>((peek=(lineReader.peek??null)),(next=(lineReader.next??null)),(startTag=next()),(lang=((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String(''))?__Oak_String(''):rest)((rest=slice(startTag,3)))),sub=function sub(lines=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(lines=null){return ((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('pre'))?lines:__oak_eq(__oak_cond,null)?lines:__oak_trampoline(__oak_trampolined_sub,__oak_push(lines,next())))(lineNodeType(peek()))}),__oak_resolve_trampoline(__oak_trampolined_sub,lines)))()},(children=sub([])),next(),({tag:Symbol.for('pre'),children:[({tag:Symbol.for('code'),lang,children:unifyTextNodes(children,__Oak_String('\n'))})]})))()},parseRawHTML=function parseRawHTML(lineReader=null){return ((children,firstLine,next,peek,startMarkLine,sub)=>((peek=(lineReader.peek??null)),(next=(lineReader.next??null)),(startMarkLine=next()),(firstLine=slice(startMarkLine,len(__Oak_String('!html ')))),sub=function sub(lines=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(lines=null){return ((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('empty'))?lines:__oak_eq(__oak_cond,null)?lines:__oak_trampoline(__oak_trampolined_sub,__oak_push(lines,next())))(lineNodeType(peek()))}),__oak_resolve_trampoline(__oak_trampolined_sub,lines)))()},(children=sub([firstLine])),({tag:Symbol.for('rawHTML'),children:unifyTextNodes(children,__Oak_String('\n'))})))()},parseList=function parseList(lineReader=null,listType=null){return ((children,next,peek,sub)=>((peek=(lineReader.peek??null)),(next=(lineReader.next??null)),sub=function sub(items=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(items=null){return ((__oak_cond)=>__oak_eq(__oak_cond,false)?items:((lastItem,level,line,lineType,listItem,reader,text,trimmer)=>((line=next()),(lineType=lineNodeType(line)),(reader=Reader(line)),(trimmer=((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('ul'))?trimUListGetLevel:__oak_eq(__oak_cond,Symbol.for('ol'))?trimOListGetLevel:null)(lineType)),(level=trimmer(reader)),(text=(reader.readUntilEnd)()),(listItem=({tag:Symbol.for('li'),level,children:parseText(tokenizeText(text))})),((__oak_cond)=>__oak_eq(__oak_cond,null)?__oak_trampoline(__oak_trampolined_sub,__oak_push(items,listItem)):((__oak_cond)=>__oak_eq(__oak_cond,__oak_eq((lastItem.level??null),level))?((__oak_cond)=>__oak_eq(__oak_cond,listType)?__oak_trampoline(__oak_trampolined_sub,__oak_push(items,listItem)):((lineReader.back)(),items))(lineType):__oak_eq(__oak_cond,((lastItem.level??null)<level))?((list)=>((lineReader.back)(),(list=parseList(lineReader,lineType)),__oak_push((lastItem.children??null),list),__oak_trampoline(__oak_trampolined_sub,items)))():((lineReader.back)(),items))(true))((lastItem=__oak_acc(items,__oak_obj_key(((len(items)-1))))))))())(listItemLine__oak_qm(peek()))}),__oak_resolve_trampoline(__oak_trampolined_sub,items)))()},(children=sub([])),each(children,function _(child=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign(level,__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt.level):(__oak_assgn_tgt.level)=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(child),__Oak_Empty):null)(__oak_eq((child.tag??null),Symbol.for('li')))}),({tag:listType,children})))()},parseParagraph=function parseParagraph(lineReader=null){return ((next,peek,sub)=>((peek=(lineReader.peek??null)),(next=(lineReader.next??null)),sub=function sub(lines=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(lines=null){return ((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('p'))?((text)=>((text=next()),((__oak_cond)=>__oak_eq(__oak_cond,[true,__Oak_Empty])?(append(lines,parseText(tokenizeText(take(text,(len(text)-2))))),__oak_trampoline(__oak_trampolined_sub,__oak_push(lines,({tag:Symbol.for('br')})))):__oak_eq(__oak_cond,[__Oak_Empty,__Oak_String('\\')])?(append(lines,parseText(tokenizeText(take(text,(len(text)-1))))),__oak_trampoline(__oak_trampolined_sub,__oak_push(lines,({tag:Symbol.for('br')})))):__oak_trampoline(__oak_trampolined_sub,append(lines,parseText(tokenizeText(text)))))([endsWith__oak_qm(text,__Oak_String('  ')),__oak_acc(text,__oak_obj_key(((len(text)-1))))])))():lines)(lineNodeType(peek()))}),__oak_resolve_trampoline(__oak_trampolined_sub,lines)))()},({tag:Symbol.for('p'),children:unifyTextNodes(sub([]),__Oak_String(' '))})))()},compile=function compile(nodes=null){return join(map(nodes,compileNode))},wrap=function wrap(tag=null,node=null){return __oak_push(__oak_push(__oak_push(__oak_push(__oak_push(__oak_push(__Oak_String('<'),tag),__Oak_String('>')),compile((node.children??null))),__Oak_String('</')),tag),__Oak_String('>'))},sanitizeAttr=function sanitizeAttr(attr=null){return (map(attr,function _(c=null){return ((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String('<'))?__Oak_String('&lt;'):__oak_eq(__oak_cond,__Oak_String('\''))?__Oak_String('&apos;'):__oak_eq(__oak_cond,__Oak_String('"'))?__Oak_String('&quot;'):c)(c)}))},sanitizeURL=function sanitizeURL(url=null){return ((encodedURL)=>((encodedURL=lower(map(percentDecode(url),function _(c=null){return ((__oak_cond)=>__oak_eq(__oak_cond,word__oak_qm(c))?c:__oak_eq(__oak_cond,__oak_eq(c,__Oak_String('/')))?c:__oak_eq(__oak_cond,__oak_eq(c,__Oak_String(':')))?c:__Oak_String(''))(true)}))),((__oak_cond)=>__oak_eq(__oak_cond,startsWith__oak_qm(encodedURL,__Oak_String('javascript:')))?__Oak_String(''):__oak_eq(__oak_cond,startsWith__oak_qm(encodedURL,__Oak_String('data:')))?__Oak_String(''):sanitizeAttr(url))(true)))()},compileNode=function compileNode(node=null){return ((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('string'))?map(node,function _(c=null){return ((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String('&'))?__Oak_String('&amp;'):__oak_eq(__oak_cond,__Oak_String('<'))?__Oak_String('&lt;'):c)(c)}):((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('p'))?wrap(string((node.tag??null)),node):__oak_eq(__oak_cond,Symbol.for('em'))?wrap(string((node.tag??null)),node):__oak_eq(__oak_cond,Symbol.for('strong'))?wrap(string((node.tag??null)),node):__oak_eq(__oak_cond,Symbol.for('strike'))?wrap(string((node.tag??null)),node):__oak_eq(__oak_cond,Symbol.for('h1'))?wrap(string((node.tag??null)),node):__oak_eq(__oak_cond,Symbol.for('h2'))?wrap(string((node.tag??null)),node):__oak_eq(__oak_cond,Symbol.for('h3'))?wrap(string((node.tag??null)),node):__oak_eq(__oak_cond,Symbol.for('h4'))?wrap(string((node.tag??null)),node):__oak_eq(__oak_cond,Symbol.for('h5'))?wrap(string((node.tag??null)),node):__oak_eq(__oak_cond,Symbol.for('h6'))?wrap(string((node.tag??null)),node):__oak_eq(__oak_cond,Symbol.for('pre'))?wrap(string((node.tag??null)),node):__oak_eq(__oak_cond,Symbol.for('ul'))?wrap(string((node.tag??null)),node):__oak_eq(__oak_cond,Symbol.for('ol'))?wrap(string((node.tag??null)),node):__oak_eq(__oak_cond,Symbol.for('li'))?wrap(string((node.tag??null)),node):__oak_eq(__oak_cond,Symbol.for('blockquote'))?wrap(string((node.tag??null)),node):__oak_eq(__oak_cond,Symbol.for('a'))?format(__Oak_String('<a href="{{0}}">{{1}}</a>'),sanitizeURL((node.href??null)),compile((node.children??null))):__oak_eq(__oak_cond,Symbol.for('img'))?format(__Oak_String('<img alt="{{0}}" src="{{1}}"/>'),sanitizeAttr((node.alt??null)),sanitizeURL((node.src??null))):__oak_eq(__oak_cond,Symbol.for('code'))?((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String(''))?wrap(__Oak_String('code'),node):__oak_eq(__oak_cond,null)?wrap(__Oak_String('code'),node):format(__Oak_String('<code data-lang="{{0}}">{{1}}</code>'),sanitizeAttr((node.lang??null)),compile((node.children??null))))((node.lang??null)):__oak_eq(__oak_cond,Symbol.for('checkbox'))?__oak_push(__oak_push(__Oak_String('<input type="checkbox" '),((__oak_cond)=>__oak_eq(__oak_cond,true)?__Oak_String('checked'):__Oak_String(''))((node.checked??null))),__Oak_String('/>')):__oak_eq(__oak_cond,Symbol.for('br'))?__Oak_String('<br/>'):__oak_eq(__oak_cond,Symbol.for('hr'))?__Oak_String('<hr/>'):__oak_eq(__oak_cond,Symbol.for('rawHTML'))?__oak_acc((node.children??null),0):format(__Oak_String('<span style="color:red">Unknown Markdown node {{0}}</span>'),compileNode(string(node))))((node.tag??null)))(type(node))},transform=function transform(text=null){return compile(parse(text))},({Reader,append,compile,compileNode,digit__oak_qm,each,endsWith__oak_qm,every,filter,format,indexOf,join,letter__oak_qm,lineNodeType,listItemLine__oak_qm,lower,map,oListItemLine__oak_qm,parse,parseBlockQuote,parseCodeBlock,parseDoc,parseHeader,parseList,parseParagraph,parseRawHTML,parseText,percentDecode,reduce,replace,sanitizeAttr,sanitizeURL,slice,space__oak_qm,split,startsWith__oak_qm,take,tokenizeText,transform,trimOListGetLevel,trimStart,trimUListGetLevel,uListItemLine__oak_qm,unifyTextNodes,uword__oak_qm,word__oak_qm,wrap})))()}),__oak_modularize(__Oak_String('path'),function _(){return ((_lastSlash,abs__oak_qm,base,clean,cut,__oak_js_default,dir,filter,join,reduce,rel__oak_qm,resolve,slice,split,strJoin,strSplit,trimEnd)=>(({__oak_js_default,slice,filter,reduce}=__oak_module_import(__Oak_String('std'))),({join:strJoin=null,split:strSplit=null,trimEnd}=__oak_module_import(__Oak_String('str'))),abs__oak_qm=function abs__oak_qm(path=null){return __oak_eq(__oak_acc(path,0),__Oak_String('/'))},rel__oak_qm=function rel__oak_qm(path=null){return !__oak_eq(__oak_acc(path,0),__Oak_String('/'))},_lastSlash=function _lastSlash(path=null){return ((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String(''))?0:((sub)=>(sub=function sub(i=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(i=null){return ((__oak_cond)=>__oak_eq(__oak_cond,null)?i:__oak_eq(__oak_cond,__Oak_String('/'))?i:__oak_trampoline(__oak_trampolined_sub,(i-1)))(__oak_acc(path,__oak_obj_key((i))))}),__oak_resolve_trampoline(__oak_trampolined_sub,i)))()},sub((len(path)-1))))())(path)},dir=function dir(path=null){return ((path=trimEnd(path,__Oak_String('/'))),slice(path,0,_lastSlash(path)))},base=function base(path=null){return ((path=trimEnd(path,__Oak_String('/'))),slice(path,__as_oak_string(_lastSlash(path)+1)))},cut=function cut(path=null){return ((lastSlash)=>((path=trimEnd(path,__Oak_String('/'))),(lastSlash=_lastSlash(path)),[slice(path,0,lastSlash),slice(path,__as_oak_string(lastSlash+1))]))()},clean=function clean(path=null){return ((cleaned,rooted)=>((rooted=__oak_eq(__oak_acc(path,0),__Oak_String('/'))),(cleaned=strJoin(reduce(strSplit(path,__Oak_String('/')),[],function _(parts=null,part=null,i=null){return ((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String(''))?parts:__oak_eq(__oak_cond,__Oak_String('.'))?parts:__oak_eq(__oak_cond,__Oak_String('..'))?((__oak_cond)=>__oak_eq(__oak_cond,0)?__oak_push(parts,part):slice(parts,0,(len(parts)-1)))(i):__oak_push(parts,part))(part)}),__Oak_String('/'))),((__oak_cond)=>__oak_eq(__oak_cond,true)?__oak_push(__Oak_String('/'),cleaned):cleaned)(rooted)))()},join=function join(...parts){return clean(reduce(parts,__Oak_String(''),function _(base=null,path=null){return ((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String(''))?__oak_push(__Oak_String(''),path):__oak_push(__oak_push(base,__Oak_String('/')),path))(base)}))},split=function split(path=null){return ((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String(''))?[]:filter(strSplit(path,__Oak_String('/')),function _(s=null){return !__oak_eq(s,__Oak_String(''))}))(trimEnd(path,__Oak_String('/')))},resolve=function resolve(path=null,base=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?clean(path):join(__oak_js_default(base,(env().PWD??null)),path))(abs__oak_qm(path))},({_lastSlash,abs__oak_qm,base,clean,cut,__oak_js_default,dir,filter,join,reduce,rel__oak_qm,resolve,slice,split,strJoin,strSplit,trimEnd})))()}),__oak_modularize(__Oak_String('random'),function _(){return ((boolean,choice,integer,number)=>(boolean=function boolean(){return (rand()>0.5)},integer=function integer(min=null,max=null){return int(number(int(min),int(max)))},number=function number(min=null,max=null){return (((__oak_cond)=>__oak_eq(__oak_cond,true)?([min=null,max=null]=[0,min]):null)(__oak_eq(max,null)),__as_oak_string(min+(rand()*((max-min)))))},choice=function choice(list=null){return __oak_acc(list,__oak_obj_key((integer(0,len(list)))))},({boolean,choice,integer,number})))()}),__oak_modularize(__Oak_String('sort'),function _(){return ((clone,__oak_js_default,id,map,sort,sort__oak_exclam)=>(({__oak_js_default,identity:id=null,map,clone}=__oak_module_import(__Oak_String('std'))),sort__oak_exclam=function sort__oak_exclam(xs=null,pred=null){return ((partition,quicksort,vpred)=>((pred=__oak_js_default(pred,id)),(vpred=map(xs,pred)),partition=function partition(xs=null,lo=null,hi=null){return ((lsub,pivot,rsub,sub)=>((pivot=__oak_acc(vpred,__oak_obj_key((lo)))),lsub=function lsub(i=null){return ((__oak_trampolined_lsub)=>((__oak_trampolined_lsub=function _(i=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?__oak_trampoline(__oak_trampolined_lsub,__as_oak_string(i+1)):i)((__oak_acc(vpred,__oak_obj_key((i)))<pivot))}),__oak_resolve_trampoline(__oak_trampolined_lsub,i)))()},rsub=function rsub(j=null){return ((__oak_trampolined_rsub)=>((__oak_trampolined_rsub=function _(j=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?__oak_trampoline(__oak_trampolined_rsub,(j-1)):j)((__oak_acc(vpred,__oak_obj_key((j)))>pivot))}),__oak_resolve_trampoline(__oak_trampolined_rsub,j)))()},sub=function sub(i=null,j=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(i=null,j=null){return ((i=lsub(i)),(j=rsub(j)),((__oak_cond)=>__oak_eq(__oak_cond,false)?j:((tmp,tmpPred)=>((tmp=__oak_acc(xs,__oak_obj_key((i)))),(tmpPred=__oak_acc(vpred,__oak_obj_key((i)))),((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign((i),__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt[__oak_obj_key((i))]):(__oak_assgn_tgt[__oak_obj_key((i))])=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(xs),__oak_acc(xs,__oak_obj_key((j)))),((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign((j),__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt[__oak_obj_key((j))]):(__oak_assgn_tgt[__oak_obj_key((j))])=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(xs),tmp),((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign((i),__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt[__oak_obj_key((i))]):(__oak_assgn_tgt[__oak_obj_key((i))])=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(vpred),__oak_acc(vpred,__oak_obj_key((j)))),((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign((j),__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt[__oak_obj_key((j))]):(__oak_assgn_tgt[__oak_obj_key((j))])=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(vpred),tmpPred),__oak_trampoline(__oak_trampolined_sub,__as_oak_string(i+1),(j-1))))())((i<j)))}),__oak_resolve_trampoline(__oak_trampolined_sub,i,j)))()},sub(lo,hi)))()},quicksort=function quicksort(xs=null,lo=null,hi=null){return ((__oak_trampolined_quicksort)=>((__oak_trampolined_quicksort=function _(xs=null,lo=null,hi=null){return ((__oak_cond)=>__oak_eq(__oak_cond,0)?xs:__oak_eq(__oak_cond,1)?xs:((__oak_cond)=>__oak_eq(__oak_cond,false)?xs:((p)=>((p=partition(xs,lo,hi)),quicksort(xs,lo,p),__oak_trampoline(__oak_trampolined_quicksort,xs,__as_oak_string(p+1),hi)))())((lo<hi)))(len(xs))}),__oak_resolve_trampoline(__oak_trampolined_quicksort,xs,lo,hi)))()},quicksort(xs,0,(len(xs)-1))))()},sort=function sort(xs=null,pred=null){return sort__oak_exclam(clone(xs),pred)},({clone,__oak_js_default,id,map,sort,sort__oak_exclam})))()}),__oak_modularize(__Oak_String('std'),function _(){return ((_asPredicate,_baseIterator,_hToN,_nToH,aloop,append,clamp,clone,compact,constantly,contains__oak_qm,debounce,__oak_js_default,each,entries,every,exclude,filter,find,first,flatten,fromEntries,fromHex,identity,indexOf,is,join,last,loop,map,merge,once,parallel,partition,println,range,reduce,reverse,rfind,rindexOf,separate,serial,slice,some,stdin,take,takeLast,toHex,uniq,values,zip)=>(identity=function identity(x=null){return x},is=function is(x=null){return function _(y=null){return __oak_eq(x,y)}},constantly=function constantly(x=null){return function _(){return x}},_baseIterator=function _baseIterator(v=null){return ((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('string'))?__Oak_String(''):__oak_eq(__oak_cond,Symbol.for('list'))?[]:__oak_eq(__oak_cond,Symbol.for('object'))?({}):null)(type(v))},_asPredicate=function _asPredicate(pred=null){return ((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('atom'))?((prop)=>((prop=string(pred)),function _(x=null){return __oak_acc(x,__oak_obj_key((prop)))}))():__oak_eq(__oak_cond,Symbol.for('string'))?function _(x=null){return __oak_acc(x,__oak_obj_key((pred)))}:__oak_eq(__oak_cond,Symbol.for('int'))?function _(x=null){return __oak_acc(x,__oak_obj_key((pred)))}:pred)(type(pred))},__oak_js_default=function __oak_js_default(x=null,base=null){return ((__oak_cond)=>__oak_eq(__oak_cond,null)?base:x)(x)},(_nToH=__Oak_String('0123456789abcdef')),toHex=function toHex(n=null){return ((sub)=>(sub=function sub(p=null,acc=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(p=null,acc=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?__as_oak_string(__oak_acc(_nToH,__oak_obj_key((p)))+acc):__oak_trampoline(__oak_trampolined_sub,int((p/16)),__as_oak_string(__oak_acc(_nToH,__oak_obj_key(((p%16))))+acc)))((p<16))}),__oak_resolve_trampoline(__oak_trampolined_sub,p,acc)))()},sub(int(n),__Oak_String(''))))()},(_hToN=({0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15})),fromHex=function fromHex(s=null){return ((sub)=>(sub=function sub(i=null,acc=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(i=null,acc=null){let next;return ((__oak_cond)=>__oak_eq(__oak_cond,__oak_eq(i,len(s)))?acc:__oak_eq(__oak_cond,!__oak_eq(null,(next=__oak_acc(_hToN,__oak_obj_key((__oak_acc(s,__oak_obj_key((i)))))))))?__oak_trampoline(__oak_trampolined_sub,__as_oak_string(i+1),__as_oak_string((acc*16)+next)):null)(true)}),__oak_resolve_trampoline(__oak_trampolined_sub,i,acc)))()},sub(0,0)))()},clamp=function clamp(min=null,max=null,n=null,m=null){return ((n=((__oak_cond)=>__oak_eq(__oak_cond,true)?min:n)((n<min))),(m=((__oak_cond)=>__oak_eq(__oak_cond,true)?min:m)((m<min))),(m=((__oak_cond)=>__oak_eq(__oak_cond,true)?max:m)((m>max))),(n=((__oak_cond)=>__oak_eq(__oak_cond,true)?m:n)((n>m))),[n,m])},slice=function slice(xs=null,min=null,max=null){return ((sub)=>((min=__oak_js_default(min,0)),(max=__oak_js_default(max,len(xs))),([min=null,max=null]=clamp(0,len(xs),min,max)),sub=function sub(acc=null,i=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(acc=null,i=null){return ((__oak_cond)=>__oak_eq(__oak_cond,max)?acc:__oak_trampoline(__oak_trampolined_sub,__oak_push(acc,__oak_acc(xs,__oak_obj_key((i)))),__as_oak_string(i+1)))(i)}),__oak_resolve_trampoline(__oak_trampolined_sub,acc,i)))()},sub(_baseIterator(xs),min)))()},clone=function clone(x=null){return ((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('string'))?__as_oak_string(__Oak_String('')+x):__oak_eq(__oak_cond,Symbol.for('list'))?slice(x):__oak_eq(__oak_cond,Symbol.for('object'))?reduce(keys(x),({}),function _(acc=null,key=null){return ((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign((key),__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt[__oak_obj_key((key))]):(__oak_assgn_tgt[__oak_obj_key((key))])=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(acc),__oak_acc(x,__oak_obj_key((key))))}):x)(type(x))},range=function range(start=null,end=null,step=null){return ((step=__oak_js_default(step,1)),((__oak_cond)=>__oak_eq(__oak_cond,true)?([start=null,end=null]=[0,start]):null)(__oak_eq(end,null)),((__oak_cond)=>__oak_eq(__oak_cond,0)?[]:((list,sub)=>((list=[]),((__oak_cond)=>__oak_eq(__oak_cond,true)?sub=function sub(n=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(n=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?(__oak_push(list,n),__oak_trampoline(__oak_trampolined_sub,__as_oak_string(n+step))):list)((n<end))}),__oak_resolve_trampoline(__oak_trampolined_sub,n)))()}:sub=function sub(n=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(n=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?(__oak_push(list,n),__oak_trampoline(__oak_trampolined_sub,__as_oak_string(n+step))):list)((n>end))}),__oak_resolve_trampoline(__oak_trampolined_sub,n)))()})((step>0)),sub(start)))())(step))},reverse=function reverse(xs=null){return ((sub)=>(sub=function sub(acc=null,i=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(acc=null,i=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?acc:__oak_trampoline(__oak_trampolined_sub,__oak_push(acc,__oak_acc(xs,__oak_obj_key((i)))),(i-1)))((i<0))}),__oak_resolve_trampoline(__oak_trampolined_sub,acc,i)))()},sub(_baseIterator(xs),(len(xs)-1))))()},map=function map(xs=null,f=null){return ((sub)=>((f=_asPredicate(f)),sub=function sub(acc=null,i=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(acc=null,i=null){return ((__oak_cond)=>__oak_eq(__oak_cond,len(xs))?acc:__oak_trampoline(__oak_trampolined_sub,__oak_push(acc,f(__oak_acc(xs,__oak_obj_key((i))),i)),__as_oak_string(i+1)))(i)}),__oak_resolve_trampoline(__oak_trampolined_sub,acc,i)))()},sub(_baseIterator(xs),0)))()},each=function each(xs=null,f=null){return ((sub)=>(sub=function sub(i=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(i=null){return ((__oak_cond)=>__oak_eq(__oak_cond,len(xs))?null:(f(__oak_acc(xs,__oak_obj_key((i))),i),__oak_trampoline(__oak_trampolined_sub,__as_oak_string(i+1))))(i)}),__oak_resolve_trampoline(__oak_trampolined_sub,i)))()},sub(0)))()},filter=function filter(xs=null,f=null){return ((sub)=>((f=_asPredicate(f)),sub=function sub(acc=null,i=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(acc=null,i=null){return ((__oak_cond)=>__oak_eq(__oak_cond,len(xs))?acc:((x)=>(((__oak_cond)=>__oak_eq(__oak_cond,true)?__oak_push(acc,x):null)(f((x=__oak_acc(xs,__oak_obj_key((i)))),i)),__oak_trampoline(__oak_trampolined_sub,acc,__as_oak_string(i+1))))())(i)}),__oak_resolve_trampoline(__oak_trampolined_sub,acc,i)))()},sub(_baseIterator(xs),0)))()},exclude=function exclude(xs=null,f=null){return ((sub)=>((f=_asPredicate(f)),sub=function sub(acc=null,i=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(acc=null,i=null){return ((__oak_cond)=>__oak_eq(__oak_cond,len(xs))?acc:((x)=>(((__oak_cond)=>__oak_eq(__oak_cond,true)?__oak_push(acc,x):null)(!f((x=__oak_acc(xs,__oak_obj_key((i)))),i)),__oak_trampoline(__oak_trampolined_sub,acc,__as_oak_string(i+1))))())(i)}),__oak_resolve_trampoline(__oak_trampolined_sub,acc,i)))()},sub(_baseIterator(xs),0)))()},separate=function separate(xs=null,f=null){return ((sub)=>((f=_asPredicate(f)),sub=function sub(is=null,isnt=null,i=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(is=null,isnt=null,i=null){return ((__oak_cond)=>__oak_eq(__oak_cond,len(xs))?[is,isnt]:((x)=>(((__oak_cond)=>__oak_eq(__oak_cond,true)?__oak_push(is,x):__oak_push(isnt,x))(f((x=__oak_acc(xs,__oak_obj_key((i)))),i)),__oak_trampoline(__oak_trampolined_sub,is,isnt,__as_oak_string(i+1))))())(i)}),__oak_resolve_trampoline(__oak_trampolined_sub,is,isnt,i)))()},sub(_baseIterator(xs),_baseIterator(xs),0)))()},reduce=function reduce(xs=null,seed=null,f=null){return ((sub)=>(sub=function sub(acc=null,i=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(acc=null,i=null){return ((__oak_cond)=>__oak_eq(__oak_cond,len(xs))?acc:__oak_trampoline(__oak_trampolined_sub,f(acc,__oak_acc(xs,__oak_obj_key((i))),i),__as_oak_string(i+1)))(i)}),__oak_resolve_trampoline(__oak_trampolined_sub,acc,i)))()},sub(seed,0)))()},flatten=function flatten(xs=null){return reduce(xs,[],append)},compact=function compact(xs=null){return filter(xs,function _(x=null){return !__oak_eq(x,null)})},some=function some(xs=null,pred=null){return ((pred=__oak_js_default(pred,identity)),reduce(xs,false,function _(acc=null,x=null,i=null){return (__oak_left=>__oak_left===true?true:__oak_or(__oak_left,pred(x,i)))(acc)}))},every=function every(xs=null,pred=null){return ((pred=__oak_js_default(pred,identity)),reduce(xs,true,function _(acc=null,x=null,i=null){return (__oak_left=>__oak_left===false?false:__oak_and(__oak_left,pred(x,i)))(acc)}))},append=function append(xs=null,ys=null){return reduce(ys,xs,function _(zs=null,y=null){return __oak_push(zs,y)})},join=function join(xs=null,ys=null){return append(clone(xs),ys)},zip=function zip(xs=null,ys=null,zipper=null){return ((max,sub)=>((zipper=__oak_js_default(zipper,function _(x=null,y=null){return [x,y]})),(max=((__oak_cond)=>__oak_eq(__oak_cond,true)?len(xs):len(ys))((len(xs)<len(ys)))),sub=function sub(acc=null,i=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(acc=null,i=null){return ((__oak_cond)=>__oak_eq(__oak_cond,max)?acc:__oak_trampoline(__oak_trampolined_sub,__oak_push(acc,zipper(__oak_acc(xs,__oak_obj_key((i))),__oak_acc(ys,__oak_obj_key((i))),i)),__as_oak_string(i+1)))(i)}),__oak_resolve_trampoline(__oak_trampolined_sub,acc,i)))()},sub([],0)))()},partition=function partition(xs=null,by=null){return ((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('int'))?reduce(xs,[],function _(acc=null,x=null,i=null){return ((__oak_cond)=>__oak_eq(__oak_cond,0)?__oak_push(acc,[x]):(__oak_push(__oak_acc(acc,__oak_obj_key(((len(acc)-1)))),x),acc))((i%by))}):__oak_eq(__oak_cond,Symbol.for('function'))?((last)=>((last=function _(){return null}),reduce(xs,[],function _(acc=null,x=null){return ((__oak_js_this)=>(((__oak_cond)=>__oak_eq(__oak_cond,last)?__oak_push(__oak_acc(acc,__oak_obj_key(((len(acc)-1)))),x):__oak_push(acc,[x]))((__oak_js_this=by(x))),(last=__oak_js_this),acc))()})))():null)(type(by))},uniq=function uniq(xs=null,pred=null){return ((last,sub,ys)=>((pred=__oak_js_default(pred,identity)),(ys=_baseIterator(xs)),(last=function _(){return null}),sub=function sub(i=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(i=null){let p;let x;return ((__oak_cond)=>__oak_eq(__oak_cond,len(xs))?ys:((__oak_cond)=>__oak_eq(__oak_cond,last)?__oak_trampoline(__oak_trampolined_sub,__as_oak_string(i+1)):(__oak_push(ys,x),(last=p),__oak_trampoline(__oak_trampolined_sub,__as_oak_string(i+1))))((p=pred((x=__oak_acc(xs,__oak_obj_key((i))))))))(i)}),__oak_resolve_trampoline(__oak_trampolined_sub,i)))()},sub(0)))()},first=function first(xs=null){return __oak_acc(xs,0)},last=function last(xs=null){return __oak_acc(xs,__oak_obj_key(((len(xs)-1))))},take=function take(xs=null,n=null){return slice(xs,0,n)},takeLast=function takeLast(xs=null,n=null){return slice(xs,(len(xs)-n))},find=function find(xs=null,pred=null){return ((sub)=>(sub=function sub(i=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(i=null){return ((__oak_cond)=>__oak_eq(__oak_cond,len(xs))?-1:((__oak_cond)=>__oak_eq(__oak_cond,true)?i:__oak_trampoline(__oak_trampolined_sub,__as_oak_string(i+1)))(pred(__oak_acc(xs,__oak_obj_key((i))))))(i)}),__oak_resolve_trampoline(__oak_trampolined_sub,i)))()},sub(0)))()},rfind=function rfind(xs=null,pred=null){return ((sub)=>(sub=function sub(i=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(i=null){return ((__oak_cond)=>__oak_eq(__oak_cond,-1)?-1:((__oak_cond)=>__oak_eq(__oak_cond,true)?i:__oak_trampoline(__oak_trampolined_sub,(i-1)))(pred(__oak_acc(xs,__oak_obj_key((i))))))(i)}),__oak_resolve_trampoline(__oak_trampolined_sub,i)))()},sub((len(xs)-1))))()},indexOf=function indexOf(xs=null,x=null){return ((sub)=>(sub=function sub(i=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(i=null){return ((__oak_cond)=>__oak_eq(__oak_cond,len(xs))?-1:((__oak_cond)=>__oak_eq(__oak_cond,x)?i:__oak_trampoline(__oak_trampolined_sub,__as_oak_string(i+1)))(__oak_acc(xs,__oak_obj_key((i)))))(i)}),__oak_resolve_trampoline(__oak_trampolined_sub,i)))()},sub(0)))()},rindexOf=function rindexOf(xs=null,x=null){return ((sub)=>(sub=function sub(i=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(i=null){return ((__oak_cond)=>__oak_eq(__oak_cond,-1)?-1:((__oak_cond)=>__oak_eq(__oak_cond,x)?i:__oak_trampoline(__oak_trampolined_sub,(i-1)))(__oak_acc(xs,__oak_obj_key((i)))))(i)}),__oak_resolve_trampoline(__oak_trampolined_sub,i)))()},sub((len(xs)-1))))()},contains__oak_qm=function contains__oak_qm(xs=null,x=null){return (indexOf(xs,x)>-1)},values=function values(obj=null){return map(keys(obj),function _(key=null){return __oak_acc(obj,__oak_obj_key((key)))})},entries=function entries(obj=null){return map(keys(obj),function _(key=null){return [key,__oak_acc(obj,__oak_obj_key((key)))]})},fromEntries=function fromEntries(entries=null){return reduce(entries,({}),function _(o=null,entry=null){return ((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign((__oak_acc(entry,0)),__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt[__oak_obj_key((__oak_acc(entry,0)))]):(__oak_assgn_tgt[__oak_obj_key((__oak_acc(entry,0)))])=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(o),__oak_acc(entry,1))})},merge=function merge(...os){return ((__oak_cond)=>__oak_eq(__oak_cond,0)?null:reduce(os,__oak_acc(os,0),function _(acc=null,o=null){return (reduce(keys(o),acc,function _(root=null,k=null){return ((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign((k),__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt[__oak_obj_key((k))]):(__oak_assgn_tgt[__oak_obj_key((k))])=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(root),__oak_acc(o,__oak_obj_key((k))))}))}))(len(os))},once=function once(f=null){return ((called__oak_qm)=>((called__oak_qm=false),function _(...args){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?((called__oak_qm=true),f(...args)):null)(!called__oak_qm)}))()},loop=function loop(max=null,f=null){return ((breaker,broken,ret,sub)=>(((__oak_cond)=>__oak_eq(__oak_cond,true)?([max=null,f=null]=[-1,max]):null)(__oak_eq(type(max),Symbol.for('function'))),(max=__oak_js_default(max,-1)),(ret=null),(broken=false),breaker=function breaker(x=null){return ((ret=x),(broken=true))},sub=function sub(count=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(count=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?((__oak_cond)=>__oak_eq(__oak_cond,broken)?ret:(f(count,breaker),__oak_trampoline(__oak_trampolined_sub,__as_oak_string(count+1))))(true):null)(!__oak_eq(count,max))}),__oak_resolve_trampoline(__oak_trampolined_sub,count)))()},sub(0)))()},aloop=function aloop(max=null,f=null,done=null){return ((sub)=>(((__oak_cond)=>__oak_eq(__oak_cond,true)?([max=null,f=null,done=null]=[-1,max,f]):null)(__oak_eq(type(max),Symbol.for('function'))),(max=__oak_js_default(max,-1)),(done=__oak_js_default(done,function _(){return null})),sub=function sub(count=null){return ((__oak_cond)=>__oak_eq(__oak_cond,max)?done():f(count,function _(){return sub(__as_oak_string(count+1))},done))(count)},sub(0)))()},serial=function serial(xs=null,f=null,done=null){return ((sub)=>((done=__oak_js_default(done,function _(){return null})),sub=function sub(i=null){return ((__oak_cond)=>__oak_eq(__oak_cond,len(xs))?done():f(__oak_acc(xs,__oak_obj_key((i))),i,function _(){return sub(__as_oak_string(i+1))},done))(i)},sub(0)))()},parallel=function parallel(xs=null,f=null,done=null){return ((broken__oak_qm,count)=>((done=__oak_js_default(done,function _(){return null})),(count=0),(broken__oak_qm=false),each(xs,function _(x=null,i=null){return (f(x,i,function _(){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?((count=__as_oak_string(count+1)),((__oak_cond)=>__oak_eq(__oak_cond,true)?done():null)(__oak_eq(count,len(xs)))):null)(!broken__oak_qm)},function _(){return ((broken__oak_qm=true),done())}))})))()},debounce=function debounce(duration=null,firstCall=null,f=null){return ((dargs,debounced,target,waiting__oak_qm)=>(((__oak_cond)=>__oak_eq(__oak_cond,true)?([firstCall=null,f=null]=[Symbol.for('trailing'),firstCall]):null)(__oak_eq(f,null)),(dargs=null),(waiting__oak_qm=false),(target=(time()-duration)),debounced=function debounced(...args){return ((tcall)=>((tcall=time()),(dargs=args),((__oak_cond)=>__oak_eq(__oak_cond,true)?((__oak_cond)=>__oak_eq(__oak_cond,true)?((target=__as_oak_string(tcall+duration)),((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('leading'))?f(...dargs):__oak_eq(__oak_cond,Symbol.for('trailing'))?((waiting__oak_qm=true),wait((target-time()),function _(){return ((waiting__oak_qm=false),f(...dargs))})):null)(firstCall)):((timeout)=>((waiting__oak_qm=true),(timeout=(target-tcall)),(target=__as_oak_string(target+duration)),wait(timeout,function _(){return ((waiting__oak_qm=false),f(...dargs))})))())((target<=tcall)):null)(!waiting__oak_qm)))()}))()},stdin=function stdin(){return ((file)=>((file=__Oak_String('')),loop(function _(__oak_empty_ident0=null,__oak_js_break=null){return ((evt)=>((evt=input()),__oak_push(file,(evt.data??null)),((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('error'))?__oak_js_break(file):__oak_push(file,__Oak_String('\n')))((evt.type??null))))()})))()},println=function println(...xs){return ((__oak_cond)=>__oak_eq(__oak_cond,0)?print(__Oak_String('\n')):((out)=>((out=reduce(slice(xs,1),string(__oak_acc(xs,0)),function _(acc=null,x=null){return (__as_oak_string(__as_oak_string(acc+__Oak_String(' '))+string(x)))})),print(__as_oak_string(out+__Oak_String('\n')))))())(len(xs))},({_asPredicate,_baseIterator,_hToN,_nToH,aloop,append,clamp,clone,compact,constantly,contains__oak_qm,debounce,__oak_js_default,each,entries,every,exclude,filter,find,first,flatten,fromEntries,fromHex,identity,indexOf,is,join,last,loop,map,merge,once,parallel,partition,println,range,reduce,reverse,rfind,rindexOf,separate,serial,slice,some,stdin,take,takeLast,toHex,uniq,values,zip})))()}),__oak_modularize(__Oak_String('str'),function _(){return ((_extend,_matchesAt__oak_qm,_replaceNonEmpty,_splitNonEmpty,_trimEndNonEmpty,_trimEndSpace,_trimStartNonEmpty,_trimStartSpace,checkRange,contains__oak_qm,cut,__oak_js_default,digit__oak_qm,endsWith__oak_qm,indexOf,join,letter__oak_qm,lower,lower__oak_qm,padEnd,padStart,reduce,replace,slice,space__oak_qm,split,startsWith__oak_qm,take,takeLast,trim,trimEnd,trimStart,upper,upper__oak_qm,word__oak_qm)=>(({__oak_js_default,slice,take,takeLast,reduce}=__oak_module_import(__Oak_String('std'))),checkRange=function checkRange(lo=null,hi=null){let checker;return checker=function checker(c=null){return ((p)=>((p=codepoint(c)),(__oak_left=>__oak_left===false?false:__oak_and(__oak_left,(p<=hi)))((lo<=p))))()}},upper__oak_qm=function upper__oak_qm(c=null){return (__oak_left=>__oak_left===false?false:__oak_and(__oak_left,(c<=__Oak_String('Z'))))((c>=__Oak_String('A')))},lower__oak_qm=function lower__oak_qm(c=null){return (__oak_left=>__oak_left===false?false:__oak_and(__oak_left,(c<=__Oak_String('z'))))((c>=__Oak_String('a')))},digit__oak_qm=function digit__oak_qm(c=null){return (__oak_left=>__oak_left===false?false:__oak_and(__oak_left,(c<=__Oak_String('9'))))((c>=__Oak_String('0')))},space__oak_qm=function space__oak_qm(c=null){return ((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String(' '))?true:__oak_eq(__oak_cond,__Oak_String('\t'))?true:__oak_eq(__oak_cond,__Oak_String('\n'))?true:__oak_eq(__oak_cond,__Oak_String('\r'))?true:__oak_eq(__oak_cond,__Oak_String('\f'))?true:false)(c)},letter__oak_qm=function letter__oak_qm(c=null){return (__oak_left=>__oak_left===true?true:__oak_or(__oak_left,lower__oak_qm(c)))(upper__oak_qm(c))},word__oak_qm=function word__oak_qm(c=null){return (__oak_left=>__oak_left===true?true:__oak_or(__oak_left,digit__oak_qm(c)))(letter__oak_qm(c))},join=function join(strings=null,joiner=null){return ((joiner=__oak_js_default(joiner,__Oak_String(''))),((__oak_cond)=>__oak_eq(__oak_cond,0)?__Oak_String(''):reduce(slice(strings,1),__oak_acc(strings,0),function _(a=null,b=null){return __as_oak_string(__as_oak_string(a+joiner)+b)}))(len(strings)))},startsWith__oak_qm=function startsWith__oak_qm(s=null,prefix=null){return __oak_eq(take(s,len(prefix)),prefix)},endsWith__oak_qm=function endsWith__oak_qm(s=null,suffix=null){return __oak_eq(takeLast(s,len(suffix)),suffix)},_matchesAt__oak_qm=function _matchesAt__oak_qm(s=null,substr=null,idx=null){return ((__oak_cond)=>__oak_eq(__oak_cond,0)?true:__oak_eq(__oak_cond,1)?__oak_eq(__oak_acc(s,__oak_obj_key((idx))),substr):((max,sub)=>((max=len(substr)),sub=function sub(i=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(i=null){return ((__oak_cond)=>__oak_eq(__oak_cond,max)?true:((__oak_cond)=>__oak_eq(__oak_cond,__oak_acc(substr,__oak_obj_key((i))))?__oak_trampoline(__oak_trampolined_sub,__as_oak_string(i+1)):false)(__oak_acc(s,__oak_obj_key((__as_oak_string(idx+i))))))(i)}),__oak_resolve_trampoline(__oak_trampolined_sub,i)))()},sub(0)))())(len(substr))},indexOf=function indexOf(s=null,substr=null){return ((max,sub)=>((max=(len(s)-len(substr))),sub=function sub(i=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(i=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?i:((__oak_cond)=>__oak_eq(__oak_cond,true)?__oak_trampoline(__oak_trampolined_sub,__as_oak_string(i+1)):-1)((i<max)))(_matchesAt__oak_qm(s,substr,i))}),__oak_resolve_trampoline(__oak_trampolined_sub,i)))()},sub(0)))()},contains__oak_qm=function contains__oak_qm(s=null,substr=null){return (indexOf(s,substr)>=0)},cut=function cut(s=null,sep=null){let idx;return ((__oak_cond)=>__oak_eq(__oak_cond,-1)?[s,__Oak_String('')]:[slice(s,0,idx),slice(s,__as_oak_string(idx+len(sep)))])((idx=indexOf(s,sep)))},lower=function lower(s=null){return reduce(s,__Oak_String(''),function _(acc=null,c=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?__oak_push(acc,char(__as_oak_string(codepoint(c)+32))):__oak_push(acc,c))(upper__oak_qm(c))})},upper=function upper(s=null){return reduce(s,__Oak_String(''),function _(acc=null,c=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?__oak_push(acc,char((codepoint(c)-32))):__oak_push(acc,c))(lower__oak_qm(c))})},_replaceNonEmpty=function _replaceNonEmpty(s=null,old=null,__oak_js_new=null){return ((lnew,lold,sub)=>((lold=len(old)),(lnew=len(__oak_js_new)),sub=function sub(acc=null,i=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(acc=null,i=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?__oak_trampoline(__oak_trampolined_sub,__as_oak_string(__as_oak_string(slice(acc,0,i)+__oak_js_new)+slice(acc,__as_oak_string(i+lold))),__as_oak_string(i+lnew)):((__oak_cond)=>__oak_eq(__oak_cond,true)?__oak_trampoline(__oak_trampolined_sub,acc,__as_oak_string(i+1)):acc)((i<len(acc))))(_matchesAt__oak_qm(acc,old,i))}),__oak_resolve_trampoline(__oak_trampolined_sub,acc,i)))()},sub(s,0)))()},replace=function replace(s=null,old=null,__oak_js_new=null){return ((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String(''))?s:_replaceNonEmpty(s,old,__oak_js_new))(old)},_splitNonEmpty=function _splitNonEmpty(s=null,sep=null){return ((coll,lsep,sub)=>((coll=[]),(lsep=len(sep)),sub=function sub(acc=null,i=null,last=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(acc=null,i=null,last=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?(__oak_push(coll,slice(acc,last,i)),__oak_trampoline(__oak_trampolined_sub,acc,__as_oak_string(i+lsep),__as_oak_string(i+lsep))):((__oak_cond)=>__oak_eq(__oak_cond,true)?__oak_trampoline(__oak_trampolined_sub,acc,__as_oak_string(i+1),last):__oak_push(coll,slice(acc,last)))((i<len(acc))))(_matchesAt__oak_qm(acc,sep,i))}),__oak_resolve_trampoline(__oak_trampolined_sub,acc,i,last)))()},sub(s,0,0)))()},split=function split(s=null,sep=null){return ((__oak_cond)=>__oak_eq(__oak_cond,null)?reduce(s,[],function _(acc=null,c=null){return __oak_push(acc,c)}):__oak_eq(__oak_cond,__Oak_String(''))?reduce(s,[],function _(acc=null,c=null){return __oak_push(acc,c)}):_splitNonEmpty(s,sep))(sep)},_extend=function _extend(pad=null,n=null){return ((part,sub,times)=>((times=int((n/len(pad)))),(part=(n%len(pad))),sub=function sub(base=null,i=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(base=null,i=null){return ((__oak_cond)=>__oak_eq(__oak_cond,0)?__oak_push(base,slice(pad,0,part)):__oak_trampoline(__oak_trampolined_sub,__oak_push(base,pad),(i-1)))(i)}),__oak_resolve_trampoline(__oak_trampolined_sub,base,i)))()},sub(__Oak_String(''),times)))()},padStart=function padStart(s=null,n=null,pad=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?s:__oak_push(_extend(pad,(n-len(s))),s))((len(s)>=n))},padEnd=function padEnd(s=null,n=null,pad=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?s:__as_oak_string(s+_extend(pad,(n-len(s)))))((len(s)>=n))},_trimStartSpace=function _trimStartSpace(s=null){return ((firstNonSpace,subStart)=>(subStart=function subStart(i=null){return ((__oak_trampolined_subStart)=>((__oak_trampolined_subStart=function _(i=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?__oak_trampoline(__oak_trampolined_subStart,__as_oak_string(i+1)):i)(space__oak_qm(__oak_acc(s,__oak_obj_key((i)))))}),__oak_resolve_trampoline(__oak_trampolined_subStart,i)))()},(firstNonSpace=subStart(0)),slice(s,firstNonSpace)))()},_trimStartNonEmpty=function _trimStartNonEmpty(s=null,prefix=null){return ((idx,lpref,max,sub)=>((max=len(s)),(lpref=len(prefix)),sub=function sub(i=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(i=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?((__oak_cond)=>__oak_eq(__oak_cond,true)?__oak_trampoline(__oak_trampolined_sub,__as_oak_string(i+lpref)):i)(_matchesAt__oak_qm(s,prefix,i)):i)((i<max))}),__oak_resolve_trampoline(__oak_trampolined_sub,i)))()},(idx=sub(0)),slice(s,idx)))()},trimStart=function trimStart(s=null,prefix=null){return ((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String(''))?s:__oak_eq(__oak_cond,null)?_trimStartSpace(s):_trimStartNonEmpty(s,prefix))(prefix)},_trimEndSpace=function _trimEndSpace(s=null){return ((lastNonSpace,subEnd)=>(subEnd=function subEnd(i=null){return ((__oak_trampolined_subEnd)=>((__oak_trampolined_subEnd=function _(i=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?__oak_trampoline(__oak_trampolined_subEnd,(i-1)):i)(space__oak_qm(__oak_acc(s,__oak_obj_key((i)))))}),__oak_resolve_trampoline(__oak_trampolined_subEnd,i)))()},(lastNonSpace=subEnd((len(s)-1))),slice(s,0,__as_oak_string(lastNonSpace+1))))()},_trimEndNonEmpty=function _trimEndNonEmpty(s=null,suffix=null){return ((idx,lsuf,sub)=>((lsuf=len(suffix)),sub=function sub(i=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(i=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?((__oak_cond)=>__oak_eq(__oak_cond,true)?__oak_trampoline(__oak_trampolined_sub,(i-lsuf)):i)(_matchesAt__oak_qm(s,suffix,(i-lsuf))):i)((i>-1))}),__oak_resolve_trampoline(__oak_trampolined_sub,i)))()},(idx=sub(len(s))),slice(s,0,idx)))()},trimEnd=function trimEnd(s=null,suffix=null){return ((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String(''))?s:__oak_eq(__oak_cond,null)?_trimEndSpace(s):_trimEndNonEmpty(s,suffix))(suffix)},trim=function trim(s=null,part=null){return trimEnd(trimStart(s,part),part)},({_extend,_matchesAt__oak_qm,_replaceNonEmpty,_splitNonEmpty,_trimEndNonEmpty,_trimEndSpace,_trimStartNonEmpty,_trimStartSpace,checkRange,contains__oak_qm,cut,__oak_js_default,digit__oak_qm,endsWith__oak_qm,indexOf,join,letter__oak_qm,lower,lower__oak_qm,padEnd,padStart,reduce,replace,slice,space__oak_qm,split,startsWith__oak_qm,take,takeLast,trim,trimEnd,trimStart,upper,upper__oak_qm,word__oak_qm})))()}),__oak_modularize(__Oak_String('syntax'),function _(){return ((Parser,Printer,Tokenizer,append,contains__oak_qm,cut,__oak_js_default,digit__oak_qm,each,filter,first,format,fromHex,join,last,map,max,min,parse,print,printf,range,reduce,renderPos,renderToken,replace,shebang__oak_qm,slice,space__oak_qm,startsWith__oak_qm,strContains__oak_qm,take,tokenize,trim,trimEnd,trimStart,word__oak_qm)=>(({__oak_js_default,fromHex,range,slice,append,contains__oak_qm,map,each,last,take,first,filter,reduce}=__oak_module_import(__Oak_String('std'))),({digit__oak_qm,word__oak_qm,space__oak_qm,cut,contains__oak_qm:strContains__oak_qm=null,join,replace,startsWith__oak_qm,trimStart,trimEnd,trim}=__oak_module_import(__Oak_String('str'))),({min,max}=__oak_module_import(__Oak_String('math'))),({format,printf}=__oak_module_import(__Oak_String('fmt'))),shebang__oak_qm=function shebang__oak_qm(text=null){return startsWith__oak_qm(text,__Oak_String('#!'))},renderPos=function renderPos(pos=null){return __as_oak_string(__as_oak_string(__as_oak_string(__as_oak_string(__Oak_String('[')+string(__oak_acc(pos,1)))+__Oak_String(':'))+string(__oak_acc(pos,2)))+__Oak_String(']'))},renderToken=function renderToken(token=null){return ((__oak_cond)=>__oak_eq(__oak_cond,null)?format(__Oak_String('{{ 0 }} {{ 1 }}'),string((token.type??null)),renderPos((token.pos??null))):format(__Oak_String('{{ 0 }}({{ 1 }}) {{ 2 }}'),string((token.type??null)),(token.val??null),renderPos((token.pos??null))))((token.val??null))},Tokenizer=function Tokenizer(source=null){return ((Token,TokenAt,back,col,eof__oak_qm,index,line,next,nextToken,peek,peekAhead,readUntilChar,readValidIdentifier,readValidNumeral,tokenize)=>((index=0),(line=1),(col=1),TokenAt=function TokenAt(type=null,pos=null,val=null){return ({type,val,pos})},Token=function Token(type=null,val=null){return TokenAt(type,[index,line,col],val)},eof__oak_qm=function eof__oak_qm(){return __oak_eq(index,len(source))},peek=function peek(){return __oak_acc(source,__oak_obj_key((index)))},peekAhead=function peekAhead(n=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?__Oak_String(' '):__oak_acc(source,__oak_obj_key((__as_oak_string(index+n)))))((__as_oak_string(index+n)>=len(source)))},next=function next(){return ((char)=>((char=__oak_acc(source,__oak_obj_key((index)))),((__oak_cond)=>__oak_eq(__oak_cond,true)?(index=__as_oak_string(index+1)):null)((index<len(source))),((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String('\n'))?((line=__as_oak_string(line+1)),(col=1)):(col=__as_oak_string(col+1)))(char),char))()},back=function back(){return (((__oak_cond)=>__oak_eq(__oak_cond,true)?(index=(index-1)):null)((index>0)),((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String('\n'))?(line=(line-1)):(col=(col-1)))(__oak_acc(source,__oak_obj_key((index)))))},readUntilChar=function readUntilChar(c=null){return ((sub)=>(sub=function sub(acc=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(acc=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?__oak_trampoline(__oak_trampolined_sub,__oak_push(acc,next())):acc)((__oak_left=>__oak_left===false?false:__oak_and(__oak_left,!__oak_eq(peek(),c)))(!eof__oak_qm()))}),__oak_resolve_trampoline(__oak_trampolined_sub,acc)))()},sub(__Oak_String(''))))()},readValidIdentifier=function readValidIdentifier(){return ((sub)=>(sub=function sub(acc=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(acc=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?acc:((c)=>((c=next()),((__oak_cond)=>__oak_eq(__oak_cond,true)?__oak_trampoline(__oak_trampolined_sub,__oak_push(acc,c)):(back(),acc))((__oak_left=>__oak_left===true?true:__oak_or(__oak_left,__oak_eq(c,__Oak_String('!'))))((__oak_left=>__oak_left===true?true:__oak_or(__oak_left,__oak_eq(c,__Oak_String('?'))))((__oak_left=>__oak_left===true?true:__oak_or(__oak_left,__oak_eq(c,__Oak_String('_'))))(word__oak_qm(c)))))))())(eof__oak_qm())}),__oak_resolve_trampoline(__oak_trampolined_sub,acc)))()},sub(__Oak_String(''))))()},readValidNumeral=function readValidNumeral(){return ((sawDot__oak_qm,sub)=>((sawDot__oak_qm=false),sub=function sub(acc=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(acc=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?acc:((c)=>((c=next()),((__oak_cond)=>__oak_eq(__oak_cond,digit__oak_qm(c))?__oak_trampoline(__oak_trampolined_sub,__oak_push(acc,c)):__oak_eq(__oak_cond,(__oak_left=>__oak_left===false?false:__oak_and(__oak_left,!sawDot__oak_qm))(__oak_eq(c,__Oak_String('.'))))?((sawDot__oak_qm=true),__oak_trampoline(__oak_trampolined_sub,__oak_push(acc,c))):(back(),acc))(true)))())(eof__oak_qm())}),__oak_resolve_trampoline(__oak_trampolined_sub,acc)))()},sub(__Oak_String(''))))()},nextToken=function nextToken(){return ((c,payload,pos)=>((pos=[index,line,col]),((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String(','))?TokenAt(Symbol.for('comma'),pos):__oak_eq(__oak_cond,__Oak_String('.'))?((__oak_cond)=>__oak_eq(__oak_cond,true)?(next(),next(),TokenAt(Symbol.for('ellipsis'),pos)):TokenAt(Symbol.for('dot'),pos))((__oak_left=>__oak_left===false?false:__oak_and(__oak_left,__oak_eq(peekAhead(1),__Oak_String('.'))))(__oak_eq(peek(),__Oak_String('.')))):__oak_eq(__oak_cond,__Oak_String('('))?TokenAt(Symbol.for('leftParen'),pos):__oak_eq(__oak_cond,__Oak_String(')'))?TokenAt(Symbol.for('rightParen'),pos):__oak_eq(__oak_cond,__Oak_String('['))?TokenAt(Symbol.for('leftBracket'),pos):__oak_eq(__oak_cond,__Oak_String(']'))?TokenAt(Symbol.for('rightBracket'),pos):__oak_eq(__oak_cond,__Oak_String('{'))?TokenAt(Symbol.for('leftBrace'),pos):__oak_eq(__oak_cond,__Oak_String('}'))?TokenAt(Symbol.for('rightBrace'),pos):__oak_eq(__oak_cond,__Oak_String(':'))?((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String('='))?(next(),TokenAt(Symbol.for('assign'),pos)):TokenAt(Symbol.for('colon'),pos))(peek()):__oak_eq(__oak_cond,__Oak_String('<'))?((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String('<'))?(next(),TokenAt(Symbol.for('pushArrow'),pos)):__oak_eq(__oak_cond,__Oak_String('-'))?(next(),TokenAt(Symbol.for('nonlocalAssign'),pos)):__oak_eq(__oak_cond,__Oak_String('='))?(next(),TokenAt(Symbol.for('leq'),pos)):TokenAt(Symbol.for('less'),pos))(peek()):__oak_eq(__oak_cond,__Oak_String('?'))?TokenAt(Symbol.for('qmark'),pos):__oak_eq(__oak_cond,__Oak_String('!'))?((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String('='))?(next(),TokenAt(Symbol.for('neq'),pos)):TokenAt(Symbol.for('exclam'),pos))(peek()):__oak_eq(__oak_cond,__Oak_String('+'))?TokenAt(Symbol.for('plus'),pos):__oak_eq(__oak_cond,__Oak_String('-'))?((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String('>'))?(next(),TokenAt(Symbol.for('branchArrow'),pos)):TokenAt(Symbol.for('minus'),pos))(peek()):__oak_eq(__oak_cond,__Oak_String('*'))?TokenAt(Symbol.for('times'),pos):__oak_eq(__oak_cond,__Oak_String('/'))?((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String('/'))?((commentString)=>(next(),(commentString=trimEnd(readUntilChar(__Oak_String('\n')))),((__oak_cond)=>__oak_eq(__oak_cond,true)?(commentString=__Oak_String('')):null)(__oak_eq(trim(commentString),__Oak_String(''))),TokenAt(Symbol.for('comment'),pos,commentString)))():TokenAt(Symbol.for('divide'),pos))(peek()):__oak_eq(__oak_cond,__Oak_String('%'))?TokenAt(Symbol.for('modulus'),pos):__oak_eq(__oak_cond,__Oak_String('^'))?TokenAt(Symbol.for('xor'),pos):__oak_eq(__oak_cond,__Oak_String('&'))?TokenAt(Symbol.for('and'),pos):__oak_eq(__oak_cond,__Oak_String('|'))?((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String('>'))?(next(),TokenAt(Symbol.for('pipeArrow'),pos)):TokenAt(Symbol.for('or'),pos))(peek()):__oak_eq(__oak_cond,__Oak_String('>'))?((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String('='))?(next(),TokenAt(Symbol.for('geq'),pos)):TokenAt(Symbol.for('greater'),pos))(peek()):__oak_eq(__oak_cond,__Oak_String('='))?TokenAt(Symbol.for('eq'),pos):__oak_eq(__oak_cond,__Oak_String('\''))?((sub)=>(sub=function sub(payload=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(payload=null){let c;let charInString;return ((__oak_cond)=>__oak_eq(__oak_cond,null)?payload:__oak_eq(__oak_cond,__Oak_String('\''))?payload:__oak_eq(__oak_cond,__Oak_String('\\'))?((__oak_cond)=>__oak_eq(__oak_cond,null)?payload:__oak_trampoline(__oak_trampolined_sub,__oak_push(__oak_push(payload,__Oak_String('\\')),c)))((c=next())):__oak_trampoline(__oak_trampolined_sub,__oak_push(payload,charInString)))((charInString=next()))}),__oak_resolve_trampoline(__oak_trampolined_sub,payload)))()},TokenAt(Symbol.for('stringLiteral'),pos,sub(__Oak_String('')))))():((__oak_cond)=>__oak_eq(__oak_cond,digit__oak_qm(c))?TokenAt(Symbol.for('numberLiteral'),pos,__oak_push(c,readValidNumeral())):((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String('_'))?TokenAt(Symbol.for('underscore'),pos):__oak_eq(__oak_cond,__Oak_String('if'))?TokenAt(Symbol.for('ifKeyword'),pos):__oak_eq(__oak_cond,__Oak_String('fn'))?TokenAt(Symbol.for('fnKeyword'),pos):__oak_eq(__oak_cond,__Oak_String('with'))?TokenAt(Symbol.for('withKeyword'),pos):__oak_eq(__oak_cond,__Oak_String('true'))?TokenAt(Symbol.for('trueLiteral'),pos):__oak_eq(__oak_cond,__Oak_String('false'))?TokenAt(Symbol.for('falseLiteral'),pos):TokenAt(Symbol.for('identifier'),pos,payload))((payload=__oak_push(c,readValidIdentifier()))))(true))((c=next()))))()},tokenize=function tokenize(){return ((eatSpace,lastTok,sub,tokens)=>((tokens=[]),((__oak_cond)=>__oak_eq(__oak_cond,true)?(readUntilChar(__Oak_String('\n')),((__oak_cond)=>__oak_eq(__oak_cond,true)?next():null)(!eof__oak_qm())):null)((__oak_left=>__oak_left===false?false:__oak_and(__oak_left,__oak_eq(peekAhead(1),__Oak_String('!'))))(__oak_eq(peek(),__Oak_String('#')))),eatSpace=function eatSpace(){return ((__oak_trampolined_eatSpace)=>((__oak_trampolined_eatSpace=function _(){let sp;return ((__oak_cond)=>__oak_eq(__oak_cond,true)?(((__oak_cond)=>__oak_eq(__oak_cond,true)?__oak_push(tokens,Token(Symbol.for('newline'))):null)(__oak_eq(sp,__Oak_String('\n'))),next(),__oak_trampoline(__oak_trampolined_eatSpace)):null)(space__oak_qm((sp=peek())))}),__oak_resolve_trampoline(__oak_trampolined_eatSpace)))()},eatSpace(),(lastTok=Token(Symbol.for('comma'))),sub=function sub(){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(){return ((eatSpaceAutoInsertComma,nextTok)=>((nextTok=nextToken()),((__oak_cond)=>__oak_eq(__oak_cond,true)?__oak_push(tokens,TokenAt(Symbol.for('comma'),(nextTok.pos??null))):null)((__oak_left=>__oak_left===false?false:__oak_and(__oak_left,contains__oak_qm([Symbol.for('rightParen'),Symbol.for('rightBracket'),Symbol.for('rightBrace')],(nextTok.type??null))))(!(contains__oak_qm([Symbol.for('leftParen'),Symbol.for('leftBracket'),Symbol.for('leftBrace'),Symbol.for('comma')],(lastTok.type??null))))),__oak_push(tokens,nextTok),((__oak_cond)=>__oak_eq(__oak_cond,true)?(nextTok=lastTok):null)(__oak_eq((nextTok.type??null),Symbol.for('comment'))),eatSpaceAutoInsertComma=function eatSpaceAutoInsertComma(){return ((__oak_trampolined_eatSpaceAutoInsertComma)=>((__oak_trampolined_eatSpaceAutoInsertComma=function _(){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?(((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String('\n'))?(((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('comma'))?null:__oak_eq(__oak_cond,Symbol.for('leftParen'))?null:__oak_eq(__oak_cond,Symbol.for('leftBracket'))?null:__oak_eq(__oak_cond,Symbol.for('leftBrace'))?null:__oak_eq(__oak_cond,Symbol.for('plus'))?null:__oak_eq(__oak_cond,Symbol.for('minus'))?null:__oak_eq(__oak_cond,Symbol.for('times'))?null:__oak_eq(__oak_cond,Symbol.for('divide'))?null:__oak_eq(__oak_cond,Symbol.for('modulus'))?null:__oak_eq(__oak_cond,Symbol.for('xor'))?null:__oak_eq(__oak_cond,Symbol.for('and'))?null:__oak_eq(__oak_cond,Symbol.for('or'))?null:__oak_eq(__oak_cond,Symbol.for('exclam'))?null:__oak_eq(__oak_cond,Symbol.for('greater'))?null:__oak_eq(__oak_cond,Symbol.for('less'))?null:__oak_eq(__oak_cond,Symbol.for('eq'))?null:__oak_eq(__oak_cond,Symbol.for('geq'))?null:__oak_eq(__oak_cond,Symbol.for('leq'))?null:__oak_eq(__oak_cond,Symbol.for('assign'))?null:__oak_eq(__oak_cond,Symbol.for('nonlocalAssign'))?null:__oak_eq(__oak_cond,Symbol.for('dot'))?null:__oak_eq(__oak_cond,Symbol.for('colon'))?null:__oak_eq(__oak_cond,Symbol.for('fnKeyword'))?null:__oak_eq(__oak_cond,Symbol.for('ifKeyword'))?null:__oak_eq(__oak_cond,Symbol.for('withKeyword'))?null:__oak_eq(__oak_cond,Symbol.for('pipeArrow'))?null:__oak_eq(__oak_cond,Symbol.for('branchArrow'))?null:__oak_eq(__oak_cond,Symbol.for('pushArrow'))?null:((nextTok=Token(Symbol.for('comma'))),__oak_push(tokens,nextTok)))((nextTok.type??null)),__oak_push(tokens,Token(Symbol.for('newline')))):null)(peek()),next(),__oak_trampoline(__oak_trampolined_eatSpaceAutoInsertComma)):null)(space__oak_qm(peek()))}),__oak_resolve_trampoline(__oak_trampolined_eatSpaceAutoInsertComma)))()},eatSpaceAutoInsertComma(),((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('comment'))?null:(lastTok=nextTok))((nextTok.type??null)),((__oak_cond)=>__oak_eq(__oak_cond,true)?__oak_trampoline(__oak_trampolined_sub):null)(!eof__oak_qm())))()}),__oak_resolve_trampoline(__oak_trampolined_sub)))()},((__oak_cond)=>__oak_eq(__oak_cond,true)?sub():null)(!eof__oak_qm()),((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('comma'))?null:__oak_push(tokens,TokenAt(Symbol.for('comma'),[len(source),line,col])))((lastTok.type??null)),tokens))()},({readUntilChar,tokenize})))()},tokenize=function tokenize(text=null){return (Tokenizer(text).tokenize)()},Parser=function Parser(tokens=null){return ((back,eof__oak_qm,error,expect,index,infixOpPrecedence,lastMinPrec,lastTokenPos,minBinaryPrec,next,notError,parseAssignment,parseNode,parseSubNode,parseUnit,peek,peekAhead,popMinPrec,pushMinPrec,readUntilTokenType)=>((index=0),(minBinaryPrec=[0]),(tokens=filter(tokens,function _(tok=null){return ((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('newline'))?false:__oak_eq(__oak_cond,Symbol.for('comment'))?false:true)((tok.type??null))})),error=function error(msg=null,pos=null){return ({type:Symbol.for('error'),error:msg,pos})},lastMinPrec=function lastMinPrec(){return __oak_acc(minBinaryPrec,__oak_obj_key(((len(minBinaryPrec)-1))))},pushMinPrec=function pushMinPrec(prec=null){return __oak_push(minBinaryPrec,prec)},popMinPrec=function popMinPrec(){return (minBinaryPrec=slice(minBinaryPrec,0,(len(minBinaryPrec)-1)))},eof__oak_qm=function eof__oak_qm(){return __oak_eq(index,len(tokens))},peek=function peek(){return __oak_acc(tokens,__oak_obj_key((index)))},peekAhead=function peekAhead(n=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?({type:Symbol.for('comma')}):__oak_acc(tokens,__oak_obj_key((__as_oak_string(index+n)))))((__as_oak_string(index+n)>len(tokens)))},next=function next(){return ((tok)=>((tok=__oak_acc(tokens,__oak_obj_key((index)))),((__oak_cond)=>__oak_eq(__oak_cond,true)?(index=__as_oak_string(index+1)):null)((index<len(tokens))),tok))()},back=function back(){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?(index=(index-1)):null)((index>0))},lastTokenPos=function lastTokenPos(){let lastTok;return ((__oak_cond)=>__oak_eq(__oak_cond,null)?null:(lastTok.pos??null))((lastTok=last(tokens)))},expect=function expect(type=null){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?error(format(__Oak_String('Unexpected end of input, expected {{0}}'),type),lastTokenPos()):((nextTok)=>((nextTok=next()),((__oak_cond)=>__oak_eq(__oak_cond,type)?nextTok:error(format(__Oak_String('Unexpected token {{0}}, expected {{1}}'),renderToken(nextTok),type),(nextTok.pos??null)))((nextTok.type??null))))())(eof__oak_qm())},readUntilTokenType=function readUntilTokenType(type=null){return ((sub,tokens)=>((tokens=[]),sub=function sub(){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?(__oak_push(tokens,next()),__oak_trampoline(__oak_trampolined_sub)):tokens)((__oak_left=>__oak_left===false?false:__oak_and(__oak_left,!__oak_eq((peek().type??null),type)))(!eof()))}),__oak_resolve_trampoline(__oak_trampolined_sub)))()},sub()))()},notError=function notError(x=null,withNotErr=null){return ((__oak_cond)=>__oak_eq(__oak_cond,({type:Symbol.for('error'),error:__Oak_Empty,pos:__Oak_Empty}))?x:withNotErr(x))(x)},parseAssignment=function parseAssignment(left=null){return ((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('assign'))?((node,nxt,right)=>((nxt=next()),(node=({type:Symbol.for('assignment'),tok:nxt,local__oak_qm:__oak_eq((nxt.type??null),Symbol.for('assign')),left})),notError((right=parseNode()),function _(){return (((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign(right,__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt.right):(__oak_assgn_tgt.right)=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(node),right),node)})))():__oak_eq(__oak_cond,Symbol.for('nonlocalAssign'))?((node,nxt,right)=>((nxt=next()),(node=({type:Symbol.for('assignment'),tok:nxt,local__oak_qm:__oak_eq((nxt.type??null),Symbol.for('assign')),left})),notError((right=parseNode()),function _(){return (((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign(right,__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt.right):(__oak_assgn_tgt.right)=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(node),right),node)})))():left)((peek().type??null))},parseUnit=function parseUnit(){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?error(__Oak_String('Unexpected end of input'),lastTokenPos()):((parsed,right,tok)=>((tok=next()),((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('qmark'))?({type:Symbol.for('null'),tok}):__oak_eq(__oak_cond,Symbol.for('stringLiteral'))?({type:Symbol.for('string'),tok,val:((sub,verbatim)=>((verbatim=(tok.val??null)),sub=function sub(parsed=null,i=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(parsed=null,i=null){let c;let c1;let c2;let code;let escapedChar;return ((__oak_cond)=>__oak_eq(__oak_cond,null)?parsed:__oak_eq(__oak_cond,__Oak_String('\\'))?((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String('t'))?__oak_trampoline(__oak_trampolined_sub,__oak_push(parsed,__Oak_String('\t')),__as_oak_string(i+2)):__oak_eq(__oak_cond,__Oak_String('n'))?__oak_trampoline(__oak_trampolined_sub,__oak_push(parsed,__Oak_String('\n')),__as_oak_string(i+2)):__oak_eq(__oak_cond,__Oak_String('r'))?__oak_trampoline(__oak_trampolined_sub,__oak_push(parsed,__Oak_String('\r')),__as_oak_string(i+2)):__oak_eq(__oak_cond,__Oak_String('f'))?__oak_trampoline(__oak_trampolined_sub,__oak_push(parsed,__Oak_String('\f')),__as_oak_string(i+2)):__oak_eq(__oak_cond,__Oak_String('x'))?((__oak_cond)=>__oak_eq(__oak_cond,null)?__oak_trampoline(__oak_trampolined_sub,__oak_push(parsed,escapedChar),__as_oak_string(i+2)):((__oak_cond)=>__oak_eq(__oak_cond,null)?__oak_trampoline(__oak_trampolined_sub,__oak_push(__oak_push(parsed,escapedChar),c1),__as_oak_string(i+3)):((__oak_cond)=>__oak_eq(__oak_cond,null)?__oak_trampoline(__oak_trampolined_sub,__oak_push(__oak_push(__oak_push(parsed,escapedChar),c1),c2),__as_oak_string(i+4)):__oak_trampoline(__oak_trampolined_sub,__oak_push(parsed,char(code)),__as_oak_string(i+4)))((code=fromHex(__as_oak_string(c1+c2)))))((c2=__oak_acc(verbatim,__oak_obj_key((__as_oak_string(i+3)))))))((c1=__oak_acc(verbatim,__oak_obj_key((__as_oak_string(i+2)))))):__oak_trampoline(__oak_trampolined_sub,__oak_push(parsed,escapedChar),__as_oak_string(i+2)))((escapedChar=__oak_acc(verbatim,__oak_obj_key((__as_oak_string(i+1)))))):__oak_trampoline(__oak_trampolined_sub,__oak_push(parsed,c),__as_oak_string(i+1)))((c=__oak_acc(verbatim,__oak_obj_key((i)))))}),__oak_resolve_trampoline(__oak_trampolined_sub,parsed,i)))()},sub(__Oak_String(''),0)))()}):__oak_eq(__oak_cond,Symbol.for('numberLiteral'))?((__oak_cond)=>__oak_eq(__oak_cond,true)?((__oak_cond)=>__oak_eq(__oak_cond,null)?error(format(__Oak_String('Could not parse floating point number {{0}}'),(tok.val??null)),(tok.pos??null)):({type:Symbol.for('float'),tok,val:parsed}))((parsed=float((tok.val??null)))):((__oak_cond)=>__oak_eq(__oak_cond,null)?error(format(__Oak_String('Could not parse integer number {{0}}'),(tok.val??null)),(tok.pos??null)):({type:Symbol.for('int'),tok,val:parsed}))((parsed=int((tok.val??null)))))(strContains__oak_qm((tok.val??null),__Oak_String('.'))):__oak_eq(__oak_cond,Symbol.for('trueLiteral'))?({type:Symbol.for('bool'),tok,val:true}):__oak_eq(__oak_cond,Symbol.for('falseLiteral'))?({type:Symbol.for('bool'),tok,val:false}):__oak_eq(__oak_cond,Symbol.for('colon'))?((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('identifier'))?({type:Symbol.for('atom'),tok,val:(next().val??null)}):__oak_eq(__oak_cond,Symbol.for('ifKeyword'))?(next(),({type:Symbol.for('atom'),tok,val:__Oak_String('if')})):__oak_eq(__oak_cond,Symbol.for('fnKeyword'))?(next(),({type:Symbol.for('atom'),tok,val:__Oak_String('fn')})):__oak_eq(__oak_cond,Symbol.for('withKeyword'))?(next(),({type:Symbol.for('atom'),tok,val:__Oak_String('with')})):__oak_eq(__oak_cond,Symbol.for('trueLiteral'))?(next(),({type:Symbol.for('atom'),tok,val:__Oak_String('true')})):__oak_eq(__oak_cond,Symbol.for('falseLiteral'))?(next(),({type:Symbol.for('atom'),tok,val:__Oak_String('false')})):error(format(__Oak_String('Expected identifier after ":", got {{0}}'),renderToken(peek())),(peek().pos??null)))((peek().type??null)):__oak_eq(__oak_cond,Symbol.for('leftBracket'))?((itemNodes,sub)=>(pushMinPrec(0),(itemNodes=[]),sub=function sub(){let node;return ((__oak_cond)=>__oak_eq(__oak_cond,true)?error(__Oak_String('Unexpected end of input inside list'),lastTokenPos()):((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('rightBracket'))?null:notError((node=parseNode()),function _(){return ((err)=>(notError((err=expect(Symbol.for('comma'))),function _(){return (__oak_push(itemNodes,node),sub())})))()}))((peek().type??null)))(eof__oak_qm())},notError(sub(),function _(){return ((err)=>(notError((err=expect(Symbol.for('rightBracket'))),function _(){return (popMinPrec(),({type:Symbol.for('list'),tok,elems:itemNodes}))})))()})))():__oak_eq(__oak_cond,Symbol.for('leftBrace'))?((firstExpr)=>(pushMinPrec(0),((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('rightBrace'))?(next(),popMinPrec(),({type:Symbol.for('object'),tok,entries:[]})):notError((firstExpr=parseNode()),function _(){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?error(__Oak_String('Unexpected end of input inside block or object'),lastTokenPos()):((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('colon'))?((valExpr)=>(next(),notError((valExpr=parseNode()),function _(){return (notError(expect(Symbol.for('comma')),function _(){return ((entries,sub)=>((entries=[({key:firstExpr,val:valExpr})]),sub=function sub(){let key;return ((__oak_cond)=>__oak_eq(__oak_cond,true)?((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('rightBrace'))?null:notError((key=parseNode()),function _(){return (notError(expect(Symbol.for('colon')),function _(){return ((val)=>(notError((val=parseNode()),function _(){return (notError(expect(Symbol.for('comma')),function _(){return (__oak_push(entries,({key,val})),sub())}))})))()}))}))((peek().type??null)):null)(!eof__oak_qm())},notError(sub(),function _(){return (notError(expect(Symbol.for('rightBrace')),function _(){return (popMinPrec(),({type:Symbol.for('object'),tok,entries}))}))})))()}))})))():notError(expect(Symbol.for('comma')),function _(){return ((exprs,sub)=>((exprs=[firstExpr]),sub=function sub(){let expr;return ((__oak_cond)=>__oak_eq(__oak_cond,true)?error(__Oak_String('Unexpected end of input inside block or object'),lastTokenPos()):((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('rightBrace'))?null:notError((expr=parseNode()),function _(){return (notError(expect(Symbol.for('comma')),function _(){return (__oak_push(exprs,expr),sub())}))}))((peek().type??null)))(eof__oak_qm())},notError(sub(),function _(){return (notError(expect(Symbol.for('rightBrace')),function _(){return (popMinPrec(),({type:Symbol.for('block'),tok,exprs}))}))})))()}))((peek().type??null)))(eof__oak_qm())}))((peek().type??null))))():__oak_eq(__oak_cond,Symbol.for('fnKeyword'))?((args,name,parseBody,restArg)=>(pushMinPrec(0),(name=((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('identifier'))?(next().val??null):__Oak_String(''))((peek().type??null))),(args=[]),(restArg=__Oak_String('')),parseBody=function parseBody(){let body;return notError((body=parseNode()),function _(){return (((__oak_cond)=>__oak_eq(__oak_cond,({type:Symbol.for('object'),tok:__Oak_Empty,entries:[]}))?(body=({type:Symbol.for('block'),tok:(body.tok??null),exprs:[]})):null)(body),popMinPrec(),({type:Symbol.for('function'),name,tok,args,restArg,body}))})},((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('leftParen'))?((sub)=>(next(),sub=function sub(){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('rightParen'))?null:((arg)=>((arg=expect(Symbol.for('identifier'))),((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('error'))?(back(),notError(expect(Symbol.for('underscore')),function _(){return (__oak_push(args,__Oak_String('_')),notError(expect(Symbol.for('comma')),function _(){return (sub())}))})):((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('ellipsis'))?((restArg=(arg.val??null)),next(),notError(expect(Symbol.for('comma')),function _(){return (sub())})):(__oak_push(args,(arg.val??null)),notError(expect(Symbol.for('comma')),function _(){return (sub())})))((peek().type??null)))((arg.type??null))))())((peek().type??null)):null)(!eof__oak_qm())},notError(sub(),function _(){return (notError(expect(Symbol.for('rightParen')),function _(){return (parseBody())}))})))():parseBody())((peek().type??null))))():__oak_eq(__oak_cond,Symbol.for('underscore'))?({type:Symbol.for('empty'),tok}):__oak_eq(__oak_cond,Symbol.for('identifier'))?({type:Symbol.for('identifier'),tok,val:(tok.val??null)}):__oak_eq(__oak_cond,Symbol.for('minus'))?notError((right=parseSubNode()),function _(){return ({type:Symbol.for('unary'),tok,op:(tok.type??null),right})}):__oak_eq(__oak_cond,Symbol.for('exclam'))?notError((right=parseSubNode()),function _(){return ({type:Symbol.for('unary'),tok,op:(tok.type??null),right})}):__oak_eq(__oak_cond,Symbol.for('ifKeyword'))?((condNode)=>(pushMinPrec(0),(condNode=((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('leftBrace'))?({type:Symbol.for('bool'),val:true,tok}):parseNode())((peek().type??null))),((__oak_cond)=>__oak_eq(__oak_cond,true)?error(__Oak_String('Unexpected end of input in if expression'),lastTokenPos()):((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('branchArrow'))?((arrowTok,body)=>((arrowTok=next()),notError((body=parseNode()),function _(){return (({type:Symbol.for('ifExpr'),tok,cond:condNode,branches:[({type:Symbol.for('ifBranch'),target:({type:Symbol.for('bool'),val:true,tok:arrowTok}),body})]}))})))():notError(condNode,function _(){return (notError(expect(Symbol.for('leftBrace')),function _(){return ((branches,subBranch)=>(subBranch=function subBranch(branches=null){return ((__oak_cond)=>__oak_eq(__oak_cond,false)?((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('rightBrace'))?branches:((subTarget,targets)=>(subTarget=function subTarget(targets=null){let target;return ((__oak_cond)=>__oak_eq(__oak_cond,true)?targets:notError((target=parseNode()),function _(){return ((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('branchArrow'))?__oak_push(targets,target):notError(expect(Symbol.for('comma')),function _(){return (subTarget(__oak_push(targets,target)))}))((peek().type??null))}))(eof__oak_qm())},notError((targets=subTarget([])),function _(){return (notError(expect(Symbol.for('branchArrow')),function _(){return ((body)=>(notError((body=parseNode()),function _(){return (notError(expect(Symbol.for('comma')),function _(){return (subBranch(append(branches,map(targets,function _(target=null){return ({type:Symbol.for('ifBranch'),target,body})}))))}))})))()}))})))())((peek().type??null)):branches)(eof__oak_qm())},notError((branches=subBranch([])),function _(){return (notError(expect(Symbol.for('rightBrace')),function _(){return (popMinPrec(),({type:Symbol.for('ifExpr'),tok,cond:condNode,branches}))}))})))()}))}))((peek().type??null)))(eof__oak_qm())))():__oak_eq(__oak_cond,Symbol.for('withKeyword'))?((base)=>(pushMinPrec(0),notError((base=parseNode()),function _(){let lastArg;return ((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('fnCall'))?notError((lastArg=parseNode()),function _(){return (popMinPrec(),__oak_push((base.args??null),lastArg),base)}):error(format(__Oak_String('with keyword should be followed by a fn call, found {{0}}'),base),(tok.pos??null)))((base.type??null))})))():__oak_eq(__oak_cond,Symbol.for('leftParen'))?((exprs,subExpr)=>(pushMinPrec(0),subExpr=function subExpr(exprs=null){let expr;return ((__oak_cond)=>__oak_eq(__oak_cond,true)?error(__Oak_String('Unexpected end of input inside block'),lastTokenPos()):((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('rightParen'))?exprs:notError((expr=parseNode()),function _(){return (notError(expect(Symbol.for('comma')),function _(){return (subExpr(__oak_push(exprs,expr)))}))}))((peek().type??null)))(eof__oak_qm())},notError((exprs=subExpr([])),function _(){return (notError(expect(Symbol.for('rightParen')),function _(){return (popMinPrec(),({type:Symbol.for('block'),tok,exprs}))}))})))():error(format(__Oak_String('Unexpected token {{0}} at start of unit'),renderToken(tok)),(tok.pos??null)))((tok.type??null))))())(eof__oak_qm())},infixOpPrecedence=function infixOpPrecedence(op=null){return ((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('plus'))?40:__oak_eq(__oak_cond,Symbol.for('minus'))?40:__oak_eq(__oak_cond,Symbol.for('times'))?50:__oak_eq(__oak_cond,Symbol.for('divide'))?50:__oak_eq(__oak_cond,Symbol.for('modulus'))?80:__oak_eq(__oak_cond,Symbol.for('eq'))?30:__oak_eq(__oak_cond,Symbol.for('greater'))?30:__oak_eq(__oak_cond,Symbol.for('less'))?30:__oak_eq(__oak_cond,Symbol.for('geq'))?30:__oak_eq(__oak_cond,Symbol.for('leq'))?30:__oak_eq(__oak_cond,Symbol.for('neq'))?30:__oak_eq(__oak_cond,Symbol.for('and'))?20:__oak_eq(__oak_cond,Symbol.for('xor'))?15:__oak_eq(__oak_cond,Symbol.for('or'))?10:__oak_eq(__oak_cond,Symbol.for('pushArrow'))?1:-1)(op)},parseSubNode=function parseSubNode(){return ((node)=>(pushMinPrec(0),notError((node=parseUnit()),function _(){return ((sub)=>(sub=function sub(){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('dot'))?((nxt,right)=>((nxt=next()),notError((right=parseUnit()),function _(){return ((node=({type:Symbol.for('propertyAccess'),tok:nxt,left:node,right})),sub())})))():__oak_eq(__oak_cond,Symbol.for('leftParen'))?((args,nxt,restArg,subArg)=>((nxt=next()),(args=[]),(restArg=null),subArg=function subArg(){let arg;return ((__oak_cond)=>__oak_eq(__oak_cond,true)?((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('rightParen'))?notError(expect(Symbol.for('rightParen')),function _(){return null}):notError((arg=parseNode()),function _(){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?error(__Oak_String('Unexpected end of input inside argument list'),lastTokenPos()):((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('ellipsis'))?(next(),notError(expect(Symbol.for('comma')),function _(){return ((restArg=arg),subArg())})):__oak_eq(__oak_cond,Symbol.for('comma'))?(next(),__oak_push(args,arg),subArg()):error(format(__Oak_String('Expected comma after arg in argument list, got {{0}}'),(peek().type??null)),(peek().pos??null)))((peek().type??null)))(eof__oak_qm())}))((peek().type??null)):null)(!eof__oak_qm())},notError(subArg(),function _(){return ((node=({type:Symbol.for('fnCall'),__oak_js_function:node,args,restArg,tok:nxt})),sub())})))():null)((peek().type??null)):null)(!eof__oak_qm())},notError(sub(),function _(){return (popMinPrec(),node)})))()})))()},parseNode=function parseNode(){let node;return notError((node=parseSubNode()),function _(){return ((sub)=>(sub=function sub(){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('comma'))?null:__oak_eq(__oak_cond,Symbol.for('assign'))?(node=parseAssignment(node)):__oak_eq(__oak_cond,Symbol.for('nonlocalAssign'))?(node=parseAssignment(node)):__oak_eq(__oak_cond,Symbol.for('plus'))?((minPrec,subBinary)=>((minPrec=lastMinPrec()),subBinary=function subBinary(){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?error(__Oak_String('Incomplete binary expression'),lastTokenPos()):((op,peeked,prec)=>((peeked=peek()),(op=(peeked.type??null)),(prec=infixOpPrecedence(op)),((__oak_cond)=>__oak_eq(__oak_cond,true)?(next(),((__oak_cond)=>__oak_eq(__oak_cond,true)?error(format(__Oak_String('Incomplete binary expression with {{0}}'),({type:op})),(peek().pos??null)):((right)=>(pushMinPrec(prec),notError((right=parseNode()),function _(){return (popMinPrec(),(node=({type:Symbol.for('binary'),tok:peeked,op,left:node,right})),subBinary())})))())(eof__oak_qm())):null)((prec>minPrec))))())(eof__oak_qm())},notError(subBinary(),function _(){return (node)})))():__oak_eq(__oak_cond,Symbol.for('minus'))?((minPrec,subBinary)=>((minPrec=lastMinPrec()),subBinary=function subBinary(){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?error(__Oak_String('Incomplete binary expression'),lastTokenPos()):((op,peeked,prec)=>((peeked=peek()),(op=(peeked.type??null)),(prec=infixOpPrecedence(op)),((__oak_cond)=>__oak_eq(__oak_cond,true)?(next(),((__oak_cond)=>__oak_eq(__oak_cond,true)?error(format(__Oak_String('Incomplete binary expression with {{0}}'),({type:op})),(peek().pos??null)):((right)=>(pushMinPrec(prec),notError((right=parseNode()),function _(){return (popMinPrec(),(node=({type:Symbol.for('binary'),tok:peeked,op,left:node,right})),subBinary())})))())(eof__oak_qm())):null)((prec>minPrec))))())(eof__oak_qm())},notError(subBinary(),function _(){return (node)})))():__oak_eq(__oak_cond,Symbol.for('times'))?((minPrec,subBinary)=>((minPrec=lastMinPrec()),subBinary=function subBinary(){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?error(__Oak_String('Incomplete binary expression'),lastTokenPos()):((op,peeked,prec)=>((peeked=peek()),(op=(peeked.type??null)),(prec=infixOpPrecedence(op)),((__oak_cond)=>__oak_eq(__oak_cond,true)?(next(),((__oak_cond)=>__oak_eq(__oak_cond,true)?error(format(__Oak_String('Incomplete binary expression with {{0}}'),({type:op})),(peek().pos??null)):((right)=>(pushMinPrec(prec),notError((right=parseNode()),function _(){return (popMinPrec(),(node=({type:Symbol.for('binary'),tok:peeked,op,left:node,right})),subBinary())})))())(eof__oak_qm())):null)((prec>minPrec))))())(eof__oak_qm())},notError(subBinary(),function _(){return (node)})))():__oak_eq(__oak_cond,Symbol.for('divide'))?((minPrec,subBinary)=>((minPrec=lastMinPrec()),subBinary=function subBinary(){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?error(__Oak_String('Incomplete binary expression'),lastTokenPos()):((op,peeked,prec)=>((peeked=peek()),(op=(peeked.type??null)),(prec=infixOpPrecedence(op)),((__oak_cond)=>__oak_eq(__oak_cond,true)?(next(),((__oak_cond)=>__oak_eq(__oak_cond,true)?error(format(__Oak_String('Incomplete binary expression with {{0}}'),({type:op})),(peek().pos??null)):((right)=>(pushMinPrec(prec),notError((right=parseNode()),function _(){return (popMinPrec(),(node=({type:Symbol.for('binary'),tok:peeked,op,left:node,right})),subBinary())})))())(eof__oak_qm())):null)((prec>minPrec))))())(eof__oak_qm())},notError(subBinary(),function _(){return (node)})))():__oak_eq(__oak_cond,Symbol.for('modulus'))?((minPrec,subBinary)=>((minPrec=lastMinPrec()),subBinary=function subBinary(){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?error(__Oak_String('Incomplete binary expression'),lastTokenPos()):((op,peeked,prec)=>((peeked=peek()),(op=(peeked.type??null)),(prec=infixOpPrecedence(op)),((__oak_cond)=>__oak_eq(__oak_cond,true)?(next(),((__oak_cond)=>__oak_eq(__oak_cond,true)?error(format(__Oak_String('Incomplete binary expression with {{0}}'),({type:op})),(peek().pos??null)):((right)=>(pushMinPrec(prec),notError((right=parseNode()),function _(){return (popMinPrec(),(node=({type:Symbol.for('binary'),tok:peeked,op,left:node,right})),subBinary())})))())(eof__oak_qm())):null)((prec>minPrec))))())(eof__oak_qm())},notError(subBinary(),function _(){return (node)})))():__oak_eq(__oak_cond,Symbol.for('xor'))?((minPrec,subBinary)=>((minPrec=lastMinPrec()),subBinary=function subBinary(){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?error(__Oak_String('Incomplete binary expression'),lastTokenPos()):((op,peeked,prec)=>((peeked=peek()),(op=(peeked.type??null)),(prec=infixOpPrecedence(op)),((__oak_cond)=>__oak_eq(__oak_cond,true)?(next(),((__oak_cond)=>__oak_eq(__oak_cond,true)?error(format(__Oak_String('Incomplete binary expression with {{0}}'),({type:op})),(peek().pos??null)):((right)=>(pushMinPrec(prec),notError((right=parseNode()),function _(){return (popMinPrec(),(node=({type:Symbol.for('binary'),tok:peeked,op,left:node,right})),subBinary())})))())(eof__oak_qm())):null)((prec>minPrec))))())(eof__oak_qm())},notError(subBinary(),function _(){return (node)})))():__oak_eq(__oak_cond,Symbol.for('and'))?((minPrec,subBinary)=>((minPrec=lastMinPrec()),subBinary=function subBinary(){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?error(__Oak_String('Incomplete binary expression'),lastTokenPos()):((op,peeked,prec)=>((peeked=peek()),(op=(peeked.type??null)),(prec=infixOpPrecedence(op)),((__oak_cond)=>__oak_eq(__oak_cond,true)?(next(),((__oak_cond)=>__oak_eq(__oak_cond,true)?error(format(__Oak_String('Incomplete binary expression with {{0}}'),({type:op})),(peek().pos??null)):((right)=>(pushMinPrec(prec),notError((right=parseNode()),function _(){return (popMinPrec(),(node=({type:Symbol.for('binary'),tok:peeked,op,left:node,right})),subBinary())})))())(eof__oak_qm())):null)((prec>minPrec))))())(eof__oak_qm())},notError(subBinary(),function _(){return (node)})))():__oak_eq(__oak_cond,Symbol.for('or'))?((minPrec,subBinary)=>((minPrec=lastMinPrec()),subBinary=function subBinary(){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?error(__Oak_String('Incomplete binary expression'),lastTokenPos()):((op,peeked,prec)=>((peeked=peek()),(op=(peeked.type??null)),(prec=infixOpPrecedence(op)),((__oak_cond)=>__oak_eq(__oak_cond,true)?(next(),((__oak_cond)=>__oak_eq(__oak_cond,true)?error(format(__Oak_String('Incomplete binary expression with {{0}}'),({type:op})),(peek().pos??null)):((right)=>(pushMinPrec(prec),notError((right=parseNode()),function _(){return (popMinPrec(),(node=({type:Symbol.for('binary'),tok:peeked,op,left:node,right})),subBinary())})))())(eof__oak_qm())):null)((prec>minPrec))))())(eof__oak_qm())},notError(subBinary(),function _(){return (node)})))():__oak_eq(__oak_cond,Symbol.for('pushArrow'))?((minPrec,subBinary)=>((minPrec=lastMinPrec()),subBinary=function subBinary(){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?error(__Oak_String('Incomplete binary expression'),lastTokenPos()):((op,peeked,prec)=>((peeked=peek()),(op=(peeked.type??null)),(prec=infixOpPrecedence(op)),((__oak_cond)=>__oak_eq(__oak_cond,true)?(next(),((__oak_cond)=>__oak_eq(__oak_cond,true)?error(format(__Oak_String('Incomplete binary expression with {{0}}'),({type:op})),(peek().pos??null)):((right)=>(pushMinPrec(prec),notError((right=parseNode()),function _(){return (popMinPrec(),(node=({type:Symbol.for('binary'),tok:peeked,op,left:node,right})),subBinary())})))())(eof__oak_qm())):null)((prec>minPrec))))())(eof__oak_qm())},notError(subBinary(),function _(){return (node)})))():__oak_eq(__oak_cond,Symbol.for('greater'))?((minPrec,subBinary)=>((minPrec=lastMinPrec()),subBinary=function subBinary(){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?error(__Oak_String('Incomplete binary expression'),lastTokenPos()):((op,peeked,prec)=>((peeked=peek()),(op=(peeked.type??null)),(prec=infixOpPrecedence(op)),((__oak_cond)=>__oak_eq(__oak_cond,true)?(next(),((__oak_cond)=>__oak_eq(__oak_cond,true)?error(format(__Oak_String('Incomplete binary expression with {{0}}'),({type:op})),(peek().pos??null)):((right)=>(pushMinPrec(prec),notError((right=parseNode()),function _(){return (popMinPrec(),(node=({type:Symbol.for('binary'),tok:peeked,op,left:node,right})),subBinary())})))())(eof__oak_qm())):null)((prec>minPrec))))())(eof__oak_qm())},notError(subBinary(),function _(){return (node)})))():__oak_eq(__oak_cond,Symbol.for('less'))?((minPrec,subBinary)=>((minPrec=lastMinPrec()),subBinary=function subBinary(){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?error(__Oak_String('Incomplete binary expression'),lastTokenPos()):((op,peeked,prec)=>((peeked=peek()),(op=(peeked.type??null)),(prec=infixOpPrecedence(op)),((__oak_cond)=>__oak_eq(__oak_cond,true)?(next(),((__oak_cond)=>__oak_eq(__oak_cond,true)?error(format(__Oak_String('Incomplete binary expression with {{0}}'),({type:op})),(peek().pos??null)):((right)=>(pushMinPrec(prec),notError((right=parseNode()),function _(){return (popMinPrec(),(node=({type:Symbol.for('binary'),tok:peeked,op,left:node,right})),subBinary())})))())(eof__oak_qm())):null)((prec>minPrec))))())(eof__oak_qm())},notError(subBinary(),function _(){return (node)})))():__oak_eq(__oak_cond,Symbol.for('eq'))?((minPrec,subBinary)=>((minPrec=lastMinPrec()),subBinary=function subBinary(){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?error(__Oak_String('Incomplete binary expression'),lastTokenPos()):((op,peeked,prec)=>((peeked=peek()),(op=(peeked.type??null)),(prec=infixOpPrecedence(op)),((__oak_cond)=>__oak_eq(__oak_cond,true)?(next(),((__oak_cond)=>__oak_eq(__oak_cond,true)?error(format(__Oak_String('Incomplete binary expression with {{0}}'),({type:op})),(peek().pos??null)):((right)=>(pushMinPrec(prec),notError((right=parseNode()),function _(){return (popMinPrec(),(node=({type:Symbol.for('binary'),tok:peeked,op,left:node,right})),subBinary())})))())(eof__oak_qm())):null)((prec>minPrec))))())(eof__oak_qm())},notError(subBinary(),function _(){return (node)})))():__oak_eq(__oak_cond,Symbol.for('geq'))?((minPrec,subBinary)=>((minPrec=lastMinPrec()),subBinary=function subBinary(){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?error(__Oak_String('Incomplete binary expression'),lastTokenPos()):((op,peeked,prec)=>((peeked=peek()),(op=(peeked.type??null)),(prec=infixOpPrecedence(op)),((__oak_cond)=>__oak_eq(__oak_cond,true)?(next(),((__oak_cond)=>__oak_eq(__oak_cond,true)?error(format(__Oak_String('Incomplete binary expression with {{0}}'),({type:op})),(peek().pos??null)):((right)=>(pushMinPrec(prec),notError((right=parseNode()),function _(){return (popMinPrec(),(node=({type:Symbol.for('binary'),tok:peeked,op,left:node,right})),subBinary())})))())(eof__oak_qm())):null)((prec>minPrec))))())(eof__oak_qm())},notError(subBinary(),function _(){return (node)})))():__oak_eq(__oak_cond,Symbol.for('leq'))?((minPrec,subBinary)=>((minPrec=lastMinPrec()),subBinary=function subBinary(){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?error(__Oak_String('Incomplete binary expression'),lastTokenPos()):((op,peeked,prec)=>((peeked=peek()),(op=(peeked.type??null)),(prec=infixOpPrecedence(op)),((__oak_cond)=>__oak_eq(__oak_cond,true)?(next(),((__oak_cond)=>__oak_eq(__oak_cond,true)?error(format(__Oak_String('Incomplete binary expression with {{0}}'),({type:op})),(peek().pos??null)):((right)=>(pushMinPrec(prec),notError((right=parseNode()),function _(){return (popMinPrec(),(node=({type:Symbol.for('binary'),tok:peeked,op,left:node,right})),subBinary())})))())(eof__oak_qm())):null)((prec>minPrec))))())(eof__oak_qm())},notError(subBinary(),function _(){return (node)})))():__oak_eq(__oak_cond,Symbol.for('neq'))?((minPrec,subBinary)=>((minPrec=lastMinPrec()),subBinary=function subBinary(){return ((__oak_cond)=>__oak_eq(__oak_cond,true)?error(__Oak_String('Incomplete binary expression'),lastTokenPos()):((op,peeked,prec)=>((peeked=peek()),(op=(peeked.type??null)),(prec=infixOpPrecedence(op)),((__oak_cond)=>__oak_eq(__oak_cond,true)?(next(),((__oak_cond)=>__oak_eq(__oak_cond,true)?error(format(__Oak_String('Incomplete binary expression with {{0}}'),({type:op})),(peek().pos??null)):((right)=>(pushMinPrec(prec),notError((right=parseNode()),function _(){return (popMinPrec(),(node=({type:Symbol.for('binary'),tok:peeked,op,left:node,right})),subBinary())})))())(eof__oak_qm())):null)((prec>minPrec))))())(eof__oak_qm())},notError(subBinary(),function _(){return (node)})))():__oak_eq(__oak_cond,Symbol.for('pipeArrow'))?((pipe,pipeRight)=>((pipe=next()),notError((pipeRight=parseSubNode()),function _(){return ((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('fnCall'))?(((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign(args,__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt.args):(__oak_assgn_tgt.args)=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(pipeRight),append([node],(pipeRight.args??null))),(node=pipeRight),sub()):error(format(__Oak_String('Expected function call after |>, got {{0}}'),pipeRight),(pipe.pos??null)))((pipeRight.type??null))})))():null)((peek().type??null)):null)(!eof__oak_qm())},notError(sub(),function _(){return (node)})))()})},({parse:function _(){return ((nodes,sub)=>((nodes=[]),sub=function sub(){let node;return ((__oak_cond)=>__oak_eq(__oak_cond,true)?notError((node=parseNode()),function _(){return (notError(expect(Symbol.for('comma')),function _(){return (__oak_push(nodes,node),sub())}))}):null)(!eof__oak_qm())},notError(sub(),function _(){return (nodes)})))()}})))()},parse=function parse(text=null){return ((tokens)=>((tokens=tokenize(text)),(Parser(tokens).parse)()))()},Printer=function Printer(tokens=null){return ((connectingToken__oak_qm,last,print,render,tabs)=>(tabs=function tabs(n=null){return ((__oak_cond)=>__oak_eq(__oak_cond,(n>0))?__oak_push(tabs((n-1)),__Oak_String('\t')):__Oak_String(''))(true)},render=function render(token=null){return ((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('comment'))?__as_oak_string(__Oak_String('//')+(token.val??null)):__oak_eq(__oak_cond,Symbol.for('comma'))?__Oak_String(','):__oak_eq(__oak_cond,Symbol.for('dot'))?__Oak_String('.'):__oak_eq(__oak_cond,Symbol.for('leftParen'))?__Oak_String('('):__oak_eq(__oak_cond,Symbol.for('rightParen'))?__Oak_String(')'):__oak_eq(__oak_cond,Symbol.for('leftBracket'))?__Oak_String('['):__oak_eq(__oak_cond,Symbol.for('rightBracket'))?__Oak_String(']'):__oak_eq(__oak_cond,Symbol.for('leftBrace'))?__Oak_String('{'):__oak_eq(__oak_cond,Symbol.for('rightBrace'))?__Oak_String('}'):__oak_eq(__oak_cond,Symbol.for('assign'))?__Oak_String(':='):__oak_eq(__oak_cond,Symbol.for('nonlocalAssign'))?__Oak_String('<-'):__oak_eq(__oak_cond,Symbol.for('pipeArrow'))?__Oak_String('|>'):__oak_eq(__oak_cond,Symbol.for('branchArrow'))?__Oak_String('->'):__oak_eq(__oak_cond,Symbol.for('pushArrow'))?__Oak_String('<<'):__oak_eq(__oak_cond,Symbol.for('colon'))?__Oak_String(':'):__oak_eq(__oak_cond,Symbol.for('ellipsis'))?__Oak_String('...'):__oak_eq(__oak_cond,Symbol.for('qmark'))?__Oak_String('?'):__oak_eq(__oak_cond,Symbol.for('exclam'))?__Oak_String('!'):__oak_eq(__oak_cond,Symbol.for('plus'))?__Oak_String('+'):__oak_eq(__oak_cond,Symbol.for('minus'))?__Oak_String('-'):__oak_eq(__oak_cond,Symbol.for('times'))?__Oak_String('*'):__oak_eq(__oak_cond,Symbol.for('divide'))?__Oak_String('/'):__oak_eq(__oak_cond,Symbol.for('modulus'))?__Oak_String('%'):__oak_eq(__oak_cond,Symbol.for('xor'))?__Oak_String('^'):__oak_eq(__oak_cond,Symbol.for('and'))?__Oak_String('&'):__oak_eq(__oak_cond,Symbol.for('or'))?__Oak_String('|'):__oak_eq(__oak_cond,Symbol.for('greater'))?__Oak_String('>'):__oak_eq(__oak_cond,Symbol.for('less'))?__Oak_String('<'):__oak_eq(__oak_cond,Symbol.for('eq'))?__Oak_String('='):__oak_eq(__oak_cond,Symbol.for('geq'))?__Oak_String('>='):__oak_eq(__oak_cond,Symbol.for('leq'))?__Oak_String('<='):__oak_eq(__oak_cond,Symbol.for('neq'))?__Oak_String('!='):__oak_eq(__oak_cond,Symbol.for('ifKeyword'))?__Oak_String('if'):__oak_eq(__oak_cond,Symbol.for('fnKeyword'))?__Oak_String('fn'):__oak_eq(__oak_cond,Symbol.for('withKeyword'))?__Oak_String('with'):__oak_eq(__oak_cond,Symbol.for('underscore'))?__Oak_String('_'):__oak_eq(__oak_cond,Symbol.for('identifier'))?(token.val??null):__oak_eq(__oak_cond,Symbol.for('trueLiteral'))?__Oak_String('true'):__oak_eq(__oak_cond,Symbol.for('falseLiteral'))?__Oak_String('false'):__oak_eq(__oak_cond,Symbol.for('stringLiteral'))?__oak_push(__oak_push(__Oak_String('\''),(token.val??null)),__Oak_String('\'')):__oak_eq(__oak_cond,Symbol.for('numberLiteral'))?(token.val??null):(printf(__Oak_String('Unknown token {{0}}'),token),string(token)))((token.type??null))},connectingToken__oak_qm=function connectingToken__oak_qm(tokenType=null){return ((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('assign'))?true:__oak_eq(__oak_cond,Symbol.for('nonlocalAssign'))?true:__oak_eq(__oak_cond,Symbol.for('pipeArrow'))?true:__oak_eq(__oak_cond,Symbol.for('branchArrow'))?true:__oak_eq(__oak_cond,Symbol.for('pushArrow'))?true:__oak_eq(__oak_cond,Symbol.for('colon'))?true:__oak_eq(__oak_cond,Symbol.for('plus'))?true:__oak_eq(__oak_cond,Symbol.for('minus'))?true:__oak_eq(__oak_cond,Symbol.for('times'))?true:__oak_eq(__oak_cond,Symbol.for('divide'))?true:__oak_eq(__oak_cond,Symbol.for('modulus'))?true:__oak_eq(__oak_cond,Symbol.for('xor'))?true:__oak_eq(__oak_cond,Symbol.for('and'))?true:__oak_eq(__oak_cond,Symbol.for('or'))?true:__oak_eq(__oak_cond,Symbol.for('greater'))?true:__oak_eq(__oak_cond,Symbol.for('less'))?true:__oak_eq(__oak_cond,Symbol.for('eq'))?true:__oak_eq(__oak_cond,Symbol.for('geq'))?true:__oak_eq(__oak_cond,Symbol.for('leq'))?true:__oak_eq(__oak_cond,Symbol.for('neq'))?true:false)(tokenType)},last=function last(list=null){return __oak_acc(list,__oak_obj_key(((len(list)-1))))},print=function print(){return ((add,curr,currs,hanging__oak_qm,indentLine,indentedLines,indents,lines,purelyDescendingPrefix)=>((lines=[__Oak_String('')]),(indents=[]),(curr=0),(currs=[0]),(hanging__oak_qm=false),add=function add(s=null,tabs=null){return (((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String(''))?__oak_push(last(lines),trimStart(s)):__oak_push(last(lines),s))(trim(last(lines),__Oak_String('\t'))),(curr=__as_oak_string(curr+tabs)),__oak_push(currs,curr))},purelyDescendingPrefix=function purelyDescendingPrefix(list=null){return ((__oak_cond)=>__oak_eq(__oak_cond,0)?list:((sub)=>(sub=function sub(i=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(i=null){return ((__oak_cond)=>__oak_eq(__oak_cond,__oak_eq(i,len(list)))?take(list,i):__oak_eq(__oak_cond,(__oak_acc(list,__oak_obj_key(((i-1))))>__oak_acc(list,__oak_obj_key((i)))))?__oak_trampoline(__oak_trampolined_sub,__as_oak_string(i+1)):take(list,i))(true)}),__oak_resolve_trampoline(__oak_trampolined_sub,i)))()},sub(1)))())(len(list))},indentLine=function indentLine(lastType=null){return ((indent)=>((indent=min(...currs)),((__oak_cond)=>__oak_eq(__oak_cond,((prefix)=>((prefix=purelyDescendingPrefix(currs)),(__oak_left=>__oak_left===false?false:__oak_and(__oak_left,(__oak_js_default(__oak_acc(prefix,0),0)>indent)))((len(prefix)<=1))))())?(indent=__as_oak_string(indent+1)):__oak_eq(__oak_cond,hanging__oak_qm)?(indent=__as_oak_string(indent+1)):null)(true),(hanging__oak_qm=((__oak_cond)=>__oak_eq(__oak_cond,connectingToken__oak_qm(lastType))?true:__oak_eq(__oak_cond,__oak_eq(lastType,Symbol.for('dot')))?true:false)(true)),indent))()},each(tokens,function _(token=null,i=null){return ((lastLastType,lastType,nextType)=>((nextType=(__oak_js_default(__oak_acc(tokens,__oak_obj_key((__as_oak_string(i+1)))),({type:Symbol.for('newline')})).type??null)),([lastLastType=null,lastType=null]=((__oak_cond)=>__oak_eq(__oak_cond,0)?[Symbol.for('newline'),Symbol.for('newline')]:__oak_eq(__oak_cond,1)?[Symbol.for('newline'),(__oak_acc(tokens,__oak_obj_key(((i-1)))).type??null)]:((prev,sub)=>(sub=function sub(prev=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(prev=null){return ((__oak_cond)=>__oak_eq(__oak_cond,-2)?prev:__oak_eq(__oak_cond,-1)?prev:__oak_eq(__oak_cond,0)?prev:((__oak_cond)=>__oak_eq(__oak_cond,[Symbol.for('newline'),Symbol.for('comment')])?__oak_trampoline(__oak_trampolined_sub,(prev-2)):__oak_eq(__oak_cond,[Symbol.for('comment'),Symbol.for('newline')])?__oak_trampoline(__oak_trampolined_sub,(prev-2)):__oak_eq(__oak_cond,[Symbol.for('comment'),__Oak_Empty])?__oak_trampoline(__oak_trampolined_sub,(prev-1)):prev)([(__oak_acc(tokens,__oak_obj_key((prev))).type??null),(__oak_acc(tokens,__oak_obj_key(((prev-1)))).type??null)]))(prev)}),__oak_resolve_trampoline(__oak_trampolined_sub,prev)))()},(prev=max(sub((i-1)),0)),[((__oak_cond)=>__oak_eq(__oak_cond,0)?Symbol.for('newline'):(__oak_acc(tokens,__oak_obj_key(((prev-1)))).type??null))(prev),(__oak_acc(tokens,__oak_obj_key((prev))).type??null)]))())(i)),((__oak_cond)=>__oak_eq(__oak_cond,[__Oak_Empty,Symbol.for('newline'),__Oak_Empty])?(__oak_push(indents,indentLine(lastType)),(currs=[curr]),__oak_push(lines,__Oak_String(''))):__oak_eq(__oak_cond,[__Oak_Empty,Symbol.for('dot'),__Oak_Empty])?add(__Oak_String('.'),0):__oak_eq(__oak_cond,[__Oak_Empty,Symbol.for('leftParen'),__Oak_Empty])?((__oak_cond)=>__oak_eq(__oak_cond,connectingToken__oak_qm(lastType))?add(__oak_push(__Oak_String(' '),render(token)),1):__oak_eq(__oak_cond,__oak_eq(lastType,Symbol.for('comma')))?add(__oak_push(__Oak_String(' '),render(token)),1):__oak_eq(__oak_cond,__oak_eq(lastType,Symbol.for('ifKeyword')))?add(__oak_push(__Oak_String(' '),render(token)),1):__oak_eq(__oak_cond,__oak_eq(lastType,Symbol.for('withKeyword')))?add(__oak_push(__Oak_String(' '),render(token)),1):add(render(token),1))(true):__oak_eq(__oak_cond,[__Oak_Empty,Symbol.for('leftBracket'),__Oak_Empty])?((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('leftParen'))?add(render(token),1):__oak_eq(__oak_cond,Symbol.for('leftBracket'))?add(render(token),1):add(__oak_push(__Oak_String(' '),render(token)),1))(lastType):__oak_eq(__oak_cond,[__Oak_Empty,Symbol.for('leftBrace'),__Oak_Empty])?((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('leftParen'))?add(render(token),1):__oak_eq(__oak_cond,Symbol.for('leftBracket'))?add(render(token),1):add(__oak_push(__Oak_String(' '),render(token)),1))(lastType):__oak_eq(__oak_cond,[Symbol.for('newline'),Symbol.for('rightParen'),__Oak_Empty])?add(render(token),-1):__oak_eq(__oak_cond,[Symbol.for('newline'),Symbol.for('rightBracket'),__Oak_Empty])?add(render(token),-1):__oak_eq(__oak_cond,[Symbol.for('newline'),Symbol.for('rightBrace'),__Oak_Empty])?add(render(token),-1):__oak_eq(__oak_cond,[__Oak_Empty,Symbol.for('rightParen'),__Oak_Empty])?add(render(token),-1):__oak_eq(__oak_cond,[__Oak_Empty,Symbol.for('rightBracket'),__Oak_Empty])?add(render(token),-1):__oak_eq(__oak_cond,[Symbol.for('leftBrace'),Symbol.for('rightBrace'),__Oak_Empty])?add(render(token),-1):__oak_eq(__oak_cond,[__Oak_Empty,Symbol.for('rightBrace'),__Oak_Empty])?add(__oak_push(__Oak_String(' '),render(token)),-1):__oak_eq(__oak_cond,[__Oak_Empty,Symbol.for('comma'),Symbol.for('newline')])?null:__oak_eq(__oak_cond,[__Oak_Empty,Symbol.for('comma'),Symbol.for('rightParen')])?null:__oak_eq(__oak_cond,[__Oak_Empty,Symbol.for('comma'),Symbol.for('rightBracket')])?null:__oak_eq(__oak_cond,[__Oak_Empty,Symbol.for('comma'),Symbol.for('rightBrace')])?null:__oak_eq(__oak_cond,[__Oak_Empty,Symbol.for('colon'),__Oak_Empty])?((__oak_cond)=>__oak_eq(__oak_cond,__oak_eq(lastType,Symbol.for('comma')))?add(__Oak_String(' :'),0):__oak_eq(__oak_cond,__oak_eq(lastType,Symbol.for('leftBrace')))?add(__Oak_String(' :'),0):__oak_eq(__oak_cond,connectingToken__oak_qm(lastType))?add(__Oak_String(' :'),0):add(__Oak_String(':'),0))(true):__oak_eq(__oak_cond,[__Oak_Empty,Symbol.for('comma'),__Oak_Empty])?add(render(token),0):__oak_eq(__oak_cond,[__Oak_Empty,Symbol.for('ellipsis'),__Oak_Empty])?add(render(token),0):__oak_eq(__oak_cond,[Symbol.for('leftParen'),__Oak_Empty,__Oak_Empty])?add(render(token),0):__oak_eq(__oak_cond,[Symbol.for('leftBracket'),__Oak_Empty,__Oak_Empty])?add(render(token),0):__oak_eq(__oak_cond,[Symbol.for('dot'),__Oak_Empty,__Oak_Empty])?add(render(token),0):__oak_eq(__oak_cond,[Symbol.for('exclam'),__Oak_Empty,__Oak_Empty])?add(render(token),0):__oak_eq(__oak_cond,[Symbol.for('minus'),__Oak_Empty,__Oak_Empty])?((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('leftParen'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('leftBracket'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('leftBrace'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('ifKeyword'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('exclam'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('minus'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('newline'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('comma'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('colon'))?add(render(token),0):((__oak_cond)=>__oak_eq(__oak_cond,true)?add(render(token),0):add(__oak_push(__Oak_String(' '),render(token)),0))(connectingToken__oak_qm(lastLastType)))(lastLastType):__oak_eq(__oak_cond,[Symbol.for('colon'),Symbol.for('identifier'),__Oak_Empty])?((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('leftParen'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('leftBracket'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('leftBrace'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('rightParen'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('rightBracket'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('rightBrace'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('ifKeyword'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('exclam'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('minus'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('newline'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('comma'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('colon'))?add(render(token),0):((__oak_cond)=>__oak_eq(__oak_cond,true)?add(render(token),0):add(__oak_push(__Oak_String(' '),render(token)),0))(connectingToken__oak_qm(lastLastType)))(lastLastType):__oak_eq(__oak_cond,[Symbol.for('colon'),Symbol.for('ifKeyword'),__Oak_Empty])?((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('leftParen'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('leftBracket'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('leftBrace'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('rightParen'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('rightBracket'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('rightBrace'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('ifKeyword'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('exclam'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('minus'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('newline'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('comma'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('colon'))?add(render(token),0):((__oak_cond)=>__oak_eq(__oak_cond,true)?add(render(token),0):add(__oak_push(__Oak_String(' '),render(token)),0))(connectingToken__oak_qm(lastLastType)))(lastLastType):__oak_eq(__oak_cond,[Symbol.for('colon'),Symbol.for('fnKeyword'),__Oak_Empty])?((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('leftParen'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('leftBracket'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('leftBrace'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('rightParen'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('rightBracket'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('rightBrace'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('ifKeyword'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('exclam'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('minus'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('newline'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('comma'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('colon'))?add(render(token),0):((__oak_cond)=>__oak_eq(__oak_cond,true)?add(render(token),0):add(__oak_push(__Oak_String(' '),render(token)),0))(connectingToken__oak_qm(lastLastType)))(lastLastType):__oak_eq(__oak_cond,[Symbol.for('colon'),Symbol.for('withKeyword'),__Oak_Empty])?((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('leftParen'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('leftBracket'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('leftBrace'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('rightParen'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('rightBracket'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('rightBrace'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('ifKeyword'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('exclam'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('minus'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('newline'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('comma'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('colon'))?add(render(token),0):((__oak_cond)=>__oak_eq(__oak_cond,true)?add(render(token),0):add(__oak_push(__Oak_String(' '),render(token)),0))(connectingToken__oak_qm(lastLastType)))(lastLastType):__oak_eq(__oak_cond,[Symbol.for('colon'),Symbol.for('trueLiteral'),__Oak_Empty])?((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('leftParen'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('leftBracket'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('leftBrace'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('rightParen'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('rightBracket'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('rightBrace'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('ifKeyword'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('exclam'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('minus'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('newline'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('comma'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('colon'))?add(render(token),0):((__oak_cond)=>__oak_eq(__oak_cond,true)?add(render(token),0):add(__oak_push(__Oak_String(' '),render(token)),0))(connectingToken__oak_qm(lastLastType)))(lastLastType):__oak_eq(__oak_cond,[Symbol.for('colon'),Symbol.for('falseLiteral'),__Oak_Empty])?((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('leftParen'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('leftBracket'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('leftBrace'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('rightParen'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('rightBracket'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('rightBrace'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('ifKeyword'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('exclam'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('minus'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('newline'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('comma'))?add(render(token),0):__oak_eq(__oak_cond,Symbol.for('colon'))?add(render(token),0):((__oak_cond)=>__oak_eq(__oak_cond,true)?add(render(token),0):add(__oak_push(__Oak_String(' '),render(token)),0))(connectingToken__oak_qm(lastLastType)))(lastLastType):__oak_eq(__oak_cond,[Symbol.for('leftBrace'),__Oak_Empty,__Oak_Empty])?add(__oak_push(__Oak_String(' '),render(token)),0):add(__oak_push(__Oak_String(' '),render(token)),0))([lastType,(token.type??null),nextType])))()}),__oak_push(indents,indentLine(last(tokens))),each(indents,function _(n=null,i=null){return ((__oak_cond)=>__oak_eq(__oak_cond,0)?null:((__oak_cond)=>__oak_eq(__oak_cond,true)?((sub,target)=>(sub=function sub(j=null){return ((__oak_trampolined_sub)=>((__oak_trampolined_sub=function _(j=null){return ((__oak_cond)=>__oak_eq(__oak_cond,(__oak_acc(indents,__oak_obj_key((j)))>n))?__oak_trampoline(__oak_trampolined_sub,(j-1)):__as_oak_string(j+1))(true)}),__oak_resolve_trampoline(__oak_trampolined_sub,j)))()},(target=sub((i-1))),((__oak_cond)=>__oak_eq(__oak_cond,true)?((diff)=>((diff=(__oak_acc(indents,__oak_obj_key((target)))-n)),each(range(target,i),function _(j=null){return (((__oak_assgn_tgt,__oak_assgn_val)=>(__is_oak_string(__oak_assgn_tgt)?__oak_assgn_tgt.assign((j),__oak_assgn_val):__oak_assgn_val===__Oak_Empty?delete (__oak_assgn_tgt[__oak_obj_key((j))]):(__oak_assgn_tgt[__oak_obj_key((j))])=__oak_assgn_val,__oak_assgn_tgt))(__as_oak_string(indents),__as_oak_string((__oak_acc(indents,__oak_obj_key((j)))-diff)+1)))})))():null)(((__oak_acc(indents,__oak_obj_key((target)))-n)>1))))():null)((n<__oak_acc(indents,__oak_obj_key(((i-1)))))))(i)}),(indentedLines=map(lines,function _(line=null,i=null){return ((__oak_cond)=>__oak_eq(__oak_cond,__Oak_String(''))?__Oak_String(''):__oak_push(tabs(__oak_acc(indents,__oak_obj_key((i)))),line))(line)})),join(indentedLines,__Oak_String('\n'))))()},({print})))()},print=function print(text=null){return ((printer,tokens)=>((tokens=tokenize(text)),(printer=Printer(tokens)),((__oak_cond)=>__oak_eq(__oak_cond,true)?__oak_push(__oak_push(first(cut(text,__Oak_String('\n'))),__Oak_String('\n')),(printer.print)()):(printer.print)())(shebang__oak_qm(text))))()},({Parser,Printer,Tokenizer,append,contains__oak_qm,cut,__oak_js_default,digit__oak_qm,each,filter,first,format,fromHex,join,last,map,max,min,parse,print,printf,range,reduce,renderPos,renderToken,replace,shebang__oak_qm,slice,space__oak_qm,startsWith__oak_qm,strContains__oak_qm,take,tokenize,trim,trimEnd,trimStart,word__oak_qm})))()}),__oak_modularize(__Oak_String('test'),function _(){return ((debug,__oak_js_default,each,every,filter,join,map,__oak_js_new,printf,split)=>(({__oak_js_default,map,each,every,filter}=__oak_module_import(__Oak_String('std'))),({split,join}=__oak_module_import(__Oak_String('str'))),({printf}=__oak_module_import(__Oak_String('fmt'))),(debug=__oak_module_import(__Oak_String('debug'))),__oak_js_new=function __oak_js_new(title=null){return ((Skipped,Tests,green,red,reportAggregate,reportTests,self)=>((Tests=[]),(Skipped=[]),red=function red(s=null){return __as_oak_string(__as_oak_string(__Oak_String('[0;31m')+s)+__Oak_String('[0;0m'))},green=function green(s=null){return __as_oak_string(__as_oak_string(__Oak_String('[0;32m')+s)+__Oak_String('[0;0m'))},reportTests=function reportTests(tests=null){return (each(tests,function _(test=null){return ((expect,name,p__oak_qm,printIndentedDebug,result)=>(({name,passed__oak_qm:p__oak_qm=null,result,expect}=test),printf(__Oak_String('  {{ 0 }} {{ 1 }}'),((__oak_cond)=>__oak_eq(__oak_cond,true)?green(__Oak_String('✔')):red(__Oak_String('✘')))(p__oak_qm),name),printIndentedDebug=function printIndentedDebug(x=null,indent=null){return (join(map(split((debug.inspect)(x),__Oak_String('\n')),function _(line=null,i=null){return ((__oak_cond)=>__oak_eq(__oak_cond,0)?line:__as_oak_string(indent+line))(i)}),__Oak_String('\n')))},((__oak_cond)=>__oak_eq(__oak_cond,true)?(printf(__Oak_String('\texpected: {{ 0 }}'),printIndentedDebug(expect,__Oak_String('\t          '))),printf(__Oak_String('\t  result: {{ 0 }}'),printIndentedDebug(result,__Oak_String('\t          ')))):null)(!p__oak_qm)))()}))},reportAggregate=function reportAggregate(){return ((failedTests,skipped)=>((failedTests=filter(Tests,function _(t=null){return !(t.passed__oak_qm??null)})),((__oak_cond)=>__oak_eq(__oak_cond,0)?printf(__Oak_String('All {{ 0 }} tests passed.'),len(Tests)):printf(__Oak_String('{{ 0 }} / {{ 1 }} tests passed.'),(len(Tests)-len(failedTests)),len(Tests)))(len(failedTests)),((__oak_cond)=>__oak_eq(__oak_cond,0)?null:printf(__Oak_String('{{ 0 }} tests skipped.'),skipped))((skipped=len(Skipped)))))()},(self=({eq:function _(name=null,result=null,expect=null){return __oak_push(Tests,({name,passed__oak_qm:__oak_eq(result,expect),result,expect}))},approx:function _(name=null,result=null,expect=null,epsilon=null){return ((similar__oak_qm)=>((epsilon=__oak_js_default(epsilon,1e-08)),similar__oak_qm=function similar__oak_qm(a=null,b=null){return ((__oak_cond)=>__oak_eq(__oak_cond,Symbol.for('list'))?every(a,function _(__oak_empty_ident0=null,i=null){return similar__oak_qm(__oak_acc(a,__oak_obj_key((i))),__oak_acc(b,__oak_obj_key((i))))}):__oak_eq(__oak_cond,Symbol.for('object'))?every(keys(a),function _(k=null){return similar__oak_qm(__oak_acc(a,__oak_obj_key((k))),__oak_acc(b,__oak_obj_key((k))))}):(__oak_left=>__oak_left===false?false:__oak_and(__oak_left,(a<__as_oak_string(b+epsilon))))((a>(b-epsilon))))(type(a))},__oak_push(Tests,({name,passed__oak_qm:similar__oak_qm(result,expect),result,expect}))))()},assert:function _(name=null,result=null){return (self.eq)(name,result,true)},skip:function _(name=null,result=null,expect=null){return __oak_push(Skipped,({name}))},reportFailed:function _(){return ((failedTests)=>(((__oak_cond)=>__oak_eq(__oak_cond,[])?null:(printf(__Oak_String('Failed {{ 0 }} tests:'),title),reportTests(failedTests)))((failedTests=filter(Tests,function _(t=null){return !(t.passed__oak_qm??null)}))),reportAggregate()))()},report:function _(){return (printf(__Oak_String('{{ 0 }} tests:'),title),reportTests(Tests),reportAggregate())},exit:function _(){return (exit(((__oak_cond)=>__oak_eq(__oak_cond,[])?0:1)(filter(Tests,function _(t=null){return !(t.passed__oak_qm??null)}))))}}))))()},({debug,__oak_js_default,each,every,filter,join,map,__oak_js_new,printf,split})))()}),(__Oak_Import_Aliases=({[__Oak_String('std')]:__Oak_String('std.oak'),[__Oak_String('str')]:__Oak_String('str.oak'),[__Oak_String('math')]:__Oak_String('math.oak'),[__Oak_String('sort')]:__Oak_String('sort.oak'),[__Oak_String('random')]:__Oak_String('random.oak'),[__Oak_String('fs')]:__Oak_String('fs.oak'),[__Oak_String('fmt')]:__Oak_String('fmt.oak'),[__Oak_String('json')]:__Oak_String('json.oak'),[__Oak_String('datetime')]:__Oak_String('datetime.oak'),[__Oak_String('path')]:__Oak_String('path.oak'),[__Oak_String('http')]:__Oak_String('http.oak'),[__Oak_String('test')]:__Oak_String('test.oak'),[__Oak_String('debug')]:__Oak_String('debug.oak'),[__Oak_String('cli')]:__Oak_String('cli.oak'),[__Oak_String('md')]:__Oak_String('md.oak'),[__Oak_String('crypto')]:__Oak_String('crypto.oak'),[__Oak_String('syntax')]:__Oak_String('syntax.oak')})),__oak_module_import(__Oak_String('src/main.oak')))